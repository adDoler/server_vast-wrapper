// @adr/vpaid-wrapper-player v1.0.6
!function(){"use strict";function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function e(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function n(){n=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),s=new C(r||[]);return i(a,"_invoke",{value:S(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h={};function d(){}function p(){}function v(){}var m={};l(m,a,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(A([])));b&&b!==e&&r.call(b,a)&&(m=b);var g=v.prototype=d.prototype=Object.create(m);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(i,o,a,s){var u=f(t[i],t,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==typeof c&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function S(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return x()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function E(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function A(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return p.prototype=v,i(g,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:p,configurable:!0}),p.displayName=l(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},w(k.prototype),l(k.prototype,s,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new k(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),l(g,u,"Generator"),l(g,a,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=A,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:A(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function s(t){i(a,r,o,s,u,"next",t)}function u(t){i(a,r,o,s,u,"throw",t)}s(void 0)}))}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T(r.key),r)}}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e,n){return(e=T(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function p(t,e,n){return p=d()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&h(i,n.prototype),i},p.apply(null,arguments)}function v(t){var e="function"==typeof Map?new Map:void 0;return v=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return p(t,arguments,f(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),h(r,t)},v(t)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){var e=d();return function(){var n,r=f(t);if(e){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m(t)}(this,n)}}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},b.apply(this,arguments)}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||k(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t){return function(t){if(Array.isArray(t))return S(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||k(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,e){if(t){if("string"==typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(t,e):void 0}}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function E(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=k(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function T(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var P=function(){return P=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},P.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var C,A=function(t,e){if(t)for(var n=Object.prototype.toString.call(e.prototype),r=Object.getPrototypeOf(t);r;){if(Object.prototype.toString.call(r)===n)return!0;r=Object.getPrototypeOf(r)}return!1},x=function(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)},O=function(t){return"string"==typeof t||A(t,String)},j=function(t){return"object"===r(t)&&!Array.isArray(t)&&null!==t},V=function(t){return"[object Object]"===Object.prototype.toString.call(t)},L=function(t){return A(t,HTMLElement)||I(t)},I=function(t){return A(t,Document)},M=function(t){if(!j(t))throw new Error("".concat(t," is not an object"));for(var e in t)return!1;return!0},_=function(t){if(!O(t))throw new Error("".concat(t," is not a string"));return 0===q(t).length},R=function(){if(arguments.length<=0)throw new Error("Function has been called without arguments");return Boolean(arguments.length<=0?void 0:arguments[0])},F=function(t){if(!O(t))throw new Error("".concat(t," is not a string"));return/^(((http|https|ftp):)?\/\/){1}(([A-Z0-9][A-Z0-9_-]*)(\.[A-Z0-9][A-Z0-9_-]*)+)/i.test(t)},D=function(t){return x(parseFloat(t))&&isFinite(t)},B=function(t){var e=(O(t)?t:window.navigator.userAgent).toLowerCase();return/android|webos|iphone|ipad|ipod|blackberry|bb|playbook|iemobile|windows phone|kindle|silk|opera mini/i.test(e)},U=function(t){var e=+"1E".concat(t||10),n=e/10;return Math.floor(n+Math.random()*(e-n))},z=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&";return j(t)?Object.entries(t).map((function(t){return t.join("=")})).join(e):null},W=function(t){if(!O(t)&&!x(t))throw new Error("".concat(t," is not a string or number"));return t+"px"},H=function(t){return new Promise((function(e){return setTimeout(e,x(t)&&t>0?t:0)}))},q=function(t){if(!O(t))throw new Error("".concat(t," is not a string"));return t.replace(/\s/g,"")},N=function(t){if(!O(t)||!/^\d+(\.\d+)?:\d+(\.\d+)?:\d+(\.\d+)?$/.test(t.trim()))return null;var e=t.split(":"),n=0;return n+=3600*parseFloat(e[0]),n+=60*parseFloat(e[1]),n+=parseFloat(e[2]),isNaN(n)?null:n};!function(t){t.OnPage="onpage",t.SameDomainFrame="samedomainiframe",t.CrossDomainFrame="crossdomainframe"}(C||(C={}));var Q=[{system:"doubleclick",parameter:"url"},{system:"betweendigital",parameter:"ref"},{system:"vidroll.ru",parameter:"wpl"},{system:"video-play.ru",parameter:"wpl"}],G=function(){function t(){if(a(this,t),l(this,"_location",void 0),l(this,"_topWin",void 0),l(this,"_topRef",void 0),t._instance)return t._instance;t._instance=this,this.analyzeLocation()}return u(t,[{key:"analyzeLocation",value:function(){var t=window.location.href;if(window.top===window)this._location=C.OnPage,this._topWin=window;else{this._topWin=window.top;try{var e;null===(e=window.top)||void 0===e||e.location.href,t=this._topWin.location.href,this._location=C.SameDomainFrame}catch(e){this._location=C.CrossDomainFrame,t=window.document.referrer||window.location.href}}var n,r=E(Q);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.system,a=i.parameter;if(t.includes(o)){var s=new URL(t).searchParams.get(a);if(s){t=s;break}}}}catch(t){r.e(t)}finally{r.f()}if(window.location.ancestorOrigins&&window.location.ancestorOrigins.length>0){var u=window.location.ancestorOrigins[window.location.ancestorOrigins.length-1];u.replace(/^(https|http):\/\//,"")!==t.replace(/^(https|http):\/\//,"")&&(t=u)}this._topRef=t}},{key:"topReferrer",get:function(){return this._topRef}},{key:"topWindow",get:function(){return this._topWin}},{key:"onPage",get:function(){return this._location===C.OnPage}},{key:"inCrossDomainFrame",get:function(){return this._location===C.CrossDomainFrame}},{key:"inSameDomainFrame",get:function(){return this._location===C.SameDomainFrame}}]),t}();l(G,"_instance",void 0);var Z,$,X=function(t,e){switch(null==t?void 0:t[e]){case!0:return 1;case!1:return 0;default:return-1}},Y={113:function(t){var e=t&&"secondaryParams"in t?{secondaryParams:Boolean(t.secondaryParams)}:t;return X(e,"secondaryParams")},115:function(t){var e;return null!==(e=null==t?void 0:t.methodOfDeterminingVisibility)&&void 0!==e?e:-1},116:function(t){var e;return null!==(e=null==t?void 0:t.appID)&&void 0!==e?e:-1},117:function(t){var e;return null!==(e=null==t?void 0:t.ifa)&&void 0!==e?e:-1},118:function(t){var e;return null!==(e=null==t?void 0:t.sdkVersion)&&void 0!==e?e:-1},119:function(t){var e;return null!==(e=null==t?void 0:t.sdkName)&&void 0!==e?e:-1},161:function(t){var e;return null!==(e=null==t?void 0:t.width)&&void 0!==e?e:-1},162:function(t){var e;return null!==(e=null==t?void 0:t.height)&&void 0!==e?e:-1},163:function(){var t;return null!==(t=(new G).topReferrer)&&void 0!==t?t:-1},165:function(t){if(t&&"getViewablePercent"in t){var e,n=null===(e=t.getViewablePercent)||void 0===e?void 0:e.call(t);if(x(n)&&-1!=+n)return(+n).toFixed(1)}return-1},168:function(){var t=new G;return t.onPage?1:t.inCrossDomainFrame?2:t.inSameDomainFrame?3:-1},176:function(t){return x(null==t?void 0:t.startTime)?(new Date).getTime()-t.startTime:-1},177:function(t){return X(t,"measurable")},213:function(){var t,e;return null!==(t=null===(e=window)||void 0===e||null===(e=e.location)||void 0===e||null===(e=e.ancestorOrigins)||void 0===e?void 0:e.length)&&void 0!==t?t:-1},214:function(){var t,e;return null!==(t=null===(e=window)||void 0===e||null===(e=e.history)||void 0===e?void 0:e.length)&&void 0!==t?t:-1},215:function(){var t,e;return null!==(t=null===(e=window)||void 0===e||null===(e=e.navigator)||void 0===e?void 0:e.userAgent)&&void 0!==t?t:-1},216:function(){var t,e;return null!==(t=null===(e=window)||void 0===e||null===(e=e.screen)||void 0===e?void 0:e.width)&&void 0!==t?t:-1},217:function(){var t,e;return null!==(t=null===(e=window)||void 0===e||null===(e=e.screen)||void 0===e?void 0:e.height)&&void 0!==t?t:-1},218:function(t){return X(t,"isFullscreenMode")},226:function(){return B(t)?function(t,e){var n=e instanceof Window?e:window,r=(O(t)?t:n.navigator.userAgent).toLowerCase(),i=n.navigator.standalone,o=/safari/.test(r),a=/iphone|ipod|ipad/.test(r),s=r.includes("wv"),u=Boolean(r.match(/(WebView|Android.*(wv|.0.0.0)|Linux; U; Android)/gi));return a&&!i&&!o||s||u}()?3:2:1;var t},227:function(t){return X(t,"absoluteVisible")}},J=function(){function t(e){if(a(this,t),l(this,"context",void 0),l(this,"collectedCustoms",void 0),l(this,"customMap",void 0),V(e)){if(!Object.entries(e).some((function(t){var e=g(t,2),n=e[0],r=e[1];return x(+n)&&"function"==typeof r})))throw new TypeError("CustomCollector: invalid custom map.");this.customMap=e}else this.customMap=Y;this.collectedCustoms={}}return u(t,[{key:"collectFrom",value:function(t){if(!V(t))throw new TypeError("CustomCollector: the context must be an object.");if(M(t))throw new TypeError("CustomCollector: empty context was passed.");return this.context=t,this}},{key:"collect",value:function(t){if(!Array.isArray(t))throw new TypeError("CustomCollector: there is no custom list.");if(!this.context)throw new Error("CustomCollector: missing context.");var e,n=E(t);try{for(n.s();!(e=n.n()).done;){var r,i=e.value;x(i)&&(this.collectedCustoms[i]=null!==(r="function"==typeof this.customMap[i]?this.customMap[i](this.context):null)&&void 0!==r?r:-1)}}catch(t){n.e(t)}finally{n.f()}return this}},{key:"clear",value:function(){for(var t in this.collectedCustoms)delete this.collectedCustoms[t];return this}},{key:"toString",value:function(){return z(this.collectedCustoms,";")}}]),t}(),K=function(t,e,n){if((L(t)||t instanceof SVGElement)&&V(e))for(var r in e){var i=x(e[r])?String(e[r]):e[r];O(i)&&!_(i)&&n(t,r,i)}},tt=function(t,e){return K(t,e,(function(t,e,n){return t.style.setProperty(e,n)}))},et="webkitDisplayingFullscreen",nt="webkitEnterFullscreen",rt="webkitExitFullscreen";!function(t){t.Webkit="webkit",t.Moz="moz",t.Ms="ms",t.Web="web",t.DisabledWebkit="webkit_ios",t.Unknown="unknown"}($||($={}));var it,ot=(l(Z={},$.Webkit,{fullscreenEnabled:"webkitFullscreenEnabled",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenChangeEvent:"webkitfullscreenchange",fullscreenErrorEvent:"webkitfullscreenerror",pseudoClass:"-webkit-full-screen"}),l(Z,$.Moz,{fullscreenEnabled:"mozFullScreenEnabled",fullscreenElement:"mozFullScreenElement",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",fullscreenChangeEvent:"mozfullscreenchange",fullscreenErrorEvent:"mozfullscreenerror",pseudoClass:"-moz-full-screen"}),l(Z,$.Ms,{fullscreenEnabled:"msFullscreenEnabled",fullscreenElement:"msFullscreenElement",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",fullscreenChangeEvent:"MSFullscreenChange",fullscreenErrorEvent:"MSFullscreenError",pseudoClass:"-ms-fullscreen"}),l(Z,$.Web,{fullscreenEnabled:"fullscreenEnabled",fullscreenElement:"fullscreenElement",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",fullscreenChangeEvent:"fullscreenchange",fullscreenErrorEvent:"fullscreenerror",pseudoClass:"fullscreen"}),Z),at=function(){if(!it)if(ot[$.Web].fullscreenEnabled in window.document)it=$.Web;else if(ot[$.Webkit].fullscreenEnabled in window.document)it=$.Webkit;else if(ot[$.Moz].fullscreenEnabled in window.document)it=$.Moz;else if(ot[$.Ms].fullscreenEnabled in window.document)it=$.Ms;else{var t=document.createElement("video");it=et in t?$.DisabledWebkit:$.Unknown}return it},st=function(t,e){var n=at(),r=I(e)?e:window.document;if(n===$.Unknown)return null;if(null!=t&&!L(t))throw new Error("Fullscreen: element must be an html element or null.");if(A(t,HTMLVideoElement)){var i,o;if(n===$.Webkit&&et in t)return null!==(i=t[et])&&void 0!==i?i:null;if(n===$.DisabledWebkit&&et in t)return null!==(o=t[et])&&void 0!==o?o:null}return n===$.DisabledWebkit?!t&&(ot.web.fullscreenElement in r?Boolean(r[ot[$.Web].fullscreenElement]):null):t?ot[n].fullscreenElement in r?r[ot[n].fullscreenElement]===t:null:ot[n].fullscreenElement in r?Boolean(r[ot[n].fullscreenElement]):null},ut=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a(this,t),l(this,"timeoutId",void 0),l(this,"timeout",void 0),l(this,"cb",void 0),this.cb=e,this.timeoutId=null,this.timeout=x(n)&&n>=0?n:0}return u(t,[{key:"loopIteration",value:function(){this.cb(),this.timeoutId=setTimeout(this.loopIteration.bind(this),this.timeout)}},{key:"start",value:function(){null===this.timeoutId&&this.loopIteration()}},{key:"stop",value:function(){null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}}]),t}(),lt=function(){var t=o(n().mark((function t(e){var r,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",!1);case 2:if(r=at(),!1===(i=st(e,e.ownerDocument))){t.next=6;break}return t.abrupt("return",i);case 6:if(r!==$.Unknown){t.next=8;break}return t.abrupt("return",null);case 8:if(r!==$.DisabledWebkit){t.next=18;break}if(A(e,HTMLVideoElement)){t.next=11;break}return t.abrupt("return",!1);case 11:if(!(nt in e)){t.next=15;break}e[nt](),t.next=16;break;case 15:case 22:return t.abrupt("return",!1);case 16:t.next=23;break;case 18:if(!(ot[r].requestFullscreen in e)){t.next=22;break}e[ot[r].requestFullscreen](),t.next=23;break;case 23:return t.next=25,new Promise((function(t){var n=new ut((function(){var i=st(e,e.ownerDocument);!0===i&&(n.stop(),clearTimeout(r),t(i))}),100);n.start();var r=setTimeout((function(){n.stop(),t(!1)}),1e3)}));case 25:return t.abrupt("return",t.sent);case 26:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ct=function(){var t=o(n().mark((function t(e,r){var i,o,a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=at(),o=I(r)?r:window.document,a=st(e,r),i!==$.Unknown&&null!==a){t.next=5;break}return t.abrupt("return",null);case 5:if(a){t.next=7;break}return t.abrupt("return",!a);case 7:if(i!==$.DisabledWebkit){t.next=17;break}if(A(e,HTMLVideoElement)){t.next=10;break}return t.abrupt("return",!1);case 10:if(!(rt in e)){t.next=14;break}e[rt](),t.next=15;break;case 14:return t.abrupt("return",!1);case 15:t.next=18;break;case 17:e&&ot[i].exitFullscreen in e?e[ot[i].exitFullscreen]():o[ot[i].exitFullscreen]();case 18:return t.next=20,new Promise((function(t){var n=new ut((function(){var i=st(e,o);!1===i&&(n.stop(),clearTimeout(r),t(!i))}),100);n.start();var r=setTimeout((function(){n.stop(),t(!1)}),1e3)}));case 20:return t.abrupt("return",t.sent);case 21:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),ft=function(t){c(n,t);var e=y(n);function n(t){var r;a(this,n);var i=n.hasProtocol(t)?t:"https:"+t;return l(m(r=e.call(this,i)),"macrosList",[]),Object.setPrototypeOf(m(r),n.prototype),r}return u(n,[{key:"setMacros",value:function(t,e){var n;if(e=null===(n=e)||void 0===n?void 0:n.toString(),O(t)&&!_(t)&&!_(e)){t=t.replace(/[^a-zA-Z0-9 ]/g,"");var r={value:e,template:new RegExp("\\!\\[".concat(t,"\\]"))};this.macrosList.push(r)}return this}},{key:"setRnd",value:function(){return this.setMacros("rnd",U(6)),this}},{key:"setParams",value:function(t){if(V(t))for(var e in t)this.searchParams.set(e,t[e].toString());return this}},{key:"toString",value:function(){var t,e=decodeURIComponent(b(f(n.prototype),"toString",this).call(this)),r=E(this.macrosList);try{for(r.s();!(t=r.n()).done;){var i=t.value,o=i.value,a=i.template;e=e.replace(a,o)}}catch(t){r.e(t)}finally{r.f()}return new URL(e).toString()}},{key:"httpslize",value:function(){return"https:"!==this.protocol&&(this.protocol="https:"),this}}],[{key:"hasProtocol",value:function(t){return/^(https|http):\/\/.+/.test(t)}}]),n}(v(URL)),ht=function(){function t(){a(this,t),l(this,"eventMap",void 0),this.eventMap=Object.create(null)}return u(t,[{key:"subscribe",value:function(t,e){O(t)&&!_(t)&&"function"==typeof e&&(this.eventMap[t]||(this.eventMap[t]=[]),this.eventMap[t].push(e))}},{key:"clear",value:function(){for(var t in this.eventMap)delete this.eventMap[t]}},{key:"triggerEvent",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];O(t)&&this.eventMap[t]&&this.eventMap[t].forEach((function(t){return t.apply(void 0,n)}))}},{key:"unsubscribe",value:function(t,e){if(O(t)&&Array.isArray(this.eventMap[t]))if("function"==typeof e)for(var n=this.eventMap[t].length,r=0;r<n;r++){e===this.eventMap[t][r]&&(this.eventMap[t][r]=this.eventMap[t][n-1],this.eventMap[t].length-=1)}else delete this.eventMap[t]}}]),t}(),dt=function(){function t(e){var n=e.uri,r=e.options,i=e.timeout,o=e.requestCount;if(a(this,t),l(this,"uri",void 0),l(this,"options",void 0),l(this,"timeout",void 0),l(this,"requestCount",void 0),l(this,"requestController",void 0),l(this,"timeoutHandler",void 0),l(this,"numberOfCalls",0),"string"!=typeof n)throw new Error("Fetcher: the uri for request must be a string.");if(!F(n))throw new Error("Fetcher: the uri for request must match the regular expression ".concat("/^(((http|https|ftp):)?//){1}(([ A-Z0-9][A-Z0-9_-]*)(.[ A-Z0-9][A-Z0-9_-]*)+)/i"));this.uri=n,V(r)?this.options=r:this.options={},x(i)?this.timeout=i<200?200:i:this.timeout=1e4,!x(o)||o<1?this.requestCount=2:this.requestCount=o}return u(t,[{key:"request",value:function(){var t=this;try{return this.requestController=new AbortController,this.timeoutHandler=setTimeout((function(){return t.requestController.abort()}),this.timeout),fetch(this.uri,e(e({},this.options),{},{signal:this.requestController.signal})).then((function(e){return clearTimeout(t.timeoutHandler),t.requestController=void 0,t.timeoutHandler=void 0,t.numberOfCalls=0,e})).catch((function(e){if(clearTimeout(t.timeoutHandler),t.requestController=void 0,t.timeoutHandler=void 0,t.numberOfCalls++,t.numberOfCalls>=t.requestCount)throw t.numberOfCalls=0,"AbortError"===e.name&&(e=new Error("Timeout error.")),new Error("Fetcher: Error during request.");return t.request()}))}catch(t){return Promise.reject(new Error("Fetcher: Error when trying to request."))}}}]),t}();!function(){if("object"===("undefined"==typeof window?"undefined":r(window)))if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var t=function(t){for(var e=window.document,n=o(e);n;)n=o(e=n.ownerDocument);return e}(),e=[],n=null,i=null;s.prototype.THROTTLE_TIMEOUT=100,s.prototype.POLL_INTERVAL=null,s.prototype.USE_MUTATION_OBSERVER=!0,s._setupCrossOriginUpdater=function(){return n||(n=function(t,n){i=t&&n?h(t,n):{top:0,bottom:0,left:0,right:0,width:0,height:0},e.forEach((function(t){t._checkForIntersections()}))}),n},s._resetCrossOriginUpdater=function(){n=null,i=null},s.prototype.observe=function(t){if(!this._observationTargets.some((function(e){return e.element==t}))){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(t.ownerDocument),this._checkForIntersections()}},s.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter((function(e){return e.element!=t})),this._unmonitorIntersections(t.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},s.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},s.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},s.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter((function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]}))},s.prototype._parseRootMargin=function(t){var e=(t||"0px").split(/\s+/).map((function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}}));return e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],e},s.prototype._monitorIntersections=function(e){var n=e.defaultView;if(n&&-1==this._monitoringDocuments.indexOf(e)){var r=this._checkForIntersections,i=null,a=null;this.POLL_INTERVAL?i=n.setInterval(r,this.POLL_INTERVAL):(u(n,"resize",r,!0),u(e,"scroll",r,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in n&&(a=new n.MutationObserver(r)).observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(e),this._monitoringUnsubscribes.push((function(){var t=e.defaultView;t&&(i&&t.clearInterval(i),l(t,"resize",r,!0)),l(e,"scroll",r,!0),a&&a.disconnect()}));var s=this.root&&(this.root.ownerDocument||this.root)||t;if(e!=s){var c=o(e);c&&this._monitorIntersections(c.ownerDocument)}}},s.prototype._unmonitorIntersections=function(e){var n=this._monitoringDocuments.indexOf(e);if(-1!=n){var r=this.root&&(this.root.ownerDocument||this.root)||t,i=this._observationTargets.some((function(t){var n=t.element.ownerDocument;if(n==e)return!0;for(;n&&n!=r;){var i=o(n);if((n=i&&i.ownerDocument)==e)return!0}return!1}));if(!i){var a=this._monitoringUnsubscribes[n];if(this._monitoringDocuments.splice(n,1),this._monitoringUnsubscribes.splice(n,1),a(),e!=r){var s=o(e);s&&this._unmonitorIntersections(s.ownerDocument)}}}},s.prototype._unmonitorAllIntersections=function(){var t=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var e=0;e<t.length;e++)t[e]()},s.prototype._checkForIntersections=function(){if(this.root||!n||i){var t=this._rootIsInDom(),e=t?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(r){var i=r.element,o=c(i),s=this._rootContainsTarget(i),u=r.entry,l=t&&s&&this._computeTargetAndRootIntersection(i,o,e),f=null;this._rootContainsTarget(i)?n&&!this.root||(f=e):f={top:0,bottom:0,left:0,right:0,width:0,height:0};var h=r.entry=new a({time:window.performance&&performance.now&&performance.now(),target:i,boundingClientRect:o,rootBounds:f,intersectionRect:l});u?t&&s?this._hasCrossedThreshold(u,h)&&this._queuedEntries.push(h):u&&u.isIntersecting&&this._queuedEntries.push(h):this._queuedEntries.push(h)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},s.prototype._computeTargetAndRootIntersection=function(e,r,o){if("none"!=window.getComputedStyle(e).display){for(var a,s,u,l,f,d,v,m,y=r,b=p(e),g=!1;!g&&b;){var w=null,k=1==b.nodeType?window.getComputedStyle(b):{};if("none"==k.display)return null;if(b==this.root||9==b.nodeType)if(g=!0,b==this.root||b==t)n&&!this.root?!i||0==i.width&&0==i.height?(b=null,w=null,y=null):w=i:w=o;else{var S=p(b),E=S&&c(S),T=S&&this._computeTargetAndRootIntersection(S,E,o);E&&T?(b=S,w=h(E,T)):(b=null,y=null)}else{var P=b.ownerDocument;b!=P.body&&b!=P.documentElement&&"visible"!=k.overflow&&(w=c(b))}if(w&&(a=w,s=y,u=void 0,l=void 0,f=void 0,d=void 0,v=void 0,m=void 0,u=Math.max(a.top,s.top),l=Math.min(a.bottom,s.bottom),f=Math.max(a.left,s.left),d=Math.min(a.right,s.right),m=l-u,y=(v=d-f)>=0&&m>=0&&{top:u,bottom:l,left:f,right:d,width:v,height:m}||null),!y)break;b=b&&p(b)}return y}},s.prototype._getRootRect=function(){var e;if(this.root&&!v(this.root))e=c(this.root);else{var n=v(this.root)?this.root:t,r=n.documentElement,i=n.body;e={top:0,left:0,right:r.clientWidth||i.clientWidth,width:r.clientWidth||i.clientWidth,bottom:r.clientHeight||i.clientHeight,height:r.clientHeight||i.clientHeight}}return this._expandRectByRootMargin(e)},s.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map((function(e,n){return"px"==e.unit?e.value:e.value*(n%2?t.width:t.height)/100})),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},s.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,r=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==r)for(var i=0;i<this.thresholds.length;i++){var o=this.thresholds[i];if(o==n||o==r||o<n!=o<r)return!0}},s.prototype._rootIsInDom=function(){return!this.root||d(t,this.root)},s.prototype._rootContainsTarget=function(e){var n=this.root&&(this.root.ownerDocument||this.root)||t;return d(n,e)&&(!this.root||n==e.ownerDocument)},s.prototype._registerInstance=function(){e.indexOf(this)<0&&e.push(this)},s.prototype._unregisterInstance=function(){var t=e.indexOf(this);-1!=t&&e.splice(t,1)},window.IntersectionObserver=s,window.IntersectionObserverEntry=a}function o(t){try{return t.defaultView&&t.defaultView.frameElement||null}catch(t){return null}}function a(t){this.time=t.time,this.target=t.target,this.rootBounds=f(t.rootBounds),this.boundingClientRect=f(t.boundingClientRect),this.intersectionRect=f(t.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,r=this.intersectionRect,i=r.width*r.height;this.intersectionRatio=n?Number((i/n).toFixed(4)):this.isIntersecting?1:0}function s(t,e){var n,r,i,o=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(o.root&&1!=o.root.nodeType&&9!=o.root.nodeType)throw new Error("root must be a Document or Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,i=null,function(){i||(i=setTimeout((function(){n(),i=null}),r))}),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(o.rootMargin),this.thresholds=this._initThresholds(o.threshold),this.root=o.root||null,this.rootMargin=this._rootMarginValues.map((function(t){return t.value+t.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function u(t,e,n,r){"function"==typeof t.addEventListener?t.addEventListener(e,n,r||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function l(t,e,n,r){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,r||!1):"function"==typeof t.detachEvent&&t.detachEvent("on"+e,n)}function c(t){var e;try{e=t.getBoundingClientRect()}catch(t){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function f(t){return!t||"x"in t?t:{top:t.top,y:t.top,bottom:t.bottom,left:t.left,x:t.left,right:t.right,width:t.width,height:t.height}}function h(t,e){var n=e.top-t.top,r=e.left-t.left;return{top:n,left:r,height:e.height,width:e.width,bottom:n+e.height,right:r+e.width}}function d(t,e){for(var n=e;n;){if(n==t)return!0;n=p(n)}return!1}function p(e){var n=e.parentNode;return 9==e.nodeType&&e!=t?o(e):(n&&n.assignedSlot&&(n=n.assignedSlot.parentNode),n&&11==n.nodeType&&n.host?n.host:n)}function v(t){return t&&9===t.nodeType}}();var pt=function(t){c(n,window.IntersectionObserver);var e=y(n);function n(t,r){var i;return a(this,n),l(m(i=e.call(this,t,r)),"elementsToObserve",[]),Object.setPrototypeOf(m(i),n.prototype),i}return u(n,[{key:"isObserved",value:function(t){if(!L(t))return!1;var e,n=E(this.elementsToObserve);try{for(n.s();!(e=n.n()).done;){if(e.value===t)return!0}}catch(t){n.e(t)}finally{n.f()}return!1}},{key:"disconnect",value:function(){this.elementsToObserve.length=0,b(f(n.prototype),"disconnect",this).call(this)}},{key:"observe",value:function(t){b(f(n.prototype),"observe",this).call(this,t),this.isObserved(t)||this.elementsToObserve.push(t)}},{key:"unobserve",value:function(t){if(!L(t))throw new Error("Target must be an html element");b(f(n.prototype),"unobserve",this).call(this,t);var e=this.elementsToObserve.findIndex((function(e){return e===t}));-1!==e&&(this.elementsToObserve[e]=this.elementsToObserve[this.elementsToObserve.length-1],this.elementsToObserve.pop())}}]),n}(),vt={position:"absolute",display:"none",width:"0px",height:"0px"},mt=function(){function t(e,n){if(a(this,t),l(this,"url",void 0),l(this,"element",void 0),O(e)&&_(e))throw new Error("Pixel: url should not be an empty.");if(!O(e))throw new Error("Pixel: url must be a string.");this.url=e,n instanceof Document?this.element=n.body:n instanceof HTMLElement?this.element=n:this.element=document.body}return u(t,[{key:"send",value:function(){var t=this;return new Promise((function(e,n){var r=document.createElement("img");tt(r,vt),r.setAttribute("referrerpolicy","no-referrer-when-downgrade"),r.setAttribute("src",t.url);var i=setTimeout((function(){r.removeEventListener("load",o),r.removeEventListener("error",o),n(new Error("Pixel: TimeOut error."))}),1e4),o=function(t){clearTimeout(i),"error"===t.type?n(new Error("Pixel: Img error loading.")):e(t)};r.addEventListener("load",o),r.addEventListener("error",o),t.element.append(r)}))}}]),t}(),yt=function(){function t(e,n,r){if(a(this,t),l(this,"uri",void 0),l(this,"parent",void 0),l(this,"timeOut",void 0),l(this,"scriptElement",void 0),!O(e))throw new Error("ScriptLoader: The url must be a string.");if(_(e))throw new Error("ScriptLoader: The url parameter cannot be an empty string.");this.timeOut=x(r)&&function(t){if(!x(t))throw new Error("".concat(t," is not a number"));return t>=0}(r)?r:5e3,this.scriptElement=document.createElement("script"),this.uri=e,I(n)&&L(n.body)?this.parent=n.body:L(n)&&1===(null==n?void 0:n.nodeType)?this.parent=n:this.parent=document.body}return u(t,[{key:"removeScriptElement",value:function(){this.scriptElement.remove()}},{key:"load",value:function(){var t=this;return new Promise((function(e,n){t.scriptElement.setAttribute("src",t.uri);var r=setTimeout((function(){t.scriptElement.removeEventListener("load",i),t.scriptElement.removeEventListener("error",i),t.scriptElement.remove(),n(new Error("TimeOut error."))}),t.timeOut),i=function(i){clearTimeout(r),"error"===i.type?(t.scriptElement.remove(),n(new Error("Script error loading."))):e(!0)};t.scriptElement.addEventListener("load",i,{once:!0}),t.scriptElement.addEventListener("error",i,{once:!0}),t.parent.append(t.scriptElement)}))}},{key:"setAttributes",value:function(t){return function(t,e){K(t,e,(function(t,e,n){return t.setAttribute(e,n)}))}(this.scriptElement,t),this}}]),t}(),bt=function(){function t(){a(this,t),l(this,"audio",void 0),l(this,"timeoutId",void 0),l(this,"checkProcess",void 0),this.audio=new Audio,this.audio.volume=1,this.timeoutId=null,this.checkProcess=null}return u(t,[{key:"check",value:function(){var e=this;return!0===t.resoultCheck?Promise.resolve(t.resoultCheck):(this.checkProcess||(this.checkProcess=new Promise((function(n){var r=function(){e.timeoutId&&clearTimeout(e.timeoutId),t.resoultCheck=!0,e.checkProcess=null,n(!0)};e.audio.addEventListener("play",r);var i=e.audio.play();void 0!==i?i.catch((function(){e.audio.removeEventListener("play",r),e.checkProcess=null,n(!1)})):e.timeoutId=setTimeout((function(){e.audio.removeEventListener("play",r),e.checkProcess=null,n(!1)}),500)}))),this.checkProcess)}}]),t}();l(bt,"resoultCheck",!1);var gt={method:"GET",mode:"cors",credentials:"include",referrerPolicy:"no-referrer-when-downgrade"},wt=function(){function t(e){a(this,t),l(this,"chwl",void 0),this.chwl=e}var e;return u(t,[{key:"check",value:(e=o(n().mark((function t(){var e,r,i,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new ft("https://ev.adriver.ru/cgi-bin/json.cgi").setParams({ad:this.chwl,bt:21,sid:1,tuid:1,rnd:U(6),tail256:(new G).topReferrer}).toString(),r=new dt({uri:e,options:gt}),t.prev=2,t.next=5,r.request();case 5:if((i=t.sent).ok){t.next=8;break}throw new Error("Error while executing chwl request");case 8:return t.next=10,i.json();case 10:if((o=t.sent).chwl){t.next=13;break}throw new Error("Missing or empty chwl");case 13:return t.abrupt("return","0"!==o.chwl);case 16:return t.prev=16,t.t0=t.catch(2),console.error(t.t0),t.abrupt("return",!1);case 20:case"end":return t.stop()}}),t,this,[[2,16]])}))),function(){return e.apply(this,arguments)})}]),t}(),kt=(new DOMParser).parseFromString('\n  <svg class="svg" xmlns="http://www.w3.org/2000/svg" width="100" height="15" viewBox="0 0 199 29">\n        <g fill="#575757" fill-rule="evenodd" transform="translate(0 -1)">\n        <polygon points="146.286 10.635 168.232 10.635 168.232 4.682 146.286 4.682"></polygon>\n        <polygon points="146.286 19.785 168.232 19.785 168.232 14.09 146.286 14.09"></polygon>\n        <polygon points="146.285 29.192 168.232 29.192 168.232 23.239 146.285 23.239"></polygon>\n        <path d="M43.2576 23.4976L49.2566 23.4976C52.6646 23.4976 55.1496 20.3616 55.1496 16.9376 55.1496 13.5136 53.0736 10.3416 49.2566 10.3416L43.2576 10.3416 43.2576 23.4976zM36.1686 29.1926L36.1686 4.6826 49.2566 4.6826C57.2136 4.6826 62.2236 9.8326 62.2236 16.9376 62.2236 24.0426 57.3476 29.1926 49.2566 29.1926L36.1686 29.1926zM75.7517 13.272L84.7507 13.272C86.5687 13.272 87.7497 11.904 87.7497 10.268 87.7497 8.632 86.7947 7.273 84.7507 7.273L75.7517 7.273 75.7517 13.272zM68.2527 1L85.7047 1C91.5667 1 94.9757 5.56 94.9757 10.268 94.9757 13.774 92.8127 17.214 89.7947 18.316L95.0057 29.192 87.4007 29.192 82.5387 18.998 75.7517 18.998 75.7517 29.192 68.2527 29.192 68.2527 1z"></path>\n        <polygon points="101.572 29.192 108.883 29.192 108.883 4.682 101.572 4.682"></polygon>\n        <polygon points="142.818 4.683 131.087 29.193 124.055 29.193 112.323 4.683 119.824 4.683 127.453 20.899 127.688 20.899 135.317 4.683"></polygon>\n        <path d="M189.3674 15.2173C191.1964 15.2173 192.1394 14.0803 192.1394 12.8113 192.1394 11.5423 191.2634 10.3933 189.3674 10.3933L181.6414 10.3933 181.6414 15.2173 189.3674 15.2173zM174.5524 4.6823L189.3674 4.6823C195.5044 4.6823 198.9014 8.0033 198.9564 12.8113 199.0024 16.8033 196.5064 18.9043 194.4574 19.8013 194.5944 19.8013 199.0024 29.1923 199.0024 29.1923L191.5494 29.1923 187.5304 20.9063 181.5054 20.9063 181.5054 29.1923 174.5524 29.1923 174.5524 4.6823zM12.1892 19.1655L16.0312 9.8635 19.8692 19.1655 12.1892 19.1655zM19.1102.9995L12.9522.9995.000200000002 29.1925 8.0432 29.1925 10.0892 24.8605 21.9732 24.8605 24.0192 29.1925 32.0632 29.1925 19.1102.9995z"></path>\n        </g>\n    </svg>\n',"image/svg+xml").firstChild,St=function(){function t(e){var n=e.styles;a(this,t),l(this,"style",void 0),this.style=document.createElement("style"),this.style.textContent=n}return u(t,[{key:"insertInto",value:function(t){this.style.isConnected||t.append(this.style)}}]),t}(),Et={position:"absolute",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center","z-index":"3",width:"100%",height:"100%","background-color":"rgb(29, 29, 29)"},Tt={width:"110px",height:"2px","background-color":"#575757",position:"relative",overflow:"hidden","margin-top":"5px"},Pt={position:"absolute",height:"100%","background-color":"#bfbfbf",animation:"loaderAnimation 2s linear infinite"},Ct=function(){function t(){a(this,t),l(this,"wrapper",void 0),this.wrapper=document.createElement("div");var e=document.createElement("div"),n=document.createElement("div");tt(this.wrapper,Et),tt(e,Tt),tt(n,Pt),e.append(n),this.wrapper.append(kt),this.wrapper.append(e),new St({styles:"\n    @keyframes loaderAnimation {\n        0% { left: 0; width: 0%; }\n        50% { left: 0; width: 100%; }\n        99.9% { left: 100%; width: 100%; }\n        100% { left: 100%; width: 0; }\n    }\n"}).insertInto(this.wrapper)}return u(t,[{key:"insertInto",value:function(t){t.append(this.wrapper)}},{key:"remove",value:function(){this.wrapper.remove()}}]),t}(),At=function(){function t(e){a(this,t),l(this,"sources",void 0),l(this,"currentIndex",void 0),this.sources=e,this.currentIndex=0}return u(t,[{key:"filter",value:function(){this.sources=this.sources.filter((function(t){return Boolean(t.source)}))}},{key:"sort",value:function(){this.sources.sort((function(t,e){return"adriver"===t.system&&"adriver"!==e.system?-1:"adriver"!==t.system&&"adriver"===e.system?1:t.priority-e.priority}))}},{key:"getSource",value:function(){if(!this.hasSources())return null;var t=this.sources[this.currentIndex++],e=t.source,n=t.total;return{source:e,total:n>0?n:1/0}}},{key:"hasSources",value:function(){return this.sources.length>this.currentIndex}}]),t}(),xt={47:function(t){var e=function(t){var e,n=Object.prototype,i=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var i=e&&e.prototype instanceof b?e:b,a=Object.create(i.prototype),s=new V(r||[]);return o(a,"_invoke",{value:A(t,n,s)}),a}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var d="suspendedStart",p="suspendedYield",v="executing",m="completed",y={};function b(){}function g(){}function w(){}var k={};c(k,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(L([])));E&&E!==n&&i.call(E,s)&&(k=E);var T=w.prototype=b.prototype=Object.create(k);function P(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function n(o,a,s,u){var l=h(t[o],t,a);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==r(f)&&i.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,s,u)}),(function(t){n("throw",t,s,u)})):e.resolve(f).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return a=a?a.then(i,i):i()}})}function A(t,e,n){var r=d;return function(i,o){if(r===v)throw new Error("Generator is already running");if(r===m){if("throw"===i)throw o;return I()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=x(a,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=v;var u=h(t,e,n);if("normal"===u.type){if(r=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=m,n.method="throw",n.arg=u.arg)}}}function x(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function V(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function L(t){if(t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:I}}function I(){return{value:e,done:!0}}return g.prototype=w,o(T,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:g,configurable:!0}),g.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,c(t,l,"GeneratorFunction")),t.prototype=Object.create(T),t},t.awrap=function(t){return{__await:t}},P(C.prototype),c(C.prototype,u,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new C(f(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(T),c(T,l,"Generator"),c(T,s,(function(){return this})),c(T,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=L,V.prototype={constructor:V,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;j(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}},Ot={};function jt(t){var e=Ot[t];if(void 0!==e)return e.exports;var n=Ot[t]={exports:{}};return xt[t](n,n.exports,jt),n.exports}jt.d=function(t,e){for(var n in e)jt.o(e,n)&&!jt.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},jt.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var Vt={};!function(){function t(t){return"string"==typeof t}jt.d(Vt,{i4:function(){return Fi},vc:function(){return Ui},S1:function(){return Bi}});var e=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,n=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=e.documentElement)return e.documentElement;var r=null;if("undefined"==typeof DOMParser&&"undefined"!=typeof ActiveXObject)return(r=new ActiveXObject("Microsoft.XMLDOM")).async=!1,r.loadXML(e),r;try{r=function(e,n){var r,i,o=new n;try{if(r=o.parseFromString(e,"application/xml"),t(i=e)&&0===i.length)throw new Error("empty string");if(function(t,e){try{var n=(void 0).parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI;return"http://www.w3.org/1999/xhtml"===n?t.getElementsByTagName("parsererror").length>0:t.getElementsByTagNameNS(n,"parsererror").length>0}catch(t){}}(r))throw new Error("xml parse error")}catch(t){throw new Error("Error: ".concat(t.message," from ").concat(e))}return r}(e,n.DOMParser||DOMParser)}catch(t){throw new Error("Unsupported Environment")}return r};function i(t){return i="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},i(t)}var o=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.documentElement)return new t(e.documentElement);if(e.hasChildNodes()){for(var n,r,i,o="",u=0;u<e.childNodes.length;u++)3==((n=e.childNodes.item(u)).nodeType-1|1)?o+=3===n.nodeType?n.nodeValue.trim():n.nodeValue:1===n.nodeType&&(r=s(n.nodeName),i=new t(n),this.hasOwnProperty(r)?(this[r].constructor!==Array&&(this[r]=[this[r]]),this[r].push(i)):this[r]=i);o&&(this.keyValue=a(o))}if(void 0===e.hasAttributes?e.attributes.length>0:e.hasAttributes())for(var l=0;l<e.attributes.length;l++){var c=e.attributes.item(l);this["@"+s(c.name)]=a(c.value.trim())}}var e,n;return e=t,(n=[{key:"attr",value:function(t){return this["@"+s(t)]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function a(n){return/^\s*$/.test(n)?null:/^(?:true|false)$/i.test(n)?"true"===n.toLowerCase():isFinite(n)?parseFloat(n):function(n){return function(t){return"number"==typeof t}(n)&&(n+=""),!!t(n)&&e.test(n.trim())}(n)?new Date(n):n.trim()}function s(t){return t.charAt(0).toLowerCase()+t.slice(1)}o.fromXML=function(t){return[n(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})].map((function(t){return new o(t)})).shift()};var u=o,l=function(t){return{to:function(e,n){return(r=t,"[object Array]"===Object.prototype.toString.call(r)?t:[t]).filter((function(t){return function(t){return void 0!==t}(t)})).map((function(t){return new e(t,n)}));var r}}};function c(t){return c="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},c(t)}function f(t){var e="function"==typeof Map?new Map:void 0;return f=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return h(t,arguments,v(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),p(r,t)},f(t)}function h(t,e,n){return h=d()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&p(i,n.prototype),i},h.apply(null,arguments)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function m(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===c(e)?e:String(e)}var y,b,g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(a,t);var e,n,r,i,o=(r=a,i=d(),function(){var t,e=v(r);if(i){var n=v(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this,t)).name="VAST ERROR",e}return e=a,n=[{key:"inform",value:function(t){a.errorMessage&&console.error(t)}},{key:"noAttribute",value:function(t,e){var n="The element ".concat(t," is missing an attribute ").concat(e,".");a.fatalError(n)}},{key:"mutuallyExclusiveTags",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r="Either ".concat(e.map((function(t){return"<".concat(t,">")})).join(" or ")," may be provided but not all together.");a.fatalError(r)}},{key:"requiredElements",value:function(t,e){var n="The element ".concat(t," must contain child ").concat(e.length>1?"elements":"element"," ").concat(e.map((function(t){return"<".concat(t,">")})).join(" or "),".");a.fatalError(n)}},{key:"requestAbort",value:function(){var t="All requests were aborted. ".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"");return a.errorMessage&&console.error(t),new a(t)}},{key:"fatalError",value:function(t){throw a.errorMessage&&console.error("VAST FATAL ERROR: ".concat(t)),new a("VAST FATAL ERROR: ".concat(t))}}],n&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(f(Error));y=g,(b=m(b="errorMessage"))in y?Object.defineProperty(y,b,{value:!1,enumerable:!0,configurable:!0,writable:!0}):y[b]=!1;var w=g;function k(t){return k="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},k(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,E(r.key),r)}}function E(t){var e=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===k(e)?e:String(e)}var T=function(t,e,n){return e&&S(t.prototype,e),n&&S(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.delivery=e.attr("delivery"),this.type=e.attr("type"),this.width=e.attr("width"),this.height=e.attr("height"),this.codec=e.attr("codec"),this.id=e.attr("id"),this.bitrate=e.attr("bitrate"),this.minBitrate=e.attr("minBitrate"),this.maxBitrate=e.attr("maxBitrate"),this.scalable=e.attr("scalable"),this.maintainAspectRatio=e.attr("maintainAspectRatio"),this.apiFramework=e.attr("apiFramework"),this.fileSize=e.attr("fileSize"),this.mediaType=e.attr("mediaType"),this.uri=e.keyValue}));function P(t){return P="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},P(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A(r.key),r)}}function A(t){var e=function(t,e){if("object"!==P(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===P(e)?e:String(e)}var x=function(t,e,n){return e&&C(t.prototype,e),n&&C(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.uri=e.keyValue,this.delivery=e.attr("delivery"),this.delivery||w.noAttribute("Mezzanine","delivery"),this.type=e.attr("type"),this.type||w.noAttribute("Mezzanine","type"),this.width=e.attr("width"),this.width||w.noAttribute("Mezzanine","width"),this.height=e.attr("height"),this.height||w.noAttribute("Mezzanine","height"),this.codec=e.attr("codec"),this.id=e.attr("id"),this.fileSize=e.attr("fileSize"),this.mediaType=e.attr("mediaType")}));function O(t){return O="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},O(t)}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,V(r.key),r)}}function V(t){var e=function(t,e){if("object"!==O(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===O(e)?e:String(e)}var L=function(t,e,n){return e&&j(t.prototype,e),n&&j(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e.attr("type"),this.variableDuration=e.attr("variableDuration"),this.apiFramework=e.attr("apiFramework"),this.uri=e.keyValue}));function I(t){return I="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},I(t)}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_(r.key),r)}}function _(t){var e=function(t,e){if("object"!==I(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===I(e)?e:String(e)}var R=function(t,e,n){return e&&M(t.prototype,e),n&&M(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e.attr("type"),this.language=e.attr("language"),this.uri=e.keyValue}));function F(t){return F="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},F(t)}function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,B(r.key),r)}}function B(t){var e=function(t,e){if("object"!==F(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===F(e)?e:String(e)}var U=function(t,e,n){return e&&D(t.prototype,e),n&&D(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.mediaFile?this.mediaFile=l(e.mediaFile).to(T):w.requiredElements("MediaFiles",["mediaFile"]),this.mezzanine=l(e.mezzanine).to(x),this.mezzanine||w.requiredElements("MediaFiles",["mezzanine"],!1),e.interactiveCreativeFile&&(this.interactiveCreativeFile=l(e.interactiveCreativeFile).to(L)),e.closedCaptionFiles&&(this.closedCaptionFiles=l(e.closedCaptionFiles).to(R))}));function z(t){return z="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},z(t)}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,H(r.key),r)}}function H(t){var e=function(t,e){if("object"!==z(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===z(e)?e:String(e)}var q=function(t,e,n){return e&&W(t.prototype,e),n&&W(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.xmlEncoded=e.attr("xmlEncoded"),this.metadata=e.keyValue}));function N(t){return N="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},N(t)}function Q(t){var e=function(t,e){if("object"!==N(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===N(e)?e:String(e)}var G=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"sendPixel",value:function(t){if(document.createElement&&document.body){var e=document.createElement("img");e.style.position="absolute",e.style.display="none",e.style.width=e.style.height="0px",e.setAttribute("referrerpolicy","no-referrer-when-downgrade"),e.src=t,document.body.appendChild(e)}else{var n=new Image;n.setAttribute("referrerpolicy","no-referrer-when-downgrade"),n.src=t}}}],n&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q(r.key),r)}}(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Z(t){return Z="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Z(t)}function $(t){var e=function(t,e){if("object"!==Z(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Z(e)?e:String(e)}var X=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.event=e.attr("event"),this.offset=e.attr("offset"),this.uri=e.keyValue}var e,n;return e=t,(n=[{key:"execute",value:function(){this.uri&&G.sendPixel(this.uri)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$(r.key),r)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Y(t){return Y="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Y(t)}function J(t){var e=function(t,e){if("object"!==Y(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Y(e)?e:String(e)}var K=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.attr("id"),this.uri=e.keyValue}var e,n;return e=t,(n=[{key:"execute",value:function(){this.uri&&window.open(this.uri,"_blank")}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,J(r.key),r)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function tt(t){return tt="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},tt(t)}function et(t){var e=function(t,e){if("object"!==tt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===tt(e)?e:String(e)}var nt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.attr("id"),this.uri=e.keyValue}var e,n;return e=t,(n=[{key:"execute",value:function(){this.uri&&G.sendPixel(this.uri)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,et(r.key),r)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function rt(t){return rt="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},rt(t)}function it(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ot(r.key),r)}}function ot(t){var e=function(t,e){if("object"!==rt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===rt(e)?e:String(e)}var at=function(t,e,n){return e&&it(t.prototype,e),n&&it(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.attr("id"),this.uri=e.keyValue}));function st(t){return st="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},st(t)}function ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lt(r.key),r)}}function lt(t){var e=function(t,e){if("object"!==st(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==st(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===st(e)?e:String(e)}var ct=function(t,e,n){return e&&ut(t.prototype,e),n&&ut(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.clickThrough=l(e.clickThrough).to(K).shift(),this.clickTracking=l(e.clickTracking).to(nt),this.customClick=l(e.customClick).to(at)}));function ft(t){return ft="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},ft(t)}function ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dt(r.key),r)}}function dt(t){var e=function(t,e){if("object"!==ft(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ft(e)?e:String(e)}var pt=function(t,e,n){return e&&ht(t.prototype,e),n&&ht(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.creativeType=e.attr("creativeType"),this.uri=e.keyValue}));function vt(t){return vt="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},vt(t)}function mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yt(r.key),r)}}function yt(t){var e=function(t,e){if("object"!==vt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===vt(e)?e:String(e)}var bt=function(t,e,n){return e&&mt(t.prototype,e),n&&mt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.uri=e.keyValue}));function gt(t){return gt="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},gt(t)}function wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kt(r.key),r)}}function kt(t){var e=function(t,e){if("object"!==gt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===gt(e)?e:String(e)}var St=function(t,e,n){return e&&wt(t.prototype,e),n&&wt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.uri=e.keyValue}));function Et(t){return Et="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Et(t)}function Tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pt(r.key),r)}}function Pt(t){var e=function(t,e){if("object"!==Et(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Et(e)?e:String(e)}var Ct=function(t,e,n){return e&&Tt(t.prototype,e),n&&Tt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.uri=e.keyValue}));function At(t){return At="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},At(t)}function xt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ot(r.key),r)}}function Ot(t){var e=function(t,e){if("object"!==At(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==At(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===At(e)?e:String(e)}var Lt=function(t,e,n){return e&&xt(t.prototype,e),n&&xt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.attr("id"),this.uri=e.keyValue}));function It(t){return It="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},It(t)}function Mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_t(r.key),r)}}function _t(t){var e=function(t,e){if("object"!==It(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==It(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===It(e)?e:String(e)}var Rt=function(t,e,n){return e&&Mt(t.prototype,e),n&&Mt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.content=e.keyValue}));function Ft(t){return Ft="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Ft(t)}function Dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bt(r.key),r)}}function Bt(t){var e=function(t,e){if("object"!==Ft(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ft(e)?e:String(e)}var Ut=function(t,e,n){return e&&Dt(t.prototype,e),n&&Dt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=e.attr("width"),this.width||w.noAttribute("iconClickFallbackImage","width",!0),this.height=e.attr("height"),this.height||w.noAttribute("iconClickFallbackImage","height",!0),this.uri=e.keyValue,this.altText=l(e.altText).to(Rt).shift(),this.staticResource=l(e.staticResource).to(pt)}));function zt(t){return zt="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},zt(t)}function Wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ht(r.key),r)}}function Ht(t){var e=function(t,e){if("object"!==zt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==zt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===zt(e)?e:String(e)}var qt=function(t,e,n){return e&&Wt(t.prototype,e),n&&Wt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.iconClickThrough=l(e.iconClickThrough).to(Ct).shift(),e.iconClickTracking&&(this.iconClickTracking=l(e.iconClickTracking).to(Lt)),e.iconClickFallbackImages&&(this.iconClickFallbackImages=l(e.iconClickFallbackImages.iconClickFallbackImage).to(Ut))}));function Nt(t){return Nt="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Nt(t)}function Qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gt(r.key),r)}}function Gt(t){var e=function(t,e){if("object"!==Nt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Nt(e)?e:String(e)}var Zt=function(t,e,n){return e&&Qt(t.prototype,e),n&&Qt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.uri=e.keyValue}));function $t(t){return $t="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},$t(t)}function Xt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Yt(r.key),r)}}function Yt(t){var e=function(t,e){if("object"!==$t(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==$t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===$t(e)?e:String(e)}var Jt=function(t,e,n){return e&&Xt(t.prototype,e),n&&Xt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.program=e.attr("program"),this.width=e.attr("width"),this.height=e.attr("height"),this.xPosition=e.attr("xPosition"),this.yPosition=e.attr("yPosition"),this.duration=e.attr("duration"),this.offset=e.attr("offset"),this.apiFramework=e.attr("apiFramework"),this.pxratio=e.attr("pxratio")||1,this.altText=e.attr("altText"),this.hoverText=e.attr("hoverText"),this.iFrameResource=l(e.iFrameResource).to(bt),this.htmlResource=l(e.hTMLResource).to(St),this.staticResource=l(e.staticResource).to(pt),this.iconClicks=l(e.iconClicks).to(qt).shift(),this.iconViewTracking=l(e.iconViewTracking).to(Zt)}));function Kt(t){return Kt="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Kt(t)}function te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ee(r.key),r)}}function ee(t){var e=function(t,e){if("object"!==Kt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Kt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Kt(e)?e:String(e)}var ne=function(t,e,n){return e&&te(t.prototype,e),n&&te(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.skipoffset=e.attr("skipoffset")||void 0,this.mediaFiles=l(e.mediaFiles).to(U).shift(),this.duration=e.duration?e.duration.keyValue:void 0,this.adParameters=l(e.adParameters).to(q).shift(),this.videoClicks=l(e.videoClicks).to(ct).shift(),this.icons=l(null===(n=e.icons)||void 0===n?void 0:n.icon).to(Jt),e.trackingEvents&&e.trackingEvents.tracking&&(this.trackingEvents=l(e.trackingEvents.tracking).to(X))}));function re(t){return re="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},re(t)}function ie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oe(r.key),r)}}function oe(t){var e=function(t,e){if("object"!==re(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===re(e)?e:String(e)}var ae=function(t,e,n){return e&&ie(t.prototype,e),n&&ie(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.uri=e.keyValue}));function se(t){return se="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},se(t)}function ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,le(r.key),r)}}function le(t){var e=function(t,e){if("object"!==se(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===se(e)?e:String(e)}var ce=function(t,e,n){return e&&ue(t.prototype,e),n&&ue(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.attr("id"),this.uri=e.keyValue}));function fe(t){return fe="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},fe(t)}function he(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,de(r.key),r)}}function de(t){var e=function(t,e){if("object"!==fe(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===fe(e)?e:String(e)}var pe=function(t,e,n){return e&&he(t.prototype,e),n&&he(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=e.attr("width"),this.width||w.noAttribute("NonLinear","width",!0),this.height=e.attr("height"),this.height||w.noAttribute("NonLinear","height",!0),this.expandedWidth=e.attr("expandedWidth"),this.expandedHeight=e.attr("expandedHeight"),this.scalable=e.attr("scalable"),this.maintainAspectRatio=e.attr("maintainAspectRatio"),this.apiFramework=e.attr("apiFramework"),this.minSuggestedDuration=e.attr("minSuggestedDuration"),this.id=e.attr("id"),this.staticResource=l(e.staticResource).to(pt),this.iFrameResource=l(e.iFrameResource).to(bt),this.hTMLResource=l(e.hTMLResource).to(St),this.adParameters=l(e.adParameters).to(q),this.nonLinearClickThrough=l(e.nonLinearClickThrough).to(ae).shift(),this.nonLinearClickTracking=l(e.nonLinearClickTracking).to(ce)}));function ve(t){return ve="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},ve(t)}function me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ye(r.key),r)}}function ye(t){var e=function(t,e){if("object"!==ve(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ve(e)?e:String(e)}var be=function(t,e,n){return e&&me(t.prototype,e),n&&me(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nonLinear=l(e.nonLinear).to(pe),e.trackingEvents&&e.trackingEvents.tracking&&(this.trackingEvents=l(e.trackingEvents.tracking).to(X))}));function ge(t){return ge="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},ge(t)}function we(t){var e=function(t,e){if("object"!==ge(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ge(e)?e:String(e)}var ke=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.uri=e.keyValue}var e,n;return e=t,(n=[{key:"execute",value:function(){this.uri&&window.open(this.uri,"_blank")}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,we(r.key),r)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Se(t){return Se="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Se(t)}function Ee(t){var e=function(t,e){if("object"!==Se(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Se(e)?e:String(e)}var Te=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.attr("id"),this.uri=e.keyValue}var e,n;return e=t,(n=[{key:"execute",value:function(){this.uri&&G.sendPixel(this.uri)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ee(r.key),r)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Pe(t){return Pe="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Pe(t)}function Ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ae(r.key),r)}}function Ae(t){var e=function(t,e){if("object"!==Pe(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Pe(e)?e:String(e)}var xe=function(t,e,n){return e&&Ce(t.prototype,e),n&&Ce(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=e.attr("width"),this.width||w.noAttribute("Companion","width",!0),this.height=e.attr("height"),this.height||w.noAttribute("Companion","height",!0),this.id=e.attr("id"),this.assetWidth=e.attr("assetWidth"),this.assetHeight=e.attr("assetHeight"),this.expandedWidth=e.attr("expandedWidth"),this.expandedHeight=e.attr("expandedHeight"),this.apiFramework=e.attr("apiFramework"),this.adslotID=e.attr("adslotID"),this.pxratio=e.attr("pxratio")||1,e.staticResource&&(this.staticResource=l(e.staticResource).to(pt)),e.iFrameResource&&(this.iFrameResource=l(e.iFrameResource).to(bt)),e.hTMLResource&&(this.htmlResource=l(e.hTMLResource).to(St)),e.adParameters&&(this.adParameters=l(e.adParameters).to(q)),e.altText&&(this.altText=l(e.altText).to(Rt).shift()),e.companionClickThrough&&(this.companionClickThrough=l(e.companionClickThrough).to(ke).shift()),e.companionClickTracking&&(this.companionClickTracking=l(e.companionClickTracking).to(Te)),e.trackingEvents&&e.trackingEvents.tracking&&(this.trackingEvents=l(e.trackingEvents.tracking).to(X))}));function Oe(t){return Oe="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Oe(t)}function je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ve(r.key),r)}}function Ve(t){var e=function(t,e){if("object"!==Oe(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Oe(e)?e:String(e)}var Le=function(t,e,n){return e&&je(t.prototype,e),n&&je(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.required=e.attr("required"),this.companion=l(e.companion).to(xe)}));function Ie(t){return Ie="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Ie(t)}function Me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_e(r.key),r)}}function _e(t){var e=function(t,e){if("object"!==Ie(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ie(e)?e:String(e)}var Re=function(t,e,n){return e&&Me(t.prototype,e),n&&Me(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.idRegistry=e.attr("idRegistry")||"unknown",this.content=e.keyValue||"unknown"}));function Fe(t){return Fe="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Fe(t)}function De(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Be(r.key),r)}}function Be(t){var e=function(t,e){if("object"!==Fe(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Fe(e)?e:String(e)}var Ue=function(t,e,n){return e&&De(t.prototype,e),n&&De(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e.attr("type"),this.xmlObject=e.keyValue}));function ze(t){return ze="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},ze(t)}function We(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,He(r.key),r)}}function He(t){var e=function(t,e){if("object"!==ze(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ze(e)?e:String(e)}var qe=function(t,e,n){return e&&We(t.prototype,e),n&&We(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.linear=l(e.linear).to(ne).shift(),this.id=e.attr("id"),this.adId=e.attr("adId"),this.sequence=e.attr("sequence"),this.apiFramework=e.attr("apiFramework"),this.universalAdId=l(e.universalAdId).to(Re),this.universalAdId||w.requiredElements("Creative",["universalAdId"]),e.creativeExtensions&&(this.creativeExtensions=l(e.creativeExtensions.creativeExtension).to(Ue)),e.companionAds&&(this.companionAds=l(e.companionAds).to(Le).shift()),e.nonLinearAds&&(this.nonLinearAds=l(e.nonLinearAds).to(be).shift())}));function Ne(t){return Ne="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Ne(t)}function Qe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ge(r.key),r)}}function Ge(t){var e=function(t,e){if("object"!==Ne(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ne(e)?e:String(e)}var Ze=function(t,e,n){return e&&Qe(t.prototype,e),n&&Qe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.authority=e.attr("authority"),this.value=e.keyValue}));function $e(t){return $e="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},$e(t)}function Xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ye(r.key),r)}}function Ye(t){var e=function(t,e){if("object"!==$e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==$e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===$e(e)?e:String(e)}var Je=function(t,e,n){return e&&Xe(t.prototype,e),n&&Xe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e.attr("type"),this.uri=e.keyValue}));function Ke(t){return Ke="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Ke(t)}function tn(t){var e=function(t,e){if("object"!==Ke(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ke(e)?e:String(e)}var en=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.attr("id"),this.uri=e.keyValue}var e,n;return e=t,(n=[{key:"execute",value:function(){this.uri&&G.sendPixel(this.uri)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tn(r.key),r)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function nn(t){return nn="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},nn(t)}function rn(t){var e=function(t,e){if("object"!==nn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==nn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===nn(e)?e:String(e)}var on=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.uri=e.keyValue}var e,n;return e=t,n=[{key:"getURI",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"900";return this.uri.replace(/\[ERRORCODE\]/,t)}},{key:"execute",value:function(t){var e=this.getURI(t);G.sendPixel(e)}}],n&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rn(r.key),r)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function an(t){return an="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},an(t)}function sn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,un(r.key),r)}}function un(t){var e=function(t,e){if("object"!==an(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==an(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===an(e)?e:String(e)}var ln=function(t,e,n){return e&&sn(t.prototype,e),n&&sn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.model=e.attr("model"),this.model||w.noAttribute("Pricing","model",!0),this.currency=e.attr("currency"),this.currency||w.noAttribute("Pricing","currency",!0),this.value=e.keyValue}));function cn(t){return cn="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},cn(t)}function fn(t){var e=function(t,e){if("object"!==cn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==cn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===cn(e)?e:String(e)}var hn=function(){function t(e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.structure(e)}var e,n;return e=t,n=[{key:"structure",value:function(t){var e=this;if(1===function(t){return Object.keys(t).length}(t)&&t.keyValue)return Object.values(t)[0];var n={};for(var r in t)Array.isArray(t[r])?n[r]=t[r].map((function(t){return e.structure(t)})):r.startsWith("@")?n[r.substring(1)]=t.attr(r.substring(1)):dn(t[r])?n[r]=this.structure(t[r]):"keyValue"===r?n.value=t[r]:n[r]=t[r];return n}}],n&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fn(r.key),r)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dn(t){return"Object"===Object.prototype.toString.call(t).slice(8,-1)}var pn=hn;function vn(t){return vn="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},vn(t)}function mn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bn(r.key),r)}}function yn(t,e,n){return e&&mn(t.prototype,e),n&&mn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bn(t){var e=function(t,e){if("object"!==vn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==vn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===vn(e)?e:String(e)}function gn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var wn=yn((function t(e){gn(this,t),this.id=e.attr("id"),e.viewable&&(this.viewable=l(e.viewable).to(kn)),e.notViewable&&(this.notViewable=l(e.notViewable).to(Sn)),e.viewUndetermined&&(this.viewUndetermined=l(e.viewUndetermined).to(En))})),kn=function(){function t(e){gn(this,t),this.uri=e.keyValue}return yn(t,[{key:"execute",value:function(){this.uri&&G.sendPixel(this.uri)}}]),t}(),Sn=function(){function t(e){gn(this,t),this.uri=e.keyValue}return yn(t,[{key:"execute",value:function(){this.uri&&G.sendPixel(this.uri)}}]),t}(),En=function(){function t(e){gn(this,t),this.uri=e.keyValue}return yn(t,[{key:"execute",value:function(){this.uri&&G.sendPixel(this.uri)}}]),t}(),Tn=wn;function Pn(t){return Pn="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Pn(t)}function Cn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,An(r.key),r)}}function An(t){var e=function(t,e){if("object"!==Pn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Pn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Pn(e)?e:String(e)}var xn=function(t,e,n){return e&&Cn(t.prototype,e),n&&Cn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.content=e.keyValue,this.version=e.attr("version")}));function On(t){return On="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},On(t)}function jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vn(r.key),r)}}function Vn(t){var e=function(t,e){if("object"!==On(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==On(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===On(e)?e:String(e)}var Ln=function(t,e,n){return e&&jn(t.prototype,e),n&&jn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.content=e.keyValue,this.id=e.attr("id")}));function In(t){return In="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},In(t)}function Mn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_n(r.key),r)}}function _n(t){var e=function(t,e){if("object"!==In(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==In(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===In(e)?e:String(e)}var Rn=function(t,e,n){return e&&Mn(t.prototype,e),n&&Mn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.apiFramework=e.attr("apiFramework"),this.apiFramework||w.noAttribute("JavaScriptResource","apiFramework",!0),this.browserOptional=e.attr("browserOptional"),void 0===In(this.browserOptional)&&w.noAttribute("JavaScriptResource","browserOptional",!0),this.uri=e.keyValue}));function Fn(t){return Fn="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Fn(t)}function Dn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bn(r.key),r)}}function Bn(t){var e=function(t,e){if("object"!==Fn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Fn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Fn(e)?e:String(e)}var Un=function(t,e,n){return e&&Dn(t.prototype,e),n&&Dn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.apiFramework=e.attr("apiFramework"),this.apiFramework&&w.noAttribute("ExecutableResource","apiFramework",!0),this.type=e.attr("type"),this.type&&w.noAttribute("ExecutableResource","type",!0),this.uri=e.keyValue}));function zn(t){return zn="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},zn(t)}function Wn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hn(r.key),r)}}function Hn(t){var e=function(t,e){if("object"!==zn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==zn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===zn(e)?e:String(e)}var qn=function(t,e,n){return e&&Wn(t.prototype,e),n&&Wn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.event=e.attr("event"),this.uri=e.keyValue}));function Nn(t){return Nn="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Nn(t)}function Qn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gn(r.key),r)}}function Gn(t){var e=function(t,e){if("object"!==Nn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Nn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Nn(e)?e:String(e)}var Zn=function(t,e,n){return e&&Qn(t.prototype,e),n&&Qn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vendor=e.attr("vendor"),this.vendor||w.noAttribute("Verification","vendor",!0),this.javaScriptResources=l(e.javaScriptResource).to(Rn),this.executableResource=l(e.executableResource).to(Un),e.trackingEvents&&e.trackingEvents.tracking&&(this.trackingEvents=l(e.trackingEvents.tracking).to(qn)),this.verificationParameters=e.verificationParameters?e.verificationParameters.keyValue:null}));function $n(t){return $n="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},$n(t)}function Xn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Yn(r.key),r)}}function Yn(t){var e=function(t,e){if("object"!==$n(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==$n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===$n(e)?e:String(e)}var Jn=function(t,e,n){return e&&Xn(t.prototype,e),n&&Xn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.adSystem=l(e.adSystem).to(xn).shift(),this.adSystem||w.requiredElements("InLine",["adSystem"]),this.adTitle=e.adTitle?e.adTitle.keyValue:void 0,this.adTitle||w.requiredElements("InLine",["adTitle"]),this.adServingId=e.adServingId?e.adServingId.keyValue:void 0,e.impression&&(this.impression=l(e.impression).to(en)),this.impression||w.requiredElements("InLine",["impression"]),e.category&&(this.category=l(e.category).to(Ze)),this.description=e.description?e.description.keyValue:void 0,this.advertiser=l(e.advertiser).to(Ln).shift(),this.pricing=l(e.pricing).to(ln).shift(),e.survey&&(this.survey=l(e.survey).to(Je)),this.expires=e.expires?e.expires.keyValue:void 0,this.viewableImpression=l(e.viewableImpression).to(Tn).shift(),e.adVerifications&&e.adVerifications.verification&&(this.adVerifications=l(e.adVerifications.verification).to(Zn)),e.extensions&&(this.extensions=l(e.extensions.extension).to(pn)),e.creatives&&(this.creatives=l(e.creatives.creative).to(qe)),this.creatives||w.requiredElements("InLine",["creatives"]),e.error&&(this.error=l(e.error).to(on))}));function Kn(t){return Kn="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Kn(t)}function tr(t){var e=function(t,e){if("object"!==Kn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Kn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Kn(e)?e:String(e)}var er=function(){function t(e){var n,r,i,o=this;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.impression=l(e.impression).to(en),this.VASTAdTagURI=null===(n=e.vASTAdTagURI)||void 0===n?void 0:n.keyValue,this.adSystem=null===(r=e.adSystem)||void 0===r?void 0:r.keyValue,this.pricing=l(e.pricing).to(ln).shift(),this.errors=l(e.error).to(on),this.viewableImpression=l(e.viewableImpression).to(Tn).shift(),e.AdVerifications&&e.AdVerifications.verification&&(this.adVerifications=l(e.AdVerifications.verification).to(Zn)),e.extensions&&(this.extensions=l(e.extensions.extension).to(pn)),this.creatives=l(e.creatives.creative).to(qe),this.followAdditionalWrappers=e.attr("followAdditionalWrappers")||!0,this.allowMultipleAds=e.attr("allowMultipleAds")||!1,this.fallbackOnNoAd=e.attr("fallbackOnNoAd"),this.BlockedAdCategories=null===(i=e.blockedAdCategories)||void 0===i?void 0:i.keyValue,Fi(this.VASTAdTagURI).then((function(t){return o.vast=t,o})).catch((function(t){return o.vast=null,o}))}var e,n;return e=t,(n=[{key:"structuring",value:function(){var t=this.vast;if(!t)return null;var e=t.getCreative();return e?(e.error=e.error.concat(this.errors||[]),e.impression=e.impression.concat(this.impressions||[]),this.pricing&&(e.pricing=this.pricing),e):null}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tr(r.key),r)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function nr(t){return nr="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},nr(t)}function rr(t){var e=function(t,e){if("object"!==nr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==nr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===nr(e)?e:String(e)}var ir=function(){function t(e){var n=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.attr("id"),this.sequence=e.attr("sequence"),this.conditionalAd=e.attr("conditionalAd")||!1,e.inLine&&e.wrapper&&w.mutuallyExclusiveTags("inLine","wrapper"),e.inLine)this.inLine=new Jn(e.inLine);else{if(e.wrapper)return new er(e.wrapper).then((function(t){return n.wrapper=t,n}));w.requiredElements("Ad",["inLine","wrapper"])}}var e,n;return e=t,(n=[{key:"getRootElem",value:function(){return!this.wrapper&&!this.inLine||this.wrapper&&this.inLine,this.wrapper?this.wrapper:this.inLine}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rr(r.key),r)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function or(t){return or="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},or(t)}function ar(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sr(r.key),r)}}function sr(t){var e=function(t,e){if("object"!==or(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==or(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===or(e)?e:String(e)}var ur=function(t,e,n){return e&&ar(t.prototype,e),n&&ar(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){var n=this;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.format="VAST",this.version=parseFloat(e.attr("version")),this.version||w.noAttribute("VAST","version"),e.error&&e.ad&&w.mutuallyExclusiveTags("error","ad"),e.error||e.ad||w.requiredElements("VAST",["error","ad"]),0===e.ad.length&&w.fatalError("Number of Ad districts 0."),this.error=l(e.error).to(Error),this.error.length,Promise.all(l(e.ad).to(ir)).then((function(t){return n.ad=t,n}))}));function lr(t){return lr="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},lr(t)}function cr(t){var e="function"==typeof Map?new Map:void 0;return cr=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return fr(t,arguments,pr(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),dr(r,t)},cr(t)}function fr(t,e,n){return fr=hr()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&dr(i,n.prototype),i},fr.apply(null,arguments)}function hr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function dr(t,e){return dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dr(t,e)}function pr(t){return pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pr(t)}var vr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dr(t,e)}(o,t);var e,n,r,i=(n=o,r=hr(),function(){var t,e=pr(n);if(r){var i=pr(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===lr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function o(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,t)}return e=o,Object.defineProperty(e,"prototype",{writable:!1}),e}(cr(Error));function mr(t){return mr="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},mr(t)}function yr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,br(r.key),r)}}function br(t){var e=function(t,e){if("object"!==mr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==mr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===mr(e)?e:String(e)}var gr=function(t,e,n){return e&&yr(t.prototype,e),n&&yr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.templateType=e.attr("templateType"),this.vastURI=e.keyValue}));function wr(t){return wr="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},wr(t)}function kr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Sr(r.key),r)}}function Sr(t){var e=function(t,e){if("object"!==wr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==wr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===wr(e)?e:String(e)}var Er=function(t,e,n){return e&&kr(t.prototype,e),n&&kr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){var n=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.attr("id"),this.allowMultipleAds=e.attr("allowMultipleAds"),this.followRedirects=e.attr("followRedirects"),e["vmap:VASTData"])return new ur(e["vmap:VASTData"]).then((function(t){return n.vastData=t,n}));if(e["vmap:AdTagURI"])return new gr(e["vmap:AdTagURI"]);throw e["vmap:CustomAdData"]&&(this.customData=objectMapper(e["vmap:CustomAdData"]).to(pn)),new vr("No source specified")}));function Tr(t){return Tr="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Tr(t)}function Pr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cr(r.key),r)}}function Cr(t){var e=function(t,e){if("object"!==Tr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Tr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Tr(e)?e:String(e)}var Ar=function(t,e,n){return e&&Pr(t.prototype,e),n&&Pr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.event=e.attr("event"),this.uri=e.keyValue}));function xr(t){return xr="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},xr(t)}function Or(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jr(r.key),r)}}function jr(t){var e=function(t,e){if("object"!==xr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==xr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===xr(e)?e:String(e)}var Vr=function(t,e,n){return e&&Or(t.prototype,e),n&&Or(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){var n=this;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.timeOffset=e.attr("timeOffset"),this.breakType=e.attr("breakType"),this.breakId=e.attr("breakId"),this.repeatAfter=e.attr("repeatAfter"),e["vmap:Extensions"]&&(this.extensions=l(e["vmap:Extensions"]["vmap:Extension"]).to(pn)),e["vmap:TrackingEvents"]&&(this.TrackingEvents=l(e["vmap:TrackingEvents"]["vmap:Tracking"]).to(Ar)),new Promise((function(t,n){t(new Er(e["vmap:AdSource"]))})).then((function(t){return n.AdSource=t,n}))}));function Lr(t){return Lr="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Lr(t)}function Ir(t){var e=function(t,e){if("object"!==Lr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Lr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Lr(e)?e:String(e)}var Mr=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.timeOffsetList=e,this.timeOffsetListGroup=n,this.version=r}var e,n;return e=t,n=[{key:"timeOffSet",value:function(t){if(!this.timeOffsetListGroup[t])throw new Error;return Promise.all(this.timeOffsetListGroup[t].map((function(t){if(t.AdSource.vastURI){var e=t.AdSource.vastURI;return Fi(e).then((function(e){return t.AdSource=e,t}))}return t})))}}],n&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ir(r.key),r)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),_r=Mr;function Rr(t){return Rr="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Rr(t)}function Fr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Dr(r.key),r)}}function Dr(t){var e=function(t,e){if("object"!==Rr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Rr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Rr(e)?e:String(e)}var Br=function(t,e,n){return e&&Fr(t.prototype,e),n&&Fr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){var n=this;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e["vmap:Extensions"]&&(this.extensions=l(e["vmap:Extensions"]["vmap:Extension"]).to(pn)),this.version=e.attr("version"),this.format="VMAP",Promise.all(l(e["vmap:AdBreak"]).to(Vr)).then((function(t){return n.adBreak=t,n}))}));function Ur(t){return Ur="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Ur(t)}function zr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Hr(t,e,n){return(e=qr(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qr(t){var e=function(t,e){if("object"!==Ur(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ur(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ur(e)?e:String(e)}var Nr=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=(e.linear?"linear":e.companionAds&&"companionAds")||e.nonLinearAds&&"nonLinearAds"||null;switch(this.type=n,this.adId=e.adId,this.apiFramework=e.apiFramework,this.id=e.id,this.sequence=e.sequence,this.universalAdId=e.universalAdId,this.creativeExtensions=e.creativeExtensions,n){case"linear":var r;this.skipoffset=e.linear.skipoffset,this.mediaFiles=e.linear.mediaFiles,this.duration=e.linear.duration,this.adParameters=e.linear.adParameters,this.videoClicks=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Wr(Object(n),!0).forEach((function(e){Hr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e.linear.videoClicks),this.icons=e.linear.icons;var i=t.groupingTracking(null==e||null===(r=e.linear)||void 0===r?void 0:r.trackingEvents),o=i.trackingEvents,a=i.eventProgressOffsetList;this.trackingEvents=o,this.eventProgressOffsetList=a;break;case"companionAds":this.required=e.companionAds.required,this.companion=e.companionAds.companion.map((function(e){var n={};n.width=e.width,n.height=e.height,n.id=e.id,n.assetWidth=e.assetWidth,n.assetHeight=e.assetHeight,n.expandedWidth=e.expandedWidth,n.expandedHeight=e.expandedHeight,n.apiFramework=e.apiFramework,n.adslotID=e.adslotID,n.pxratio=e.pxratio,n.staticResource=e.staticResource,n.iFrameResource=e.iFrameResource,n.htmlResource=e.htmlResource,n.adParameters=e.adParameters,n.altText=e.altText,n.companionClickThrough=e.companionClickThrough,n.companionClickTracking=e.companionClickTracking;var r=t.groupingTracking(e.trackingEvents),i=r.trackingEvents,o=r.eventProgressOffsetList;return n.trackingEvents=i,n.eventProgressOffsetList=o,n}));break;case"nonLinearAds":var s;this.nonLinear=e.nonLinearAds.nonLinear;var u=t.groupingTracking(null==e||null===(s=e.nonLinearAds)||void 0===s?void 0:s.trackingEvents),l=u.trackingEvents,c=u.eventProgressOffsetList;this.trackingEvents=l,this.eventProgressOffsetList=c}}var e,n;return e=t,n=[{key:"groupingTracking",value:function(t){var e,n={},r=[],i=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return zr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zr(t,e):void 0}}(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(t||[]);try{for(i.s();!(e=i.n()).done;){var o=e.value;"progress"===o.event&&o.offset&&r.push(o.offset),n[o.event]||(n[o.event]=[]),n[o.event].push(o)}}catch(t){i.e(t)}finally{i.f()}return{trackingEvents:n,eventProgressOffsetList:r}}}],n&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qr(r.key),r)}}(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Qr=Nr;function Gr(t){return Gr="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Gr(t)}function Zr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zr(Object(n),!0).forEach((function(e){ti(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Xr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Jr(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Yr(t){return function(t){if(Array.isArray(t))return Kr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Jr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jr(t,e){if(t){if("string"==typeof t)return Kr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kr(t,e):void 0}}function Kr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ti(t,e,n){return(e=ei(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ei(t){var e=function(t,e){if("object"!==Gr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Gr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Gr(e)?e:String(e)}var ni=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ti(this,"structuring",function(){var t=null,e=0;return function(){var n=this;if(!this.vast)return null;if(e>=this.vast.ads.length)return null;if(t||(t=this.vast.nextAd(),e++),t){var r=Array.isArray(t)?t.map((function(t){return n.merge(t)})):this.merge(t);return t=null,r}return this.structuring()}}.call(this)),this.id=e.id,this.conditionalAd=e.conditionalAd,this.VASTAdTagURI=e.VASTAdTagURI,this.adSystem=e.adSystem,this.adVerifications=e.adVerifications,this.allowMultipleAds=e.allowMultipleAds,this.creatives=e.creatives.map((function(t){return new Qr(t)})).sort((function(t,e){return t.sequence-e.sequence})),this.errors=e.errors,this.fallbackOnNoAd=e.fallbackOnNoAd,this.followAdditionalWrappers=e.followAdditionalWrappers,this.impression=e.impression,this.pricing=e.pricing,this.vast=e.vast?Bi(e.vast):null,this.viewableImpression=e.viewableImpression,this.extensions=e.extensions}var e,n;return e=t,n=[{key:"merge",value:function(t){var e,n,r,i,o,a,s,u;t.pricing=this.pricing||t.pricing,t.adServingId=t.adServingId,t.adSystem=t.adSystem||this.adSystem,t.adTitle=t.adTitle,t.description=t.description,t.expires=t.expires,t.advertiser=t.advertiser,t.category=t.category,t.survey=t.survey,t.adVerifications=t.adVerifications,t.viewableImpression||this.viewableImpression?t.viewableImpression={viewable:[].concat(Yr((null===(e=t.viewableImpression)||void 0===e?void 0:e.viewable)||[]),Yr((null===(n=this.viewableImpression)||void 0===n?void 0:n.viewable)||[])),notViewable:[].concat(Yr((null==t||null===(r=t.viewableImpression)||void 0===r?void 0:r.notViewable)||[]),Yr((null===(i=this.viewableImpression)||void 0===i?void 0:i.notViewable)||[])),viewUndetermined:[].concat(Yr((null==t||null===(o=t.viewableImpression)||void 0===o?void 0:o.viewUndetermined)||[]),Yr((null===(a=this.viewableImpression)||void 0===a?void 0:a.viewUndetermined)||[]))}:t.viewableImpression=void 0,t.impression=[].concat(Yr(t.impression||[]),Yr(this.impression||[])),t.errors=[].concat(Yr(t.errors||[]),Yr(this.errors||[])),t.extensions=[].concat(Yr(t.extensions||[]),Yr((null===(s=this.extensions)||void 0===s||null===(u=s.map)||void 0===u?void 0:u.call(s,(function(t){return t.fromWrapper=!0,t})))||[])),t.creatives=t.creatives;var l,c=Xr(this.creatives);try{for(c.s();!(l=c.n()).done;){var f=l.value;switch(f.type){case"linear":for(var h=t.creatives.length,d=0;d<h;d++){var p,v,m;if("linear"===t.creatives[d].type){for(var y in f.trackingEvents){var b;t.creatives[d].trackingEvents[y]||(t.creatives[d].trackingEvents[y]=[]),(b=t.creatives[d].trackingEvents[y]).push.apply(b,Yr(f.trackingEvents[y]||[]))}!t.creatives[d].videoClicks.clickThrough&&f.videoClicks.clickThrough&&(t.creatives[d].videoClicks.clickThrough=f.videoClicks.clickThrough),t.creatives[d].videoClicks.clickTracking||(t.creatives[d].videoClicks.clickTracking=[]),(p=t.creatives[d].videoClicks.clickTracking).push.apply(p,Yr(f.videoClicks.clickTracking||[])),t.creatives[d].videoClicks.customClick||(t.creatives[d].videoClicks.customClick=[]),(v=t.creatives[d].videoClicks.customClick).push.apply(v,Yr(f.videoClicks.customClick||[])),(m=t.creatives[d].icons).push.apply(m,Yr(f.icons))}}break;case"companionAds":t.creatives[t.creatives.length]=$r($r({},f),{},{fromWrapper:!0});break;case"nonLinearAds":var g;if((null===(g=f.nonLinear)||void 0===g?void 0:g.length)>0){var w,k=Xr(f.nonLinear);try{for(k.s();!(w=k.n()).done;)for(var S=w.value,E=t.creatives.length,T=0;T<E;T++)if("nonLinearAds"===t.creatives[T].type)for(var P=t.creatives[T].nonLinear.length,C=0;C<P;C++){var A;(A=t.creatives[T].nonLinear[C].nonLinearClickTracking).push.apply(A,Yr(S.nonLinearClickTracking))}}catch(t){k.e(t)}finally{k.f()}}for(var x=t.creatives.length,O=0;O<x;O++)if("nonLinearAds"===t.creatives[O].type)for(var j in f.trackingEvents){var V;t.creatives[O].trackingEvents[j]||(t.creatives[O].trackingEvents[j]=[]),(V=t.creatives[O].trackingEvents[j]).push.apply(V,Yr(f.trackingEvents[j]))}}}}catch(t){c.e(t)}finally{c.f()}return t}}],n&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ei(r.key),r)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),ri=ni;function ii(t){return ii="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},ii(t)}function oi(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return ai(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ai(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ai(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function si(t){var e=function(t,e){if("object"!==ii(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ii(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ii(e)?e:String(e)}var ui=function(){function t(e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(e=si(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"structuring",(n=!0,function(){return n?(n=!1,this.creatives.length>0?this:null):null})),this.adSystem=e.adSystem,this.adTitle=e.adTitle,this.adServingId=e.adServingId,this.impression=e.impression,this.category=e.category,this.description=e.description,this.advertiser=e.advertiser,this.pricing=e.pricing,this.survey=e.survey,this.expires=e.expires,this.viewableImpression=e.viewableImpression,this.adVerifications=e.adVerifications,this.extensions=e.extensions,this.creatives=e.creatives.map((function(t){return new Qr(t)})).sort((function(t,e){return t.sequence-e.sequence})),this.errors=e.error}var e,n;return e=t,(n=[{key:"executeError",value:function(t){t="string"==typeof t||"number"==typeof t?t:void 0;var e,n=oi(this.errors);try{for(n.s();!(e=n.n()).done;)e.value.execute(t)}catch(t){n.e(t)}finally{n.f()}return!0}},{key:"executeImpression",value:function(){var t,e=oi(this.impression);try{for(e.s();!(t=e.n()).done;)t.value.execute()}catch(t){e.e(t)}finally{e.f()}return!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,si(r.key),r)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),li=ui;function ci(t){return ci="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},ci(t)}function fi(t){var e=function(t,e){if("object"!==ci(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ci(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ci(e)?e:String(e)}var hi=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.id,this.conditionalAd=e.conditionalAd,this.VASTVersion=n,e.inLine?this.inLine=new li(e.inLine):e.wrapper&&(this.wrapper=new ri(e.wrapper))}var e,n;return e=t,(n=[{key:"getRootElement",value:function(){return this.wrapper||this.inLine||null}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fi(r.key),r)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();hi.prototype.getCreative;var di=hi;function pi(t){return pi="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},pi(t)}function vi(t){return function(t){if(Array.isArray(t))return yi(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||mi(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mi(t,e){if(t){if("string"==typeof t)return yi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yi(t,e):void 0}}function yi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wi(r.key),r)}}function gi(t,e,n){return(e=wi(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wi(t){var e=function(t,e){if("object"!==pi(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==pi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===pi(e)?e:String(e)}var ki=function(t,e,n){return e&&bi(t.prototype,e),n&&bi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n,r){var i=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),gi(this,"nextAd",function(){var e,n=0;return function(){var r=this;if("free"===t.mode){if(n>=this.ads.length)return null;var i=this.ads[n++];return Array.isArray(i)?i.map((function(t){return new di(t,r.VASTVersion)})):new di(i,this.VASTVersion)}if("linear"===t.mode){if(n>=this.ads.length)return null;var o=this.ads[n++],a=Array.isArray(o)?o.map((function(t){return new di(t,r.VASTVersion)})):new di(o,this.VASTVersion);if(Array.isArray(o)){var s=a.map((function(t){var e=t.getRootElement(),n=e.structuring();return Array.isArray(n)?(w.inform("Ad pod can't contain another ad pod"),e.structuring()):n}));return s.some((function(t){return null!==t}))?s:this.nextAd()}return a.getRootElement().structuring()||this.nextAd()}if("inDepth"===t.mode){if(n>=this.ads.length)return null;if(!e){var u=this.ads[n];e=Array.isArray(u)?u.map((function(t){return new di(t,r.VASTVersion)})):new di(u,this.VASTVersion)}if(Array.isArray(e)){var l=e.map((function(t){var e=t.getRootElement(),n=e.structuring();return Array.isArray(n)?(w.inform("Ad pod can't contain another ad pod"),e.structuring()):n}));return e=null,n++,l.every((function(t){return null===t}))?this.nextAd():l}var c=e.getRootElement().structuring();return t.callBack&&c&&"InLineInterface"===c.constructor.name&&(c=t.callBack(c)?c:null),c||(e=null,n++,this.nextAd())}}}.call(this)),n)switch(n){case"linear":t.mode="linear";break;case"inDepth":t.mode="inDepth",r&&"function"!=typeof r?console.error("Parameter callBack is not a function, it will be ignored"):t.callBack=r;break;case"free":t.mode="free";break;default:throw new Error("Unknown mode")}var o=[];this.ads=[];var a,s=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=mi(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e.ad);try{var u=function(){var t=a.value;if(t.sequence){var e=t.sequence,n=~o.findIndex((function(t){return t.every((function(t){return t.sequence!==e}))}));n?o[~n].push(t):o[o.length]=[t]}else i.ads[i.ads.length]=t};for(s.s();!(a=s.n()).done;)u()}catch(t){s.e(t)}finally{s.f()}this.ads=[].concat(vi(o.map((function(t){return t.length>1?t:t[0]}))),vi(this.ads)),this.VASTVersion=e.version}));gi(ki,"mode","free"),gi(ki,"callBack",null);var Si=ki;function Ei(t){return Ei="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Ei(t)}function Ti(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ci(r.key),r)}}function Pi(t,e,n){return(e=Ci(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ci(t){var e=function(t,e){if("object"!==Ei(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ei(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ei(e)?e:String(e)}var Ai=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Pi(this,"start",null),Pi(this,"executing",!1),this.controller=new AbortController,this.option={signal:this.controller.signal,credentials:"include"},t.instance=this}var e,n,r;return e=t,r=[{key:"getInstance",value:function(){return t.instance||new t}},{key:"isFirst",value:function(){return!Boolean(t.instance)}},{key:"interval",value:function(){t.instance.executing&&(Date.now()-t.instance.start>15e3?(t.instance.stopRequests(),w.requestAbort("Time limit exceeded.")):setTimeout(t.interval,500))}},{key:"checkingRequestLimits",value:function(){t.requestounter+=1,t.requestounter>t.maxRequests&&(t.instance.stopRequests(),w.requestAbort("Request limit exceeded."))}}],(n=[{key:"init",value:function(){this.executing=!0,this.start=Date.now(),t.interval.call(this)}},{key:"end",value:function(){this.executing=!1,this.start=null,t.requestounter=0}},{key:"stopRequests",value:function(){this.controller.abort(),this.executing=!1,this.start=null,t.requestounter=0}}])&&Ti(e.prototype,n),r&&Ti(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Pi(Ai,"instance",null),Pi(Ai,"requestounter",0),Pi(Ai,"maxRequests",50);var xi=Ai;function Oi(t){return Oi="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},Oi(t)}function ji(t,e){if(t){if("string"==typeof t)return Vi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vi(t,e):void 0}}function Vi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Li(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ii(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Oi(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Oi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Oi(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mi(){Mi=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,i){var o=e&&e.prototype instanceof h?e:h,a=Object.create(o.prototype),s=new P(i||[]);return r(a,"_invoke",{value:k(t,n,s)}),a}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function h(){}function d(){}function p(){}var v={};u(v,o,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(C([])));y&&y!==e&&n.call(y,o)&&(v=y);var b=p.prototype=h.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function i(r,o,a,s){var u=c(t[r],t,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Oi(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){i("next",t,a,s)}),(function(t){i("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return i("throw",t,a,s)}))}s(u.arg)}var o;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function k(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function S(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=c(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,f;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function C(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return d.prototype=p,r(b,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new w(l(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=C,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function _i(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Ri(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){_i(o,r,i,a,s,"next",t)}function s(t){_i(o,r,i,a,s,"throw",t)}a(void 0)}))}}jt(47);var Fi=function(){var t=Ri(Mi().mark((function t(e,n){var r,i,o,a;return Mi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=xi.isFirst(),i=xi.getInstance(),o=i.option,r&&i.init(),xi.checkingRequestLimits(),t.next=7,Di(e,o).then((function(t){if(t.body)throw new Error("Unsupported format");for(var e in t)if(/vmap/.test(e))return new Br(t);return new ur(t)})).catch((function(t){if("function"!=typeof n)throw t;return n(null,t),null}));case 7:if(a=t.sent,r&&i.end(),"function"!=typeof n||!a){t.next=12;break}return n(a,null),t.abrupt("return",null);case 12:return t.abrupt("return",a);case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Di=function(){var t=Ri(Mi().mark((function t(e){var n,r,i,o,a=arguments;return Mi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},t.next=3,fetch(e,n);case 3:return r=t.sent,t.next=6,r.text();case 6:return i=t.sent,o=u.fromXML(i),t.abrupt("return",o);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Bi=function(t,e,n){if(!t)return null;switch(t.format){case"VAST":return new Si(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Li(Object(n),!0).forEach((function(e){Ii(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Li(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t),e,n);case"VMAP":var r,i=function(t){if(Array.isArray(t))return Vi(t)}(u=new Set(t.adBreak.map((function(t){return t.timeOffset}))))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(u)||ji(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o={},a=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ji(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(t.adBreak);try{for(a.s();!(r=a.n()).done;){var s=r.value;o[s.timeOffset]||(o[s.timeOffset]=[]),o[s.timeOffset].push(s)}}catch(t){a.e(t)}finally{a.f()}return new _r(i,o,t.version);default:return null}var u},Ui=function(t){var e=t.errorMessage,n=t.maxRequests;void 0!==e&&"boolean"==typeof e&&(w.errorMessage=e),n&&"number"==typeof n&&n<=1e3&&n>0&&(xi.maxRequests=n)}}();var Lt,It,Mt,_t,Rt,Ft,Dt=Vt.i4,Bt=Vt.S1,Ut=function(){function t(e){a(this,t),l(this,"source",void 0),this.source=e}return u(t,[{key:"load",value:function(){return Dt(this.source).then((function(t){return Bt(t,"inDepth")}))}}]),t}();!function(t){t.Impression="impression",t.Mute="mute",t.Unmute="unmute",t.Loaded="loaded",t.Start="start",t.FirstQuartile="firstQuartile",t.Midpoint="midpoint",t.ThirdQuartile="thirdQuartile",t.Complete="complete",t.Skip="skip",t.Expand="expand",t.Collapse="collapse",t.Timeupdate="timeupdate",t.Close="close",t.Rewind="rewind",t.Pause="pause",t.Resume="resume",t.Click="click",t.SizeChange="sizeChange",t.Error="error",t.SkippableStateChange="skippableStateChange",t.VolumeChange="volumeChange",t.End="end",t.OtherInteraction="otherInteraction",t.CloseableStateChange="closeableStateChange"}(Lt||(Lt={})),function(t){t.CreativeView="creativeView",t.Start="start",t.Midpoint="midpoint",t.FirstQuartile="firstQuartile",t.ThirdQuartile="thirdQuartile",t.Complete="complete",t.Mute="mute",t.Unmute="unmute",t.Pause="pause",t.Rewind="rewind",t.Resume="resume",t.Fullscreen="fullscreen",t.Expand="expand",t.Collapse="collapse",t.AcceptInvitation="acceptInvitation",t.Close="close"}(It||(It={})),function(t){t.PlayButtonClick="playButtonClick",t.PauseButtonClick="pauseButtonClick",t.MuteButtonClick="muteButtonClick",t.UnmuteButtonClick="unmuteButtonClick",t.ExpandButtonClick="expandButtonClick",t.CollapseButtonClick="collapseButtonClick",t.AllowedSkip="allowedSkip",t.SkipButtonClick="skipButtonClick",t.AllowedClose="allowedClose",t.CloseButtonClick="closeButtonClick"}(Mt||(Mt={})),function(t){t.Play="play",t.Pause="pause",t.Mute="mute",t.Unmute="unmute",t.Expand="expand",t.Collapse="collapse",t.Close="close",t.Skip="skip"}(_t||(_t={})),function(t){t.PlayPause="play-pause",t.MuteUnmute="mute-unmute",t.ExpandCollapse="expand-collapse",t.Close="close",t.Skip="skip"}(Rt||(Rt={})),function(t){t.ProgressBar="progress-bar"}(Ft||(Ft={}));var zt,Wt,Ht={rootMargin:"0px",threshold:[0,.025,.05,.075,.1,.125,.15,.175,.2,.225,.25,.275,.3,.325,.35,.375,.4,.425,.45,.475,.5,.525,.55,.575,.6,.625,.65,.675,.7,.725,.75,.775,.8,.825,.85,.875,.9,.925,.95,.975,1]},qt=function(){function t(){a(this,t),l(this,"loop",void 0),l(this,"playbackTime",void 0),l(this,"adVendor",void 0),l(this,"prevTime",void 0),this.loop=new ut(this.checkTimeUpdate.bind(this),500),this.playbackTime=0,this.adVendor=null,this.prevTime=0}return u(t,[{key:"setVendor",value:function(t){this.prevTime=0,this.adVendor=t,this.registerListeners()}},{key:"registerListeners",value:function(){var t=this;[Lt.Start,Lt.Resume].forEach((function(e){return t.adVendor.subscribe(e,(function(){return t.loop.start()}))})),[Lt.Pause,Lt.End,Lt.Close,Lt.Skip,Lt.Error].forEach((function(e){return t.adVendor.subscribe(e,(function(){return t.loop.stop()}))}))}},{key:"checkTimeUpdate",value:function(){var t=this.adVendor.currentTime,e=t-this.prevTime;this.prevTime=t,e>1||e<0||(this.playbackTime+=e)}},{key:"getPlaybackTime",value:function(){return this.playbackTime}}]),t}(),Nt=function(){function t(e){a(this,t),l(this,"ec",void 0),this.ec=e}return u(t,[{key:"bindWith",value:function(t){for(var e=this,n=function(){var n=i[r];t.subscribe(n,(function(){return e.ec.triggerEvent(n)}))},r=0,i=Object.values(Lt);r<i.length;r++)n()}}]),t}(),Qt=(l(zt={},It.CreativeView,Lt.Impression),l(zt,It.Start,Lt.Start),l(zt,It.FirstQuartile,Lt.FirstQuartile),l(zt,It.Midpoint,Lt.Midpoint),l(zt,It.ThirdQuartile,Lt.ThirdQuartile),l(zt,It.Complete,Lt.Complete),l(zt,It.Mute,Lt.Mute),l(zt,It.Unmute,Lt.Unmute),l(zt,It.Pause,Lt.Pause),l(zt,It.Rewind,Lt.Rewind),l(zt,It.Resume,Lt.Resume),l(zt,It.Expand,Lt.Expand),l(zt,It.Collapse,Lt.Collapse),l(zt,It.AcceptInvitation,Lt.OtherInteraction),l(zt,It.Close,Lt.Close),l(zt,It.Fullscreen,null),zt),Gt=function(){function t(e){a(this,t),l(this,"collectedVastEvents",void 0),this.collectedVastEvents=e}return u(t,[{key:"bindWith",value:function(t){var e,n,r;for(var i in this.collectedVastEvents.impression.forEach((function(e){t.subscribe(Lt.Impression,(function(){e.execute()}))})),this.collectedVastEvents.trackingEvents){var o;null===(o=this.collectedVastEvents.trackingEvents[i])||void 0===o||o.forEach((function(e){var n=Qt[e.event];n&&t.subscribe(n,(function(){e.execute()}))}))}null===(e=this.collectedVastEvents.error)||void 0===e||e.forEach((function(e){t.subscribe(Lt.Error,(function(){e.execute()}))})),null===(n=this.collectedVastEvents.videoClicks)||void 0===n||n.customClick.forEach((function(e){t.subscribe(Lt.Click,(function(){e.execute()}))})),null===(r=this.collectedVastEvents.videoClicks)||void 0===r||r.clickTracking.forEach((function(e){t.subscribe(Lt.Click,(function(){e.execute()}))}))}}]),t}(),Zt=function(){function t(e){a(this,t),l(this,"mediaFile",void 0),this.mediaFile=e}return u(t,[{key:"filter",value:function(){this.mediaFile=this.mediaFile.filter((function(t){return t.uri}))}},{key:"sort",value:function(t,e){0===t&&0===e||this.mediaFile.sort((function(n,r){var i=0;return e&&n.height&&r.height&&(i+=Math.abs(n.height-e)-Math.abs(r.height-e)),t&&n.width&&r.width&&(i+=Math.abs(n.width-t)-Math.abs(r.width-t)),i}))}},{key:"getSources",value:function(){return this.mediaFile.map((function(t){var e=document.createElement("source");return e.src=t.uri,e.type=t.type,e}))}},{key:"hasValidSources",value:function(){return this.mediaFile.length>0}}]),t}();Wt=function(t){return"function"==typeof Node?t instanceof Node:t&&"object"===r(t)&&t.nodeName&&t.nodeType>=1&&t.nodeType<=12},!window.Element&&"append"in window.Element.prototype||(window.Element.prototype.append=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=Array.prototype.slice.call(e),i=document.createDocumentFragment(),o=0;o<r.length;o++)i.appendChild(Wt(r[o])?r[o]:document.createTextNode(String(r[o])));this.appendChild(i)}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(t){t.hasOwnProperty("remove")||Object.defineProperty(t,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}));var $t=function(){function t(e){var n,r;a(this,t),l(this,"elem",void 0),l(this,"mainElement",void 0),l(this,"isImg",void 0),l(this,"isIframe",void 0),l(this,"elementDimensions",void 0),this.elem=e,this.isImg=this.elem instanceof HTMLImageElement,this.isIframe=this.elem instanceof HTMLIFrameElement,this.mainElement=this.isImg||this.isIframe?this.elem.parentNode:this.elem;var i=window.getComputedStyle(this.mainElement).position;"static"!==i&&i||(this.mainElement.style.position="relative"),this.elementDimensions={width:this.elem.offsetWidth,height:this.elem.offsetHeight,widthParent:(null===(n=this.elem.offsetParent)||void 0===n?void 0:n.offsetWidth)||this.elem.offsetWidth,heightParent:(null===(r=this.elem.offsetParent)||void 0===r?void 0:r.offsetHeight)||this.elem.offsetHeight,left:this.elem.offsetLeft,top:this.elem.offsetTop}}return u(t,[{key:"append",value:function(t,e){var n;if(!this.isImg||this.elem.complete){null!==(n=this.mainElement)&&void 0!==n&&null!==(n=n.ownerDocument)&&void 0!==n&&n.defaultView&&this.mainElement instanceof this.mainElement.ownerDocument.defaultView.HTMLBodyElement?t.style.position="fixed":t.style.position="absolute",this.mainElement.append(t);var r=this.isImg||this.isIframe;e.top&&(t.style.top=r?this.elementDimensions.top+"px":"0px"),e.bottom&&(t.style.bottom=r?this.elementDimensions.heightParent-this.elementDimensions.height-this.elementDimensions.top+"px":"0px"),e.right&&(t.style.right=r?this.elementDimensions.widthParent-this.elementDimensions.width-this.elementDimensions.left+"px":"0px"),e.left&&(t.style.left=r?this.elementDimensions.left+"px":"0px")}else this.elem.addEventListener("load",this.append.bind(this,t,e),{once:!0})}}]),t}(),Xt=function(){function t(e){a(this,t),l(this,"wrapper",void 0),l(this,"contentWrapper",void 0),l(this,"openSize",""),this.wrapper=document.createElement("div"),this.wrapper.style.overflow="hidden",this.wrapper.style.width=e,this.wrapper.style.height="0px",this.wrapper.style.transitionDuration="0.2s",this.wrapper.style.zIndex="10000",this.wrapper.style.left="0px",this.contentWrapper=document.createElement("div"),this.contentWrapper.style.width="100%",this.contentWrapper.style.overflow="hidden",this.contentWrapper.style.backgroundColor="#eee",this.contentWrapper.style.padding="3px",this.contentWrapper.style.boxSizing="border-box",this.wrapper.append(this.contentWrapper)}return u(t,[{key:"open",value:function(){this.wrapper.style.height=this.openSize||(this.openSize=this.contentWrapper.offsetHeight+"px")}},{key:"close",value:function(){this.wrapper.style.height="0px"}},{key:"remove",value:function(){this.wrapper.remove()}},{key:"insertontent",value:function(t){if("string"==typeof t&&0!==t.length){var e=document.createElement("span");e.style.wordWrap="break-word",e.style.fontFamily="arial, sans serif",e.style.fontSize="11px",e.innerHTML=t,this.contentWrapper.append(e)}}},{key:"getElement",value:function(){return this.wrapper}}]),t}(),Yt=function(){function t(){a(this,t)}return u(t,null,[{key:"erirIcon",value:function(){var t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg"),n=document.createElementNS(t,"path");e.append(n),e.style.width="9px",e.style.height="9px",e.style.fill="white",e.setAttribute("viewBox","0 0 192 512"),n.setAttribute("d","M160 448h-32V224c0-17.69-14.33-32-32-32L32 192c-17.67 0-32 14.31-32 32s14.33 31.1 32 31.1h32v192H32c-17.67 0-32 14.31-32 32s14.33 32 32 32h128c17.67 0 32-14.31 32-32S177.7 448 160 448zM96 128c26.51 0 48-21.49 48-48S122.5 32.01 96 32.01s-48 21.49-48 48S69.49 128 96 128z");var r=document.createElement("div");return r.style.boxSizing="border-box",r.style.padding="1px 2px",r.style.display="flex",r.style.justifyContent="center",r.style.alignItems="center",r.append(e),r}}]),t}(),Jt=function(){function t(e){var n,r,i,o=this,s=e.erirId,u=e.containerid,c=e.ads,f=e.position,h=e.errorHandler,d=e.delay;a(this,t),l(this,"errorHandler",void 0),l(this,"position",void 0),l(this,"linker",void 0),l(this,"removerList",[]),l(this,"ads",void 0),l(this,"erir",void 0),l(this,"parentId",void 0),l(this,"parentEl",void 0),l(this,"isMobile",(i=(r||window.navigator.userAgent).toLowerCase(),/android|webos|iphone|ipad|ipod|blackberry|bb|playbook|iemobile|windows phone|kindle|silk|opera mini/i.test(i))),l(this,"completed",!1),this.erir="string"==typeof s&&s.length>0?s:void 0,"string"!=typeof u&&u?null!=u&&null!==(n=u.ownerDocument)&&void 0!==n&&n.defaultView&&u instanceof u.ownerDocument.defaultView.HTMLElement?this.parentEl=u:this.throwError(new Error("Missing element for marking")):(this.parentId=u,this.parentEl=this.parentId?document.querySelector(/^#.+/.test(this.parentId)?this.parentId:"#".concat(this.parentId)):window.document.body,this.parentEl||this.throwError(new Error("Element with id ".concat(u," not found")))),this.errorHandler=h,this.ads=c,this.position=f||{top:!0,left:!0},this.linker=new $t(this.parentEl),1!==this.parentEl.nodeType&&this.throwError(new Error("Invalid node type.")),d="number"==typeof d?d:0,setTimeout((function(){(o.parentEl===o.parentEl.ownerDocument.body||o.parentEl.ownerDocument.body.contains(o.parentEl))&&(o.addErir(),o.addAddIcon(),o.completed=!0)}),d)}return u(t,[{key:"addErir",value:function(){if(this.erir){var t=this.linker.isImg||this.linker.isIframe?this.parentEl.offsetWidth+"px":"100%",e=new Xt(t);e.insertontent("erid: "+this.erir);var n,r=this.makeErirIcon();if(this.isMobile)r.addEventListener("click",(function(){n=setTimeout(e.close.bind(e),1e4),e.open()})),e.getElement().addEventListener("click",(function(){n&&clearTimeout(n),n=setTimeout(e.close.bind(e),1e4)}));else r.addEventListener("mouseenter",e.open.bind(e)),e.getElement().addEventListener("mouseleave",e.close.bind(e));this.linker.append(r,{top:!0,right:!0}),this.linker.append(e.getElement(),{top:!0}),this.removerList.push(e.remove.bind(e)),this.removerList.push(r.remove.bind(r))}}},{key:"addAddIcon",value:function(){var t;if(this.ads){this.position.top&&this.position.right&&(this.position.right=!1),this.position.bottom||this.position.top||(this.position.top=!0),this.position.left||this.position.right||(this.position.left=!0);var e=this.makeAdIcon();this.removerList.push(e.remove.bind(e)),this.linker.append(e,this.position);var n=(null===(t=this.ads)||void 0===t?void 0:t.info)||"";if(n){var r,i=this.linker.isImg||this.linker.isIframe?this.parentEl.offsetWidth+"px":"100%",o=new Xt(i);if(o.insertontent(n),this.linker.append(o.getElement(),{top:this.position.top,bottom:this.position.bottom}),this.isMobile)e.addEventListener("click",(function(){r=setTimeout(o.close.bind(o),1e4),o.open()})),o.getElement().addEventListener("click",(function(){r&&clearTimeout(r),r=setTimeout(o.close.bind(o),1e4)}));else e.addEventListener("mouseenter",(function(){o.open.bind(o)()})),o.getElement().addEventListener("mouseleave",o.close.bind(o));this.removerList.push(o.remove.bind(o))}}}},{key:"remove",value:function(){this.removerList.forEach((function(t){return t()}))}},{key:"throwError",value:function(t){if("function"!=typeof this.errorHandler)throw t;this.errorHandler(t)}},{key:"makeErirIcon",value:function(){var t=Yt.erirIcon(),e=document.createElement("div");return e.style.height="11px",e.style.width="11px",e.style.backgroundColor="rgba(0, 120, 215, 1)",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.borderRadius="50%",e.style.marginTop="2px",e.style.marginRight="2px",e.style.cursor="pointer",e.style.zIndex="9999",e.append(t),e}},{key:"makeAdIcon",value:function(){var t=document.createElement("div");t.style.color="#000",t.style.cursor="pointer",t.style.zIndex="9999";var e=document.createElement("div");return e.style.fontFamily="arial, sans serif",e.style.display="inline - block",e.style.padding="1px 5px",e.style.border="1px solid #ccc",e.style.borderRadius="6px",e.style.background="#eee",e.style.margin="2px",e.style.margin="2px",e.style.fontSize="9px",e.innerHTML="",t.append(e),t}}]),t}(),Kt={"box-sizing":"border-box",height:"100%",display:"flex","flex-direction":"column-reverse"},te={display:"flex","align-items":"center","justify-content":"space-between",margin:"0 7px 7px"},ee={display:"flex"},ne={width:"100%"},re=function(){function t(e){a(this,t),l(this,"container",void 0),l(this,"firstRow",void 0),l(this,"secondRow",void 0),l(this,"progressBarRow",void 0),l(this,"config",void 0),this.container=document.createElement("div"),this.config=e,tt(this.container,Kt),this.progressBarRow=document.createElement("div"),tt(this.progressBarRow,ne),this.firstRow=this.createRow(),this.secondRow=this.createRow(),this.container.append(this.progressBarRow,this.firstRow.row,this.secondRow.row),this.initAdMarking()}return u(t,[{key:"insertInto",value:function(t){t.append(this.container)}},{key:"insertPlayPauseButton",value:function(t){var e=document.createElement("div");this.addMarginToRightButton(e),t.insertInto(e),this.firstRow.right.append(e)}},{key:"insertMuteUnmuteButton",value:function(t){var e=document.createElement("div");this.addMarginToRightButton(e),t.insertInto(e),this.firstRow.right.append(e)}},{key:"insertCloseButton",value:function(t){var e=document.createElement("div");this.addMarginToLeftButton(e),t.insertInto(e),this.firstRow.left.first.append(e)}},{key:"insertExpandCollapseButton",value:function(t){var e=document.createElement("div");this.addMarginToRightButton(e),t.insertInto(e),this.firstRow.right.append(e)}},{key:"insertSkipButton",value:function(t){var e=document.createElement("div");this.addMarginToRightButton(e),t.insertInto(e),this.secondRow.right.append(e)}},{key:"insertProgressBar",value:function(t){t.insertInto(this.progressBarRow)}},{key:"initAdMarking",value:function(){var t,e;this.config.adMarking&&new Jt({erirId:null===(t=this.config.adMarking)||void 0===t?void 0:t.erirId,containerid:this.container,ads:null===(e=this.config.adMarking)||void 0===e?void 0:e.ads,position:{top:!0,bottom:!1,left:!0,right:!1}})}},{key:"createLeft",value:function(){var t=document.createElement("div");tt(t,ee);var e=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div");return t.append(e,n,r),{leftRow:t,left:{first:e,second:n,third:r}}}},{key:"createRow",value:function(){var t=document.createElement("div");tt(t,te);var e=this.createLeft(),n=e.leftRow,r=e.left,i=document.createElement("div");return tt(i,ee),t.append(n,i),{row:t,right:i,left:r}}},{key:"addMarginToLeftButton",value:function(t){t.style.marginRight="8px"}},{key:"addMarginToRightButton",value:function(t){t.style.marginLeft="8px"}}]),t}(),ie=function(){function t(e,n,r){a(this,t),l(this,"controlsConfig",void 0),l(this,"decoratorsConfig",void 0),l(this,"markup",void 0),this.controlsConfig=e,this.decoratorsConfig=n,this.markup=new re(r)}return u(t,[{key:"createControls",value:function(t,e){if(this.controlsConfig[Rt.PlayPause].include){var n=t.createPlayPauseButton();e.bindPlayPauseButton(n),this.markup.insertPlayPauseButton(n)}if(this.controlsConfig[Rt.MuteUnmute].include){var r=t.createMuteUnmuteButton();e.bindMuteUnmuteButton(r),this.markup.insertMuteUnmuteButton(r)}if(this.controlsConfig[Rt.ExpandCollapse].include){var i=t.createExpandCollapseButton();e.bindExpandCollapseButton(i),this.markup.insertExpandCollapseButton(i)}if(this.controlsConfig[Rt.Close].include){var o=t.createCloseButton();e.bindCloseButton(o),this.markup.insertCloseButton(o)}if(this.controlsConfig[Rt.Skip].include){var a=t.createSkipButton();e.bindSkipButton(a),this.markup.insertSkipButton(a)}e.bindControlPanel(this.markup.container)}},{key:"createDecorators",value:function(t,e){if(this.decoratorsConfig[Ft.ProgressBar].include){var n=t.createProgressBar();e.bindProgressBar(n),this.markup.insertProgressBar(n)}}},{key:"insertInto",value:function(t){this.markup.insertInto(t)}}]),t}(),oe={position:"relative","background-color":"rgb(0, 0, 0)",width:"100%",height:"100%"},ae={position:"absolute","z-index":"1",width:"100%",height:"100%"},se={cursor:"pointer",position:"absolute","z-index":"2",width:"100%",height:"100%"},ue=function(){function t(){var e=this;a(this,t),l(this,"_videoSlot",void 0),l(this,"_slot",void 0),l(this,"_wrapper",void 0),this._wrapper=document.createElement("div"),tt(this._wrapper,oe),this._videoSlot=document.createElement("video"),tt(this._videoSlot,ae),this._videoSlot.muted=!0,this._videoSlot.volume=1,this._slot=document.createElement("div"),tt(this._slot,se),this._wrapper.append(this._videoSlot,this._slot),this._slot.addEventListener("click",(function(){return e._videoSlot.dispatchEvent(new Event("click"))}))}return u(t,[{key:"insertInto",value:function(t){t.append(this._wrapper)}},{key:"destroy",value:function(){this._wrapper.remove()}},{key:"slot",get:function(){return this._slot}},{key:"videoSlot",get:function(){return this._videoSlot}}]),t}(),le=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];t.call(e,i[1],i[0])}},e}()}(),ce="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,fe="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),he="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(fe):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var de=["top","right","bottom","left","width","height","size","weight"],pe="undefined"!=typeof MutationObserver,ve=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,r=!1,i=0;function o(){n&&(n=!1,t()),r&&s()}function a(){he(o)}function s(){var t=Date.now();if(n){if(t-i<2)return;r=!0}else n=!0,r=!1,setTimeout(a,e);i=t}return s}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){ce&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),pe?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){ce&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;de.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),me=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},ye=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||fe},be=Te(0,0,0,0);function ge(t){return parseFloat(t)||0}function we(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+ge(t["border-"+n+"-width"])}),0)}function ke(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return be;var r=ye(t).getComputedStyle(t),i=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=t["padding-"+i];e[i]=ge(o)}return e}(r),o=i.left+i.right,a=i.top+i.bottom,s=ge(r.width),u=ge(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==e&&(s-=we(r,"left","right")+o),Math.round(u+a)!==n&&(u-=we(r,"top","bottom")+a)),!function(t){return t===ye(t).document.documentElement}(t)){var l=Math.round(s+o)-e,c=Math.round(u+a)-n;1!==Math.abs(l)&&(s-=l),1!==Math.abs(c)&&(u-=c)}return Te(i.left,i.top,s,u)}var Se="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof ye(t).SVGGraphicsElement}:function(t){return t instanceof ye(t).SVGElement&&"function"==typeof t.getBBox};function Ee(t){return ce?Se(t)?function(t){var e=t.getBBox();return Te(0,0,e.width,e.height)}(t):ke(t):be}function Te(t,e,n,r){return{x:t,y:e,width:n,height:r}}var Pe=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Te(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=Ee(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),Ce=function(t,e){var n=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return me(a,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),a}(e);me(this,{target:t,contentRect:n})},Ae=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new le,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof ye(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new Pe(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof ye(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new Ce(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),xe="undefined"!=typeof WeakMap?new WeakMap:new le,Oe=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=ve.getInstance(),r=new Ae(e,n,this);xe.set(this,r)};["observe","unobserve","disconnect"].forEach((function(t){Oe.prototype[t]=function(){var e;return(e=xe.get(this))[t].apply(e,arguments)}}));var je,Ve,Le,Ie=void 0!==fe.ResizeObserver?fe.ResizeObserver:Oe,Me=function(){function t(e,n){a(this,t),l(this,"videoElement",void 0),l(this,"eventHandlers",void 0),l(this,"prevTime",void 0),l(this,"elapsedTime",void 0),this.videoElement=e,this.eventHandlers=[],this.prevTime=0,this.elapsedTime=n,this.handleTimeUpdate=this.handleTimeUpdate.bind(this),this.videoElement.addEventListener("timeupdate",this.handleTimeUpdate)}return u(t,[{key:"subscribe",value:function(t){this.eventHandlers.push(t)}},{key:"handleTimeUpdate",value:function(){var t=this.videoElement.currentTime,e=t-this.prevTime;this.prevTime=t,(e>1||e<0)&&(this.elapsedTime+=e),t>=this.elapsedTime&&(this.invokeHandlers(),this.videoElement.removeEventListener("timeupdate",this.handleTimeUpdate))}},{key:"invokeHandlers",value:function(){var t,e=E(this.eventHandlers);try{for(e.s();!(t=e.n()).done;){(0,t.value)()}}catch(t){e.e(t)}finally{e.f()}}}]),t}(),_e=function(){function t(e,n){a(this,t),l(this,"video",void 0),l(this,"timeTrackerInfo",void 0),this.video=e,this.timeTrackerInfo=n}return u(t,[{key:"bindWith",value:function(t){var e,n,r=this;this.bindQuartileEvents(t),this.bindResizeEvent(t),this.bindVolumeEvents(t),this.video.addEventListener("loadedmetadata",(function(){t.triggerEvent(Lt.Loaded)}));var i=!0;this.video.addEventListener("play",(function(){i?i=!1:t.triggerEvent(Lt.Resume)})),this.video.addEventListener("pause",(function(){t.triggerEvent(Lt.Pause)})),this.video.addEventListener("seeking",(function(){t.triggerEvent(Lt.Rewind)})),this.video.addEventListener("error",(function(){t.triggerEvent(Lt.Error)})),this.video.addEventListener("click",(function(){t.triggerEvent(Lt.Click)})),this.video.addEventListener("ended",(function(){t.triggerEvent(Lt.End)})),null===(e=this.timeTrackerInfo.timeTrackerSkip)||void 0===e||e.subscribe((function(){return t.triggerEvent(Lt.SkippableStateChange)})),null===(n=this.timeTrackerInfo.timeTrackerClose)||void 0===n||n.subscribe((function(){return t.triggerEvent(Lt.CloseableStateChange)})),t.subscribe(Lt.Start,(function(){r.video.addEventListener("timeupdate",(function(){return t.triggerEvent(Lt.Timeupdate)}))}))}},{key:"bindQuartileEvents",value:function(t){var e=this;this.video.addEventListener("loadedmetadata",(function(){[{eventName:Lt.Start,durationOfQuartile:0*e.video.duration},{eventName:Lt.FirstQuartile,durationOfQuartile:.25*e.video.duration},{eventName:Lt.Midpoint,durationOfQuartile:.5*e.video.duration},{eventName:Lt.ThirdQuartile,durationOfQuartile:.75*e.video.duration},{eventName:Lt.Complete,durationOfQuartile:1*e.video.duration}].forEach((function(n){new Me(e.video,n.durationOfQuartile).subscribe((function(){t.triggerEvent(n.eventName)}))}))}))}},{key:"bindResizeEvent",value:function(t){var e=this,n={w:0,h:0},r=!0,i=!1;t.subscribe(Lt.Start,(function(){n.w=e.video.clientWidth,n.h=e.video.clientHeight})),t.subscribe(Lt.Expand,(function(){i=!0})),t.subscribe(Lt.Collapse,(function(){i=!1}));var o=new Ie((function(e){var o=g(e,1)[0];if(r)r=!1;else{var a=Math.floor(window.innerWidth)===Math.floor(o.contentRect.width)&&Math.floor(window.innerHeight)===Math.floor(o.contentRect.height),s=Math.floor(o.contentRect.width)===Math.floor(n.w)&&Math.floor(o.contentRect.height)===Math.floor(n.h);i||a||s||(n.w=o.contentRect.width,n.h=o.contentRect.height,t.triggerEvent(Lt.SizeChange,{videoWidth:n.w,videoHeight:n.h}))}}));t.subscribe(Lt.Start,(function(){return o.observe(e.video)})),[Lt.End,Lt.Skip,Lt.Close,Lt.Error].forEach((function(n){t.subscribe(n,(function(){return o.unobserve(e.video)}))}))}},{key:"bindVolumeEvents",value:function(t){var e=this,n=this.video.muted||0===this.video.volume;this.video.addEventListener("volumechange",(function(){!e.video.muted&&0!==e.video.volume||n?0!==e.video.volume&&n?(n=!1,t.triggerEvent(Lt.Unmute)):t.triggerEvent(Lt.VolumeChange):(n=!0,t.triggerEvent(Lt.Mute))}))}}]),t}(),Re=function(){function t(e){a(this,t),l(this,"controlsBinderConfig",void 0),l(this,"controlElements",void 0),l(this,"timerId",void 0),l(this,"isTimerActive",void 0),this.controlsBinderConfig=e,this.controlElements=[],this.timerId=null,this.isTimerActive=!1}return u(t,[{key:"bindPlayPauseButton",value:function(t){var e=this;t.onClick((function(t){t===_t.Play?0===e.controlsBinderConfig.player.currentTime?e.controlsBinderConfig.player.start():e.controlsBinderConfig.player.resume():e.controlsBinderConfig.player.pause()})),this.controlsBinderConfig.player.subscribe(Lt.Start,(function(){return t.setState(_t.Pause)})),this.controlsBinderConfig.player.subscribe(Lt.Resume,(function(){return t.setState(_t.Pause)})),this.controlsBinderConfig.player.subscribe(Lt.Pause,(function(){return t.setState(_t.Play)})),t.persistent?t.show():(t.hide(),this.controlElements.push(t))}},{key:"bindMuteUnmuteButton",value:function(t){var e=this;t.hide(),t.onClick((function(t){t===_t.Mute?e.controlsBinderConfig.player.mute():e.controlsBinderConfig.player.unmute()})),this.controlsBinderConfig.player.subscribe(Lt.Mute,(function(){return t.setState(_t.Unmute)})),this.controlsBinderConfig.player.subscribe(Lt.Unmute,(function(){return t.setState(_t.Mute)})),t.persistent?t.show():(t.hide(),this.controlElements.push(t))}},{key:"bindExpandCollapseButton",value:function(t){var e=this;t.hide(),t.onClick((function(t){t===_t.Expand?e.controlsBinderConfig.player.expand():e.controlsBinderConfig.player.collapse()})),this.controlsBinderConfig.player.subscribe(Lt.Expand,(function(){return t.setState(_t.Collapse)})),this.controlsBinderConfig.player.subscribe(Lt.Collapse,(function(){return t.setState(_t.Expand)})),t.persistent?t.show():(t.hide(),this.controlElements.push(t))}},{key:"bindCloseButton",value:function(t){var e=this;t.onClick((function(){return e.controlsBinderConfig.player.close()})),this.controlsBinderConfig.player.subscribe(Lt.CloseableStateChange,(function(){return t.activate()})),t.persistent||this.controlElements.push(t)}},{key:"bindSkipButton",value:function(t){var e=this;t.onClick((function(){return e.controlsBinderConfig.player.skip()})),this.controlsBinderConfig.player.subscribe(Lt.SkippableStateChange,(function(){return t.activate()})),t.persistent||this.controlElements.push(t)}},{key:"showControlElements",value:function(){this.controlElements.forEach((function(t){return t.show()}))}},{key:"hideControlElements",value:function(){this.controlElements.forEach((function(t){return t.hide()}))}},{key:"handleTouchStart",value:function(){this.timerId&&clearTimeout(this.timerId),this.isTimerActive||this.showControlElements()}},{key:"handleTouchEnd",value:function(){var t=this;this.timerId=setTimeout((function(){t.hideControlElements(),t.isTimerActive=!1,t.timerId=null}),5e3),this.isTimerActive=!0}},{key:"bindControlPanel",value:function(t){this.controlElements.length&&(this.controlsBinderConfig.mobileMode?(t.addEventListener("touchstart",this.handleTouchStart.bind(this)),t.addEventListener("touchend",this.handleTouchEnd.bind(this))):(t.addEventListener("mouseenter",this.showControlElements.bind(this)),t.addEventListener("mouseleave",this.hideControlElements.bind(this))))}}]),t}(),Fe={fill:"rgb(255, 255, 255)",width:"30px",height:"30px"},De=function(){function t(e){a(this,t),l(this,"_icon",void 0),this._icon=e,tt(this._icon,Fe)}return u(t,[{key:"insertInto",value:function(t){t.append(this._icon)}},{key:"remove",value:function(){this._icon.remove()}}]),t}(),Be=(new DOMParser).parseFromString('\n  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"> \n    <path d="M361 215C375.3 223.8 384 239.3 384 256C384 272.7 375.3 288.2 361 296.1L73.03 472.1C58.21 482 39.66 482.4 24.52 473.9C9.377 465.4 0 449.4 0 432V80C0 62.64 9.377 46.63 24.52 38.13C39.66 29.64 58.21 29.99 73.03 39.04L361 215z" />\n  </svg>\n',"image/svg+xml").firstChild,Ue=(new DOMParser).parseFromString('\n  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">\n    <path d="M272 63.1l-32 0c-26.51 0-48 21.49-48 47.1v288c0 26.51 21.49 48 48 48L272 448c26.51 0 48-21.49 48-48v-288C320 85.49 298.5 63.1 272 63.1zM80 63.1l-32 0c-26.51 0-48 21.49-48 48v288C0 426.5 21.49 448 48 448l32 0c26.51 0 48-21.49 48-48v-288C128 85.49 106.5 63.1 80 63.1z" />\n  </svg>\n',"image/svg+xml").firstChild,ze=(new DOMParser).parseFromString('\n  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">\n    <path d="M412.6 182c-10.28-8.334-25.41-6.867-33.75 3.402c-8.406 10.24-6.906 25.35 3.375 33.74C393.5 228.4 400 241.8 400 255.1c0 14.17-6.5 27.59-17.81 36.83c-10.28 8.396-11.78 23.5-3.375 33.74c4.719 5.806 11.62 8.802 18.56 8.802c5.344 0 10.75-1.779 15.19-5.399C435.1 311.5 448 284.6 448 255.1S435.1 200.4 412.6 182zM473.1 108.2c-10.22-8.334-25.34-6.898-33.78 3.34c-8.406 10.24-6.906 25.35 3.344 33.74C476.6 172.1 496 213.3 496 255.1s-19.44 82.1-53.31 110.7c-10.25 8.396-11.75 23.5-3.344 33.74c4.75 5.775 11.62 8.771 18.56 8.771c5.375 0 10.75-1.779 15.22-5.431C518.2 366.9 544 313 544 255.1S518.2 145 473.1 108.2zM534.4 33.4c-10.22-8.334-25.34-6.867-33.78 3.34c-8.406 10.24-6.906 25.35 3.344 33.74C559.9 116.3 592 183.9 592 255.1s-32.09 139.7-88.06 185.5c-10.25 8.396-11.75 23.5-3.344 33.74C505.3 481 512.2 484 519.2 484c5.375 0 10.75-1.779 15.22-5.431C601.5 423.6 640 342.5 640 255.1S601.5 88.34 534.4 33.4zM301.2 34.98c-11.5-5.181-25.01-3.076-34.43 5.29L131.8 160.1H48c-26.51 0-48 21.48-48 47.96v95.92c0 26.48 21.49 47.96 48 47.96h83.84l134.9 119.8C272.7 477 280.3 479.8 288 479.8c4.438 0 8.959-.9314 13.16-2.835C312.7 471.8 320 460.4 320 447.9V64.12C320 51.55 312.7 40.13 301.2 34.98z" />\n  </svg>\n',"image/svg+xml").firstChild,We=(new DOMParser).parseFromString('\n  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">\n    <path d="M301.2 34.85c-11.5-5.188-25.02-3.122-34.44 5.253L131.8 160H48c-26.51 0-48 21.49-48 47.1v95.1c0 26.51 21.49 47.1 48 47.1h83.84l134.9 119.9c5.984 5.312 13.58 8.094 21.26 8.094c4.438 0 8.972-.9375 13.17-2.844c11.5-5.156 18.82-16.56 18.82-29.16V64C319.1 51.41 312.7 40 301.2 34.85zM513.9 255.1l47.03-47.03c9.375-9.375 9.375-24.56 0-33.94s-24.56-9.375-33.94 0L480 222.1L432.1 175c-9.375-9.375-24.56-9.375-33.94 0s-9.375 24.56 0 33.94l47.03 47.03l-47.03 47.03c-9.375 9.375-9.375 24.56 0 33.94c9.373 9.373 24.56 9.381 33.94 0L480 289.9l47.03 47.03c9.373 9.373 24.56 9.381 33.94 0c9.375-9.375 9.375-24.56 0-33.94L513.9 255.1z"/>\n  </svg>\n',"image/svg+xml").firstChild,He=(new DOMParser).parseFromString('\n  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\n    <path d="M128 32H32C14.31 32 0 46.31 0 64v96c0 17.69 14.31 32 32 32s32-14.31 32-32V96h64c17.69 0 32-14.31 32-32S145.7 32 128 32zM416 32h-96c-17.69 0-32 14.31-32 32s14.31 32 32 32h64v64c0 17.69 14.31 32 32 32s32-14.31 32-32V64C448 46.31 433.7 32 416 32zM128 416H64v-64c0-17.69-14.31-32-32-32s-32 14.31-32 32v96c0 17.69 14.31 32 32 32h96c17.69 0 32-14.31 32-32S145.7 416 128 416zM416 320c-17.69 0-32 14.31-32 32v64h-64c-17.69 0-32 14.31-32 32s14.31 32 32 32h96c17.69 0 32-14.31 32-32v-96C448 334.3 433.7 320 416 320z" />\n  </svg>\n',"image/svg+xml").firstChild,qe=(new DOMParser).parseFromString('\n  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\n    <path d="M128 320H32c-17.69 0-32 14.31-32 32s14.31 32 32 32h64v64c0 17.69 14.31 32 32 32s32-14.31 32-32v-96C160 334.3 145.7 320 128 320zM416 320h-96c-17.69 0-32 14.31-32 32v96c0 17.69 14.31 32 32 32s32-14.31 32-32v-64h64c17.69 0 32-14.31 32-32S433.7 320 416 320zM320 192h96c17.69 0 32-14.31 32-32s-14.31-32-32-32h-64V64c0-17.69-14.31-32-32-32s-32 14.31-32 32v96C288 177.7 302.3 192 320 192zM128 32C110.3 32 96 46.31 96 64v64H32C14.31 128 0 142.3 0 160s14.31 32 32 32h96c17.69 0 32-14.31 32-32V64C160 46.31 145.7 32 128 32z"/>\n  </svg>\n',"image/svg+xml").firstChild,Ne=(new DOMParser).parseFromString('\n  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">\n    <path d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/>\n  </svg>\n',"image/svg+xml").firstChild,Qe="35px",Ge="0.25s",Ze={"box-sizing":"border-box","box-shadow":"0px 0px 1px 1px rgba(40, 40, 40, 0.4)","transition-duration":Ge,width:Qe,height:Qe,"border-radius":"4px",display:"flex","justify-content":"center","align-items":"center","background-color":"rgba(40, 40, 40, 0.5)","backdrop-filter":"blur(5px)",cursor:"pointer",opacity:"1"},$e=function(){function t(e){var n=e.persistent,r=e.mobileMode;a(this,t),l(this,"persistent",void 0),l(this,"buttonEl",void 0),l(this,"mobileMode",void 0),l(this,"state",void 0),this.buttonEl=document.createElement("div"),this.persistent=n,this.mobileMode=r,tt(this.buttonEl,Ze),this.buttonEl.addEventListener("click",(function(t){return t.stopPropagation()})),this.addBaseAnimations()}return u(t,[{key:"onClick",value:function(t){var e=this;this.buttonEl.addEventListener("click",(function(){return t(e.state.name)}))}},{key:"insertInto",value:function(t){t.append(this.buttonEl)}},{key:"setOpacity",value:function(t){tt(this.buttonEl,{opacity:t})}},{key:"makeInvisible",value:function(){tt(this.buttonEl,{"pointer-events":"none"}),this.setOpacity(0)}},{key:"makeVisible",value:function(){tt(this.buttonEl,{"pointer-events":"auto"}),this.setOpacity(1)}},{key:"updateState",value:function(t){var e;null===(e=this.state)||void 0===e||e.icon.remove(),this.state=t,this.state.icon.insertInto(this.buttonEl)}},{key:"addBaseAnimations",value:function(){var t=this;this.mobileMode?(this.buttonEl.addEventListener("touchstart",(function(){t.buttonEl.style.backgroundColor="rgba(30, 30, 30, 0.5)",t.buttonEl.style.boxShadow="none"})),this.buttonEl.addEventListener("touchend",(function(){t.buttonEl.style.backgroundColor="rgba(60, 60, 60, 0.5)",t.buttonEl.style.boxShadow="0px 0px 1px 1px rgba(40, 40, 40, 0.4)"}))):(this.buttonEl.addEventListener("mouseover",(function(){t.buttonEl.style.backgroundColor="rgba(70, 70, 70, 0.5)"})),this.buttonEl.addEventListener("mouseout",(function(){t.buttonEl.style.backgroundColor="rgba(40, 40, 40, 0.5)"})),this.buttonEl.addEventListener("mousedown",(function(){t.buttonEl.style.backgroundColor="rgba(30, 30, 30, 0.5)",t.buttonEl.style.boxShadow="none"})),this.buttonEl.addEventListener("mouseup",(function(){t.buttonEl.style.backgroundColor="rgba(60, 60, 60, 0.5)",t.buttonEl.style.boxShadow="0px 0px 1px 1px rgba(40, 40, 40, 0.4)"})))}}]),t}(),Xe=function(t){c(n,t);var e=y(n);function n(t){var r,i=t.state1,o=t.state2,s=t.options;return a(this,n),l(m(r=e.call(this,s)),"states",void 0),r.states=Object.create(null),r.states[i.name]=i,r.states[o.name]=o,r.setState(i.name),r}return u(n,[{key:"setState",value:function(t){this.updateState(this.states[t])}},{key:"hide",value:function(){this.mobileMode?this.setOpacity(.3):this.makeInvisible()}},{key:"show",value:function(){this.makeVisible()}}]),n}($e),Ye=function(t){c(n,t);var e=y(n);function n(t){var r,i=t.state,o=t.options;return a(this,n),l(m(r=e.call(this,o)),"isActive",void 0),l(m(r),"activated",void 0),r.updateState(i),r.makeInvisible(),r.activated=!1,r.isActive=!1,r}return u(n,[{key:"activate",value:function(){var t=this;this.makeVisible(),setTimeout((function(){t.persistent||t.isActive||t.setOpacity(.3),t.activated=!0}),2e3)}},{key:"hide",value:function(){this.isActive=!1,this.activated&&this.setOpacity(.3)}},{key:"show",value:function(){this.isActive=!0,this.activated&&this.makeVisible()}}]),n}($e),Je=(new DOMParser).parseFromString('\n<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 320 512" fill="#fff">\n    <path d="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/>\n</svg>\n',"image/svg+xml").firstChild,Ke={"justify-content":"flex-start","align-items":"center",display:"flex","padding-left":"2px"},tn={"justify-content":"flex-start","align-items":"center",display:"flex",width:"0px",height:Qe,overflow:"hidden",cursor:"pointer","transition-duration":Ge,color:"rgb(255, 255, 255)","user-select":"none","font-family":"Arial"},en=function(t){c(n,t);var e=y(n);function n(t){var r,i=t.options;return a(this,n),l(m(r=e.call(this,{state:{name:_t.Skip,icon:new De(Je)},options:i})),"label",void 0),l(m(r),"isHovered",void 0),tt(r.buttonEl,Ke),r.label=document.createElement("div"),tt(r.label,tn),r.label.innerText="",r.buttonEl.prepend(r.label),r.mobileMode||r.addAnimations(),r.isHovered=!1,r}return u(n,[{key:"activate",value:function(){var t=this;b(f(n.prototype),"activate",this).call(this),setTimeout((function(){return t.showLabel()}),500),this.mobileMode||setTimeout((function(){t.isHovered||t.hideLabel()}),1500)}},{key:"addAnimations",value:function(){var t=this;this.buttonEl.addEventListener("mouseover",(function(){t.isHovered=!0,t.showLabel()})),this.buttonEl.addEventListener("mouseout",(function(){t.isHovered=!1,t.hideLabel()}))}},{key:"showLabel",value:function(){this.resizeButtonAndLabel("100px","125px","12px")}},{key:"hideLabel",value:function(){this.resizeButtonAndLabel("0",Qe,"2px")}},{key:"resizeButtonAndLabel",value:function(t,e,n){tt(this.label,{width:t}),tt(this.buttonEl,{width:e,"padding-left":n})}}]),n}(Ye),nn=function(){function t(e){a(this,t),l(this,"playerControlsBuilderConfig",void 0),this.playerControlsBuilderConfig=e}return u(t,[{key:"createPlayPauseButton",value:function(){return new Xe({state1:{name:_t.Play,icon:new De(Be)},state2:{name:_t.Pause,icon:new De(Ue)},options:{persistent:this.playerControlsBuilderConfig.controls[Rt.PlayPause].persistent,mobileMode:this.playerControlsBuilderConfig.mobileMode}})}},{key:"createMuteUnmuteButton",value:function(){return new Xe({state1:{name:_t.Unmute,icon:new De(We)},state2:{name:_t.Mute,icon:new De(ze)},options:{persistent:this.playerControlsBuilderConfig.controls[Rt.MuteUnmute].persistent,mobileMode:this.playerControlsBuilderConfig.mobileMode}})}},{key:"createExpandCollapseButton",value:function(){return new Xe({state1:{name:_t.Expand,icon:new De(He)},state2:{name:_t.Collapse,icon:new De(qe)},options:{persistent:this.playerControlsBuilderConfig.controls[Rt.ExpandCollapse].persistent,mobileMode:this.playerControlsBuilderConfig.mobileMode}})}},{key:"createCloseButton",value:function(){return new Ye({state:{name:_t.Close,icon:new De(Ne)},options:{persistent:this.playerControlsBuilderConfig.controls[Rt.Close].persistent,mobileMode:this.playerControlsBuilderConfig.mobileMode}})}},{key:"createSkipButton",value:function(){return new en({options:{persistent:this.playerControlsBuilderConfig.controls[Rt.Skip].persistent,mobileMode:this.playerControlsBuilderConfig.mobileMode}})}}]),t}(),rn=function(){function t(e,n){a(this,t),l(this,"playerInformant",void 0),l(this,"playerVideoElement",void 0),l(this,"progressBar",void 0),l(this,"rafId",void 0),this.playerInformant=e,this.playerVideoElement=n,this.progressBar=null,this.rafId=null}return u(t,[{key:"bindProgressBar",value:function(t){var e=this;this.progressBar=t;var n=[Lt.Start,Lt.Resume],r=[Lt.Pause,Lt.End,Lt.Close,Lt.Skip,Lt.Error,Lt.SkippableStateChange],i=this.updateProgressBar.bind(this),o=this.stopProgressBar.bind(this);this.playerInformant.subscribe(Lt.SkippableStateChange,(function(){n.forEach((function(t){return e.playerInformant.unsubscribe(t,i)})),r.forEach((function(t){return e.playerInformant.unsubscribe(t,o)}))})),n.forEach((function(t){return e.playerInformant.subscribe(t,i)})),r.forEach((function(t){return e.playerInformant.subscribe(t,o)}))}},{key:"stopProgressBar",value:function(){this.rafId&&cancelAnimationFrame(this.rafId),this.rafId=null}},{key:"updateProgressBar",value:function(){this.progressBar.setCurrentTime(this.playerVideoElement.currentTime),this.rafId=requestAnimationFrame(this.updateProgressBar.bind(this))}}]),t}(),on={position:"absolute",bottom:"0px",width:"100%",height:"3px","background-color":"rgba(245, 245, 245, 0.7)"},an={height:"100%",width:"100%","background-color":"rgba(80, 80, 80, 0.5)","transform-origin":"left center",transform:"scaleX(0)"},sn=function(){function t(e){a(this,t),l(this,"progressBarElement",void 0),l(this,"progressBarContainer",void 0),l(this,"duration",void 0),this.duration=e,this.progressBarContainer=document.createElement("div"),tt(this.progressBarContainer,on),this.progressBarElement=document.createElement("div"),tt(this.progressBarElement,an),this.progressBarContainer.append(this.progressBarElement)}return u(t,[{key:"insertInto",value:function(t){t.append(this.progressBarContainer)}},{key:"setCurrentTime",value:function(t){var e=Math.min(t/this.duration,1);this.progressBarElement.style.transform="scaleX(".concat(e,")")}}]),t}(),un=function(){function t(e){a(this,t),l(this,"decoratorsConfigs",void 0),this.decoratorsConfigs=e}return u(t,[{key:"createProgressBar",value:function(){return new sn(this.decoratorsConfigs["progress-bar"].duration)}}]),t}(),ln=function(){function t(e,n){a(this,t),l(this,"slot",void 0),l(this,"videoSlot",void 0),l(this,"isFsMode",void 0),this.slot=e,this.videoSlot=n,this.isFsMode=!1}return u(t,[{key:"bindWith",value:function(t){var e=this,n=function(){var t=at();return t===$.Unknown?null:t===$.DisabledWebkit?ot[$.Webkit].fullscreenChangeEvent:ot[t].fullscreenChangeEvent}();n&&document.addEventListener(n,(function(n){n.target!==e.slot&&n.target!==e.videoSlot||(e.isFsMode?t.triggerEvent(Lt.Collapse):t.triggerEvent(Lt.Expand),e.isFsMode=!e.isFsMode)}))}}]),t}(),cn=function(){function t(e,n){var r=this;if(a(this,t),l(this,"_skippableState",void 0),l(this,"_closeableState",void 0),l(this,"videoSlot",void 0),l(this,"slot",void 0),l(this,"durationTime",void 0),l(this,"mobileMode",void 0),l(this,"controls",void 0),l(this,"ec",void 0),l(this,"markup",void 0),l(this,"pc",void 0),l(this,"videoSources",void 0),l(this,"timeTrackerSkip",void 0),l(this,"timeTrackerClose",void 0),l(this,"volumeAvailability",void 0),l(this,"skipOffset",void 0),this.slot=e,this.ec=new ht,this.markup=new ue,this.pc=new ie(n.controls,n.decorators,{adMarking:n.adMarking}),this.videoSources=new Zt(n.vastMediaFiles),this.volumeAvailability=new bt,this.videoSources.filter(),this.videoSources.sort(this.slot.clientWidth,this.slot.clientHeight),this.mobileMode=n.mobileMode,this.controls=n.controls,this.durationTime=n.duration,this.videoSlot=this.markup.videoSlot,this.skipOffset=null===n.skipOffset||n.skipOffset>=3?n.skipOffset:3,this.timeTrackerSkip=null,this.timeTrackerClose=null,this._skippableState=!1,this._closeableState=!1,null!==this.skipOffset&&(this.timeTrackerSkip=new Me(this.videoSlot,this.skipOffset),this.timeTrackerSkip.subscribe((function(){return r._skippableState=!0})),null!==n.closeOffset)){var i=this.skipOffset>n.closeOffset?this.skipOffset:n.closeOffset;this.timeTrackerClose=new Me(this.videoSlot,i),this.timeTrackerClose.subscribe((function(){return r._closeableState=!0}))}var o={timeTrackerSkip:this.timeTrackerSkip,timeTrackerClose:this.timeTrackerClose,duration:this.durationTime};new _e(this.markup.videoSlot,o).bindWith(this.ec),new ln(this.slot,this.videoSlot).bindWith(this.ec),n.clickThrough&&this.subscribe(Lt.Click,(function(){return window.open(n.clickThrough,"_blank")}))}var e,r,i,s;return u(t,[{key:"contentSize",get:function(){return{width:this.slot.clientWidth,height:this.slot.clientHeight}}},{key:"skippableState",get:function(){return this._skippableState}},{key:"closeableState",get:function(){return this._closeableState}},{key:"expanded",get:function(){return st(this.slot,this.slot.ownerDocument)||st(this.videoSlot,this.videoSlot.ownerDocument)}},{key:"muted",get:function(){return this.videoSlot.muted||0===this.videoSlot.volume}},{key:"currentTime",get:function(){return this.videoSlot.currentTime}},{key:"duration",get:function(){return this.videoSlot.duration}},{key:"volume",get:function(){return this.videoSlot.volume},set:function(t){var e=this;this.getVolumeAvailabilityState().then((function(n){n&&(e.videoSlot.volume=t>1?1:t<0?0:t)}))}},{key:"getVolumeAvailabilityState",value:function(){return this.volumeAvailability.check()}},{key:"subscribe",value:function(t,e){this.ec.subscribe(t,e)}},{key:"unsubscribe",value:function(t,e){this.ec.unsubscribe(t,e)}},{key:"mute",value:function(){this.muted||(this.videoSlot.muted=!0)}},{key:"unmute",value:function(){var t=this;this.getVolumeAvailabilityState().then((function(e){e&&(t.videoSlot.muted&&(t.videoSlot.muted=!1),0===t.videoSlot.volume&&(t.videoSlot.volume=.1))}))}},{key:"expand",value:(s=o(n().mark((function t(){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.expanded){t.next=2;break}return t.abrupt("return");case 2:return e=null,t.next=5,lt(this.slot);case 5:if(e=t.sent){t.next=10;break}return t.next=9,lt(this.videoSlot);case 9:e=t.sent;case 10:if(e){t.next=12;break}throw new Error("Failed to enable fullscreen mode");case 12:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"collapse",value:(i=o(n().mark((function t(){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.expanded){t.next=2;break}return t.abrupt("return");case 2:if(e=null,!st(this.slot,this.slot.ownerDocument)){t.next=9;break}return t.next=6,ct(this.slot,this.slot.ownerDocument);case 6:e=t.sent,t.next=12;break;case 9:return t.next=11,ct(this.videoSlot,this.videoSlot.ownerDocument);case 11:e=t.sent;case 12:if(e){t.next=14;break}throw new Error("Failed to turn off fullscreen mode");case 14:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"resume",value:function(){this.videoSlot.paused&&!this.videoSlot.ended&&this.videoSlot.play()}},{key:"pause",value:function(){this.videoSlot.paused||this.videoSlot.pause()}},{key:"close",value:function(){this.closeableState&&(this.ec.triggerEvent(Lt.Close),this.destroy())}},{key:"skip",value:function(){this.skippableState&&this.ec.triggerEvent(Lt.Skip)}},{key:"start",value:function(){var t=this;return new Promise((function(e,n){t.ec.triggerEvent(Lt.Impression);var r=function(){clearTimeout(a),t.videoSlot.removeEventListener("timeupdate",o),t.videoSlot.removeEventListener("error",i)},i=function(){r(),n(new Error("Player play timeout"))},o=function(){r(),e()},a=setTimeout((function(){t.ec.triggerEvent(Lt.Error),i()}),8e3);t.videoSlot.addEventListener("error",i),t.videoSlot.addEventListener("timeupdate",o),t.videoSlot.play()}))}},{key:"resize",value:function(t){var e=t.height,n=t.width;null!==e&&tt(this.slot,{height:W(e)}),null!==n&&tt(this.slot,{width:W(n)})}},{key:"load",value:(r=o(n().mark((function t(){var e=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.videoSources.hasValidSources()){t.next=2;break}throw new Error("There are no resources to download.");case 2:return t.abrupt("return",new Promise((function(t,n){var r,i=function(){clearTimeout(s),e.videoSlot.removeEventListener("loadeddata",a),e.videoSlot.removeEventListener("error",o)},o=function(){i(),n(new Error("Error during download."))},a=function(){i(),t()},s=setTimeout(o,1e4);e.videoSlot.addEventListener("loadeddata",a),e.videoSlot.addEventListener("error",o),(r=e.videoSlot).append.apply(r,w(e.videoSources.getSources())),e.videoSlot.load()})));case 3:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"render",value:(e=o(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.pc.createControls(new nn({controls:this.controls,mobileMode:this.mobileMode}),new Re({player:this,mobileMode:this.mobileMode})),this.pc.createDecorators(new un(l({},"progress-bar",{duration:null===this.skipOffset?this.durationTime:this.skipOffset})),new rn(this.ec,this.videoSlot)),this.pc.insertInto(this.markup.slot),this.markup.insertInto(this.slot);case 4:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"destroy",value:function(){this.ec.clear(),this.pause(),this.markup.destroy()}}]),t}(),fn=function(){function t(e,n){a(this,t),l(this,"closeOffset",void 0),l(this,"slot",void 0),l(this,"controls",void 0),l(this,"decorators",void 0),l(this,"timeTracker",void 0),l(this,"mobileMode",void 0),this.slot=e,this.controls=n.controls,this.decorators=n.decorators,this.timeTracker=n.timeTracker,this.mobileMode=B(),this.closeOffset=n.closeOffset}return u(t,[{key:"validate",value:function(t){var e=this;return V(t)&&"string"==typeof t.duration&&/^\d+(\.\d+)?:\d+(\.\d+)?:\d+(\.\d+)?$/.test(t.duration.trim())&&V(t.mediaFiles)&&Array.isArray(t.mediaFiles.mediaFile)&&t.mediaFiles.mediaFile.some((function(t){return e.validateMediaFile(t)}))}},{key:"validateMediaFile",value:function(t){return V(t)&&"string"==typeof t.type&&/^video\//.test(t.type)&&"string"==typeof t.uri&&!_(t.uri)}},{key:"calculateCloseOffset",value:function(t,e){var n=this.closeOffset-this.timeTracker.getPlaybackTime();return n>=e?null:Math.max(t,n)}},{key:"getAdMarkingConfig",value:function(t){if(t){var e,n=E(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;if("string"==typeof r.adMarking&&!_(r.adMarking))try{return JSON.parse(r.adMarking)}catch(t){continue}}}catch(t){n.e(t)}finally{n.f()}}return null}},{key:"createVendor",value:function(t){var e,n=this,r=N(t.duration);-1===this.closeOffset&&(this.closeOffset=r);var i=N(t.skipoffset),o=null===i||null===this.closeOffset?null:this.calculateCloseOffset(i,r);return new cn(this.slot,{clickThrough:(null==t||null===(e=t.videoClicks)||void 0===e||null===(e=e.clickThrough)||void 0===e?void 0:e.uri)||null,controls:this.controls,decorators:this.decorators,mobileMode:this.mobileMode,duration:r,skipOffset:i,closeOffset:o,adMarking:this.getAdMarkingConfig(t.extensions),vastMediaFiles:t.mediaFiles.mediaFile.filter((function(t){return n.validateMediaFile(t)}))})}}]),t}(),hn=function(t){if(!V(t))return!1;return["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"].every((function(e){return"function"==typeof(null==t?void 0:t[e])}))};!function(t){t.Normal="normal",t.Thumbnail="thumbnail",t.Fullscreen="fullscreen"}(Ve||(Ve={})),function(t){t.AdLoaded="AdLoaded",t.AdStarted="AdStarted",t.AdStopped="AdStopped",t.AdSkipped="AdSkipped",t.AdSkippableStateChange="AdSkippableStateChange",t.AdSizeChange="AdSizeChange",t.AdLinearChange="AdLinearChange",t.AdDurationChange="AdDurationChange",t.AdExpandedChange="AdExpandedChange",t.AdVolumeChange="AdVolumeChange",t.AdImpression="AdImpression",t.AdVideoStart="AdVideoStart",t.AdVideoFirstQuartile="AdVideoFirstQuartile",t.AdVideoMidpoint="AdVideoMidpoint",t.AdVideoThirdQuartile="AdVideoThirdQuartile",t.AdVideoComplete="AdVideoComplete",t.AdClickThru="AdClickThru",t.AdInteraction="AdInteraction",t.AdUserAcceptInvitation="AdUserAcceptInvitation",t.AdUserMinimize="AdUserMinimize",t.AdUserClose="AdUserClose",t.AdPaused="AdPaused",t.AdPlaying="AdPlaying",t.AdLog="AdLog",t.AdError="AdError",t.AdRemainingTimeChange="AdRemainingTimeChange"}(Le||(Le={}));var dn=(l(je={},Le.AdImpression,Lt.Impression),l(je,Le.AdLoaded,Lt.Loaded),l(je,Le.AdStarted,Lt.Start),l(je,Le.AdVideoFirstQuartile,Lt.FirstQuartile),l(je,Le.AdVideoMidpoint,Lt.Midpoint),l(je,Le.AdVideoThirdQuartile,Lt.ThirdQuartile),l(je,Le.AdVideoComplete,Lt.Complete),l(je,Le.AdSkipped,Lt.Skip),l(je,Le.AdExpandedChange,Lt.Expand),l(je,Le.AdUserMinimize,Lt.Collapse),l(je,Le.AdRemainingTimeChange,Lt.Timeupdate),l(je,Le.AdUserClose,Lt.Close),l(je,Le.AdPaused,Lt.Pause),l(je,Le.AdPlaying,Lt.Resume),l(je,Le.AdClickThru,Lt.Click),l(je,Le.AdSizeChange,Lt.SizeChange),l(je,Le.AdError,Lt.Error),l(je,Le.AdSkippableStateChange,Lt.SkippableStateChange),l(je,Le.AdVolumeChange,Lt.VolumeChange),l(je,Le.AdStopped,Lt.End),l(je,Le.AdInteraction,Lt.OtherInteraction),l(je,Le.AdLinearChange,null),l(je,Le.AdDurationChange,null),l(je,Le.AdVideoStart,null),l(je,Le.AdUserAcceptInvitation,null),l(je,Le.AdLog,null),je),pn=function(){function t(e){a(this,t),l(this,"lastVolume",void 0),l(this,"vpaidAdUnit",void 0),this.lastVolume=e.getAdVolume(),this.vpaidAdUnit=e}return u(t,[{key:"bindWith",value:function(t){for(var e=this,n=function(){var n=i[r],o=dn[n];if(!o&&n!==Le.AdLog)return 1;n===Le.AdVolumeChange?e.vpaidAdUnit.subscribe((function(){var n=e.vpaidAdUnit.getAdVolume();0===n&&e.lastVolume>0?t.triggerEvent(Lt.Mute):n>0&&0===e.lastVolume?t.triggerEvent(Lt.Unmute):t.triggerEvent(dn[Le.AdVolumeChange]),e.lastVolume=n}),n):n===Le.AdLog?e.vpaidAdUnit.subscribe((function(){var t;return(t=console).log.apply(t,arguments)}),n):e.vpaidAdUnit.subscribe((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.triggerEvent.apply(t,[o].concat(n))}),n)},r=0,i=Object.values(Le);r<i.length;r++)n()}}]),t}(),vn=function(){function t(e,n){a(this,t),l(this,"config",void 0),l(this,"informant",void 0),l(this,"slot",void 0),l(this,"vpaidMarkup",void 0),l(this,"va",void 0),l(this,"adUnit",void 0),this.slot=e,this.config=n,this.informant=new ht,this.vpaidMarkup=new ue,this.va=new bt,this.subscribe(Lt.Click,(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i=e[0];e[2]&&(i?window.open(i,"_blank"):n.clickThrough&&window.open(n.clickThrough,"_blank"))}))}var e,r;return u(t,[{key:"contentSize",get:function(){var t=this.getAdUnit();return{width:t.getAdWidth(),height:t.getAdHeight()}}},{key:"closeableState",get:function(){return!1}},{key:"skippableState",get:function(){return this.getAdUnit().getAdSkippableState()}},{key:"expanded",get:function(){return this.getAdUnit().getAdExpanded()}},{key:"muted",get:function(){return 0===this.getAdUnit().getAdVolume()}},{key:"currentTime",get:function(){var t=this.getAdUnit(),e=t.getAdDuration(),n=t.getAdRemainingTime();return e<0||n<0?0:e-n}},{key:"duration",get:function(){return this.getAdUnit().getAdDuration()}},{key:"volume",get:function(){return this.getAdUnit().getAdVolume()},set:function(t){this.getAdUnit().setAdVolume(t)}},{key:"getVolumeAvailabilityState",value:function(){return this.va.check()}},{key:"subscribe",value:function(t,e){this.informant.subscribe(t,e)}},{key:"unsubscribe",value:function(t,e){this.informant.unsubscribe(t,e)}},{key:"mute",value:function(){this.getAdUnit().setAdVolume(0)}},{key:"unmute",value:function(){this.getAdUnit().setAdVolume(1)}},{key:"expand",value:function(){this.getAdUnit().expandAd()}},{key:"collapse",value:function(){this.getAdUnit().collapseAd()}},{key:"resume",value:function(){this.getAdUnit().resumeAd()}},{key:"pause",value:function(){this.getAdUnit().pauseAd()}},{key:"start",value:function(){var t=this;return new Promise((function(e,n){var r=t.getAdUnit(),i=r.getAdRemainingTime();if(-1===i||-2===i)return r.startAd(),e();var o=function(){t.informant.unsubscribe(Lt.Error,a),clearTimeout(u),s.stop()},a=function(){o(),n(new Error("Player play timeout."))};t.informant.subscribe(Lt.Error,a),r.startAd();var s=new ut((function(){i<r.getAdRemainingTime()&&(o(),e())}),100),u=setTimeout((function(){a(),t.informant.triggerEvent(Lt.Error)}),8e3);s.start()}))}},{key:"skip",value:function(){if(!this.skippableState)throw new Error("VpaidPlayer: ad is not skippable");this.getAdUnit().skipAd()}},{key:"close",value:function(){}},{key:"destroy",value:function(){this.informant.clear(),this.getAdUnit().stopAd(),this.vpaidMarkup.destroy()}},{key:"resize",value:function(t){var e=t.width,n=t.height;e&&n&&this.getAdUnit().resizeAd(e,n,Ve.Normal)}},{key:"load",value:(r=o(n().mark((function t(){var e,r,i,o,a,s=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.config,r=e.vpaidUrl,i=e.AdParameters,o=e.bitrate,t.next=3,new yt(r).load();case 3:if("function"==typeof window.getVPAIDAd){t.next=5;break}throw new Error("VpaidPlayer: getVPAIDAd is not a function.");case 5:if(this.adUnit=window.getVPAIDAd(),hn(this.adUnit)){t.next=8;break}throw new Error("VpaidPlayer: specification does not comply with the standard.");case 8:return this.adUnit.handshakeVersion("2"),new pn(this.adUnit).bindWith(this.informant),a=new Promise((function(t,e){s.subscribe(Lt.Loaded,t),s.subscribe(Lt.Error,(function(){return e(new Error("VpaidPlayer: error during VPAID initialization."))}))})),this.adUnit.initAd(Math.ceil(this.slot.offsetWidth),Math.ceil(this.slot.offsetHeight),Ve.Normal,o||-1,{AdParameters:i},{slot:this.vpaidMarkup.slot,videoSlot:this.vpaidMarkup.videoSlot,videoSlotCanAutoPlay:!1}),t.abrupt("return",a);case 13:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"render",value:(e=o(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.vpaidMarkup.insertInto(this.slot));case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"getAdUnit",value:function(){if(!this.adUnit)throw new Error("VpaidPlayer: adUnit is not loaded.");return this.adUnit}}]),t}(),mn=function(){function t(e){a(this,t),l(this,"slot",void 0),this.slot=e}return u(t,[{key:"validate",value:function(t){var e=this;return V(t)&&V(t.mediaFiles)&&Array.isArray(t.mediaFiles.mediaFile)&&t.mediaFiles.mediaFile.some((function(t){return e.validateMediaFile(t)}))}},{key:"createVendor",value:function(t){var e,n=this.getValidMediaFile(t.mediaFiles.mediaFile);return new vn(this.slot,{clickThrough:(null===(e=t.videoClicks)||void 0===e||null===(e=e.clickThrough)||void 0===e?void 0:e.uri)||null,AdParameters:t.adParameters.metadata,vpaidUrl:n.uri,bitrate:n.bitrate})}},{key:"validateMediaFile",value:function(t){return V(t)&&"VPAID"===t.apiFramework&&"string"==typeof t.uri&&!_(t.uri)}},{key:"getValidMediaFile",value:function(t){var e,n,r=E(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(this.validateMediaFile(i)){e=i;break}}}catch(t){r.e(t)}finally{r.f()}return e}}]),t}(),yn=function(){function t(e){a(this,t),l(this,"slot",void 0),this.slot=e}return u(t,[{key:"startByVisibility",value:function(t){var e=this;return new Promise((function(n,r){var i=new pt((function(e){g(e,1)[0].intersectionRatio>=.5&&(t.start().then(n).catch(r),i.disconnect())}),Ht);i.observe(e.slot)}))}}]),t}(),bn=function(){function t(e){a(this,t),l(this,"slot",void 0),l(this,"observer",void 0),l(this,"adVendor",void 0),l(this,"intoView",void 0),l(this,"isPlaying",void 0),this.slot=e,this.observer=new pt(this.checkingVisibility.bind(this),Ht),this.adVendor=null,this.intoView=null,this.isPlaying=null,this.startObserving=this.startObserving.bind(this),this.stopObserving=this.stopObserving.bind(this),this.resumeHandler=this.resumeHandler.bind(this),this.pauseHandler=this.pauseHandler.bind(this)}return u(t,[{key:"setup",value:function(t){this.stopObserving(),this.intoView=!0,this.isPlaying=!0,this.adVendor&&this.removeListeners(),this.adVendor=t,this.addListeners()}},{key:"checkingVisibility",value:function(t){var e=g(t,1)[0];this.intoView&&e.intersectionRatio<.5?(this.intoView=!1,this.isPlaying&&this.adVendor.pause()):!this.intoView&&e.intersectionRatio>=.5&&(this.intoView=!0,this.isPlaying||this.adVendor.resume())}},{key:"startObserving",value:function(){this.observer.observe(this.slot)}},{key:"stopObserving",value:function(){this.observer.isObserved(this.slot)&&this.observer.disconnect()}},{key:"resumeHandler",value:function(){this.intoView||(this.intoView=!0),this.isPlaying=!0}},{key:"pauseHandler",value:function(){this.isPlaying=!1}},{key:"addListeners",value:function(){var t=this;this.adVendor.subscribe(Lt.Start,this.startObserving),[Lt.End,Lt.Close,Lt.Skip,Lt.Error].forEach((function(e){return t.adVendor.subscribe(e,t.stopObserving)})),this.adVendor.subscribe(Lt.Resume,this.resumeHandler),this.adVendor.subscribe(Lt.Pause,this.pauseHandler)}},{key:"removeListeners",value:function(){var t=this;this.adVendor.unsubscribe(Lt.Start,this.startObserving),[Lt.End,Lt.Close,Lt.Skip,Lt.Error].forEach((function(e){return t.adVendor.unsubscribe(e,t.stopObserving)})),this.adVendor.unsubscribe(Lt.Resume,this.resumeHandler),this.adVendor.unsubscribe(Lt.Pause,this.pauseHandler)}}]),t}(),gn=function(){function t(e,n,r){a(this,t),l(this,"slot",void 0),l(this,"finallyCbList",void 0),l(this,"impTotal",void 0),l(this,"extensions",void 0),l(this,"loader",void 0),l(this,"sources",void 0),l(this,"vendorloaders",void 0),l(this,"autoPlay",void 0),l(this,"closeOffset",void 0),l(this,"playbackTimeRecorder",void 0),l(this,"externalEventBinder",void 0),l(this,"launcher",void 0),l(this,"impCount",void 0),l(this,"hasLoadedAd",void 0),l(this,"currentSource",void 0),l(this,"currentSourceImpCounter",void 0),l(this,"loadProcess",void 0),l(this,"adVendor",void 0),l(this,"unmute",void 0),l(this,"loaderStartTime",void 0),l(this,"isLoaderRunning",void 0),this.slot=e,this.finallyCbList=[],this.impTotal=0===n.total?1/0:n.total,this.autoPlay=n.autoPlay,this.unmute=Boolean(n.unmute),this.impCount=0,this.hasLoadedAd=!1,this.currentSource=null,this.currentSourceImpCounter=0,this.loadProcess=null,this.adVendor=null,this.loaderStartTime=null,this.isLoaderRunning=!1,this.externalEventBinder=new Nt(r),this.loader=new Ct,this.playbackTimeRecorder=new qt,this.sources=new At(w(n.sources)),this.launcher=new yn(this.slot),this.sources.filter(),this.sources.sort(),0===n.closeOffset?this.closeOffset=null:n.closeOffset>0&&n.closeOffset<3||n.closeOffset<-1?this.closeOffset=3:this.closeOffset=n.closeOffset,this.extensions=[new bn(this.slot)],this.vendorloaders=[new fn(this.slot,{controls:n.controls,decorators:n.decorators,timeTracker:this.playbackTimeRecorder,closeOffset:this.closeOffset}),new mn(this.slot)]}var r,i,s,c,f,h,d;return u(t,[{key:"installExtensions",value:function(t,e){this.extensions.forEach((function(n){return n.setup(t,e)}))}},{key:"selectVendor",value:function(t){var e,n=E(this.vendorloaders);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.validate(t))return r.createVendor(t)}}catch(t){n.e(t)}finally{n.f()}return null}},{key:"hideLoader",value:function(){this.isLoaderRunning&&(this.loader.remove(),this.loaderStartTime=null,this.isLoaderRunning=!1)}},{key:"showLoader",value:function(){this.isLoaderRunning||(this.isLoaderRunning=!0,this.loader.insertInto(this.slot),this.loaderStartTime=(new Date).getTime())}},{key:"startByVisibility",value:(d=o(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.autoPlay||this.impCount>0)){t.next=2;break}return t.abrupt("return",this.launcher.startByVisibility(this.adVendor));case 2:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"selectSource",value:(h=o(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.currentSource){t.next=7;break}if(!this.sources.hasSources()){t.next=6;break}this.currentSource=this.sources.getSource(),this.currentSourceImpCounter=0,t.next=7;break;case 6:return t.abrupt("return",Promise.reject());case 7:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"checkSourceImp",value:(f=o(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.currentSourceImpCounter>=this.currentSource.total)){t.next=2;break}return t.abrupt("return",Promise.reject());case 2:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"loadVast",value:(c=o(n().mark((function t(){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Ut(this.currentSource.source).load();case 2:return e=t.sent,t.abrupt("return",e.nextAd());case 4:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"parseVast",value:function(t){var e=t.creatives.filter((function(t){return"linear"===t.type}));return e.length?{"linearreatives":e,vastData:t}:Promise.reject()}},{key:"loadVendor",value:(s=o(n().mark((function t(r,i){var o,a,s,u;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=E(r),t.prev=1,a.s();case 3:if((s=a.n()).done){t.next=26;break}if(u=s.value,o=this.selectVendor(e(e({},u),{},{extensions:i.extensions}))){t.next=8;break}return t.abrupt("continue",24);case 8:return this.externalEventBinder.bindWith(o),this.installExtensions(o,i),new Gt({impression:i.impression,error:i.errors,videoClicks:u.videoClicks,trackingEvents:null==u?void 0:u.trackingEvents}).bindWith(o),t.prev=11,t.next=14,o.load();case 14:return t.next=16,o.render();case 16:t.next=23;break;case 18:return t.prev=18,t.t0=t.catch(11),o.destroy(),o=void 0,t.abrupt("continue",24);case 23:return t.abrupt("break",26);case 24:t.next=3;break;case 26:t.next=31;break;case 28:t.prev=28,t.t1=t.catch(1),a.e(t.t1);case 31:return t.prev=31,a.f(),t.finish(31);case 34:if(!o){t.next=38;break}this.adVendor=o,t.next=39;break;case 38:return t.abrupt("return",Promise.reject());case 39:case"end":return t.stop()}}),t,this,[[1,28,31,34],[11,18]])}))),function(t,e){return s.apply(this,arguments)})},{key:"parseSource",value:function(){var t=this;return this.checkSourceImp().then((function(){return t.loadVast()})).then((function(e){return t.parseVast(e)})).then((function(e){return t.loadVendor(e.linearreatives,e.vastData)})).then((function(){t.hasLoadedAd=!0})).catch((function(){return t.deleteCurrentSource(),t.loadSource()}))}},{key:"loadSource",value:function(){var t=this;return this.selectSource().then((function(){return t.parseSource()}))}},{key:"loadAdData",value:function(){return this.loadProcess||(this.loadProcess=this.loadSource()),this.loadProcess}},{key:"waitEndOfPlayback",value:function(){var t=this;return new Promise((function(e){[Lt.Error,Lt.Skip,Lt.End,Lt.Close].forEach((function(n){return t.adVendor.subscribe(n,(function(){return e(n)}))}))}))}},{key:"startTrackingSoundChanges",value:function(){var t,e,n,r=this;this.adVendor.mute(),this.unmute&&(null===(t=this.adVendor)||void 0===t||t.getVolumeAvailabilityState().then((function(t){t&&r.adVendor.unmute()}))),null===(e=this.adVendor)||void 0===e||e.subscribe(Lt.Unmute,(function(){return r.unmute=!0})),null===(n=this.adVendor)||void 0===n||n.subscribe(Lt.Mute,(function(){return r.unmute=!1}))}},{key:"loadPlayer",value:(i=o(n().mark((function t(){var e=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.hasLoadedAd){t.next=2;break}return t.abrupt("return");case 2:return this.showLoader(),t.abrupt("return",this.loadAdData().then((function(){return H(300-((new Date).getTime()-e.loaderStartTime))})));case 4:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"launchPlayer",value:function(){var t=this;return this.startTrackingSoundChanges(),this.startByVisibility().then((function(){t.hideLoader(),t.impCount++,t.currentSourceImpCounter++})).then((function(){t.waitEndOfPlayback().then((function(e){t.deleteVendor(),e===Lt.Error&&t.deleteCurrentSource(),e===Lt.Close&&t.closeOffset&&t.closeOffset<t.playbackTimeRecorder.getPlaybackTime()?t.destroy():t.start()}))})).catch((function(){return t.deleteCurrentSource(),t.deleteVendor(),t.start()}))}},{key:"start",value:(r=o(n().mark((function t(){var e=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.impCount>=this.impTotal)){t.next=2;break}return t.abrupt("return",this.destroy());case 2:return t.abrupt("return",this.loadPlayer().then((function(){return e.resetLoadedData(),e.launchPlayer()})).catch((function(){return e.destroy()})));case 3:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"preload",value:function(){return this.loadAdData()}},{key:"finally",value:function(t){this.finallyCbList.push(t)}},{key:"destroy",value:function(){this.deleteVendor(),this.finallyCbList.forEach((function(t){return t()}))}},{key:"getAdVendor",value:function(){return this.adVendor}},{key:"deleteVendor",value:function(){var t;null===(t=this.adVendor)||void 0===t||t.destroy(),this.adVendor=null}},{key:"deleteCurrentSource",value:function(){this.currentSource=null}},{key:"resetLoadedData",value:function(){this.hasLoadedAd=!1,this.loadProcess=null}}]),t}();var wn,kn,Sn,En,Tn,Pn=function(){function t(e,n){var r=this;a(this,t),l(this,"slot",void 0),l(this,"wrapper",void 0),l(this,"controller",void 0),l(this,"informant",void 0),l(this,"adVendor",void 0),this.adVendor=null,this.slot=e,this.wrapper=document.createElement("div"),tt(this.wrapper,{width:"100%",height:"100%",position:"relative"}),this.informant=new ht,this.controller=new gn(this.wrapper,function(t){if("adriver_urls"in t){var e=[];return t.adriver_urls.forEach((function(t){var n={system:t.system?t.system:"adriver",priority:t.priority,source:t.url,total:t.rules};e.push(n)})),t.other_urls.forEach((function(t){var n={system:t.system,priority:t.priority,source:t.url,total:t.rules};e.push(n)})),{sources:e,controls:{"play-pause":{include:t.playStop.include,persistent:t.playStop.animated},"mute-unmute":{include:t.volume.include,persistent:t.volume.animated},"expand-collapse":{include:t.fullScreen.include,persistent:t.fullScreen.animated},close:{include:t.close.include,persistent:t.close.animated},skip:{include:0,persistent:0}},decorators:l({},"progress-bar",{include:t.closingTimeIndicator.include}),total:t.totalPlay,autoPlay:t.autoPlay,closeOffset:t.skipoffset,unmute:t.mutedPlay}}return t}(n),this.informant),this.controller.finally((function(){r.wrapper.remove(),r.informant.clear()}))}return u(t,[{key:"finally",value:function(t){this.controller.finally(t)}},{key:"subscribe",value:function(t,e){this.informant.subscribe(t,e)}},{key:"unsubscribe",value:function(t,e){"function"==typeof e&&this.informant.unsubscribe(t,e)}},{key:"destroy",value:function(){this.controller.destroy()}},{key:"start",value:function(){return this.slot.append(this.wrapper),this.controller.start()}},{key:"preload",value:function(){return this.controller.preload()}},{key:"getAdVendor",value:function(){return this.controller.getAdVendor()}}]),t}(),Cn={rootMargin:"0px",threshold:[0,.12,.25,.37,.5,.75,1],trackVisibility:!0,delay:100},An=[113,161,162,168,176,177,213,214,216,217,218,163,216,217,165,226],xn=[161,162,176,216,217,165,226],On=[161,162,176,165],jn=[115,161,162,176,216,217,165,226],Vn=[113,115,161,162,163,165,168,176,177,213,214,216,217,218,226],Ln={zero:[].concat(w(An),[227]),clientViewability:[].concat(w(xn),[227]),firstScreenViewability:[].concat(w(On),[227]),viewability:[].concat(w(jn),[227]),error:w(Vn)},In={zero:[].concat(w(An),[116,117,118,119,177]),clientViewability:[].concat(w(xn),[116,117,118,119,177]),firstScreenViewability:[].concat(w(On),[116,117,118,119,177]),viewability:[].concat(w(jn),[116,117,118,119,177]),error:[].concat(w(Vn),[116,117,118,119,177])},Mn={zero:w(An),clientViewability:w(xn),firstScreenViewability:w(On),viewability:w(jn),error:w(Vn)},_n={name:"ZeroEvent",type:110},Rn={name:"ClientViewability",type:179},Fn={name:"FirstScreenViewability",type:137},Dn={name:"Viewability",type:163},Bn={name:"Error",type:136},Un=function(){function t(e){var n=e.eventLink,r=e.sendZeroEvent,i=e.permanent,o=e.sendEvents,s=e.nodeToTrack,u=e.delay,c=e.startTime,f=e.secondaryParams;if(a(this,t),l(this,"informant",void 0),l(this,"eventLink",void 0),l(this,"startTime",void 0),l(this,"sendZeroEvent",void 0),l(this,"sendEvents",void 0),l(this,"permanent",void 0),l(this,"delay",void 0),l(this,"visibilityInformant",void 0),l(this,"nodeToTrack",void 0),l(this,"secondaryParams",void 0),l(this,"viewablePercent",void 0),l(this,"firstStart",void 0),l(this,"checkList",void 0),l(this,"clientViewabilityTimeoutId",void 0),l(this,"viewabilityTimeoutId",void 0),"string"!=typeof n||_(n))throw new Error("AV: missing event link");this.informant=new ht,this.eventLink=n,this.nodeToTrack=s,this.sendZeroEvent="boolean"!=typeof r||r,this.permanent="boolean"!=typeof i||i,this.sendEvents="boolean"!=typeof o||o,this.delay=x(u)?u:1e3,this.startTime=x(c)?c:(new Date).getTime(),this.secondaryParams=f&&x(f.time)&&x(f.area)?f:null,this.viewablePercent=-1,this.firstStart=!0,this.visibilityInformant=new ht,this.checkList={client:R(this.secondaryParams),native:!0,firstScreen:!0}}return u(t,[{key:"sendEvent",value:function(t,e,n){var r=t.name,i=t.type;if(this.informant.triggerEvent(r),e){var o=this.cc.clear().collect(n||[]).toString(),a=new ft(this.eventLink).setRnd().setParams({type:i,custom:o}).toString();new mt(a).send()}}},{key:"checkViewability",value:function(){var t=this;this.cc.collectFrom(this),H().then((function(){return t.sendEvent(_n,t.sendZeroEvent,t.customLists.zero)})),this.visibilityInformant.subscribe(Fn.name,(function(){return t.sendEvent(Fn,t.sendEvents,t.customLists.firstScreenViewability)})),this.visibilityInformant.subscribe(Dn.name,(function(){t.sendEvent(Dn,t.sendEvents,t.customLists.viewability),t.visibilityInformant.unsubscribe(Dn.name),t.permanent&&t.visibilityInformant.subscribe(Dn.name,(function(){return t.sendEvent(Dn,!1)}))})),this.visibilityInformant.subscribe(Rn.name,(function(){t.sendEvent(Rn,t.sendEvents,t.customLists.clientViewability),t.visibilityInformant.unsubscribe(Rn.name),t.permanent&&t.visibilityInformant.subscribe(Rn.name,(function(){return t.sendEvent(Rn,!1)}))})),this.visibilityInformant.subscribe(Bn.name,(function(){t.sendEvent(Bn,t.sendZeroEvent||t.sendEvents,t.customLists.error),t.remove()})),this.init()}},{key:"viewabilityChange",value:function(t){this.viewablePercent=t,this.checkList.client&&this.checkClientViewability(),this.checkList.native&&this.checkNativeViewability(),this.checkList.firstScreen&&this.checkFirstScreenViewability(),this.permanent||this.checkList.client||this.checkList.native||this.checkList.firstScreen||this.visibilityInformant.clear()}},{key:"checkClientViewability",value:function(){var t=this;this.viewablePercent>=+this.secondaryParams.area/100?this.clientViewabilityTimeoutId||(this.clientViewabilityTimeoutId=setTimeout((function(){t.visibilityInformant.triggerEvent(Rn.name),t.permanent||(t.checkList.client=!1)}),+this.secondaryParams.time)):this.clientViewabilityTimeoutId&&(clearTimeout(this.clientViewabilityTimeoutId),this.clientViewabilityTimeoutId=null)}},{key:"checkNativeViewability",value:function(){var t=this;this.viewablePercent>=.5?this.viewabilityTimeoutId||(this.viewabilityTimeoutId=setTimeout((function(){t.visibilityInformant.triggerEvent(Dn.name),t.permanent||(t.checkList.native=!1)}),this.delay)):this.viewabilityTimeoutId&&(clearTimeout(this.viewabilityTimeoutId),this.viewabilityTimeoutId=null)}},{key:"checkFirstScreenViewability",value:function(){if((new Date).getTime()-this.startTime<=1e3){if(!(this.viewablePercent>=.5))return;this.visibilityInformant.triggerEvent(Fn.name)}this.checkList.firstScreen=!1}},{key:"getViewablePercent",value:function(){return this.viewablePercent}},{key:"subscribe",value:function(t,e,n){var r;this.informant.subscribe(t,null==e||null===(r=e.bind)||void 0===r?void 0:r.call(e,n))}},{key:"unsubscribe",value:function(t){this.informant.unsubscribe(t)}},{key:"remove",value:function(){this.informant.clear(),this.visibilityInformant.clear(),this.viewablePercent=-1}}]),t}(),zn=function(t){c(n,t);var e=y(n);function n(t){var r;return a(this,n),l(m(r=e.call(this,t)),"width",void 0),l(m(r),"height",void 0),l(m(r),"cc",void 0),l(m(r),"measurable",void 0),l(m(r),"methodOfDeterminingVisibility",void 0),l(m(r),"observer",void 0),l(m(r),"customLists",void 0),l(m(r),"absoluteVisible",void 0),r.observer=new pt(r.observerHandler.bind(m(r)),Cn),r.methodOfDeterminingVisibility=1,r.width=r.nodeToTrack.clientWidth,r.height=r.nodeToTrack.clientHeight,r.cc=new J,r.customLists=Ln,r.measurable=!0,r.absoluteVisible=null,r}return u(n,[{key:"isFullscreenMode",get:function(){return st(this.nodeToTrack,this.nodeToTrack.ownerDocument)}},{key:"init",value:function(){this.observer.observe(this.nodeToTrack)}},{key:"observerHandler",value:function(t){var e=g(t,1)[0],n=e.intersectionRatio,r=e.isVisible;this.viewabilityChange(n),this.absoluteVisible=null!=r?r:null}},{key:"remove",value:function(){b(f(n.prototype),"remove",this).call(this),this.observer.disconnect()}}]),n}(Un),Wn=function(t){c(n,t);var e=y(n);function n(t){var r,i,o,s,u,c,f,h,d;return a(this,n),l(m(d=e.call(this,t)),"methodOfDeterminingVisibility",void 0),l(m(d),"cc",void 0),l(m(d),"customLists",void 0),l(m(d),"measurable",void 0),l(m(d),"isFullscreenMode",void 0),l(m(d),"version",void 0),l(m(d),"sdk",void 0),l(m(d),"sdkVersion",void 0),l(m(d),"appId",void 0),l(m(d),"ifa",void 0),l(m(d),"removed",void 0),d.cc=new J,d.version=window.mraid.getVersion(),d.methodOfDeterminingVisibility="2.0"===d.version?4:5,d.customLists=In,d.measurable=!0,d.sdk=null!==(r=null===(i=window)||void 0===i||null===(i=i.MRAID_ENV)||void 0===i?void 0:i.sdk)&&void 0!==r?r:"0",d.sdkVersion=null!==(o=null===(s=window)||void 0===s||null===(s=s.MRAID_ENV)||void 0===s?void 0:s.sdkVersion)&&void 0!==o?o:"0",d.appId=null!==(u=null===(c=window)||void 0===c||null===(c=c.MRAID_ENV)||void 0===c?void 0:c.appId)&&void 0!==u?u:"0",d.ifa=null!==(f=null===(h=window)||void 0===h||null===(h=h.MRAID_ENV)||void 0===h?void 0:h.ifa)&&void 0!==f?f:"0",d.removed=!1,d.isFullscreenMode=null,d}return u(n,[{key:"width",get:function(){return Math.round(window.mraid.getSize().width)}},{key:"height",get:function(){return Math.round(window.mraid.getSize().height)}},{key:"init",value:function(){var t=this;if("loading"===window.mraid.getState())return window.mraid.addEventListener("ready",this.init.bind(this));"3.0"===this.version?window.mraid.addEventListener("exposureChange",(function(e){return t.mraidEventHandler(e/100)})):(window.mraid.isViewable()&&this.mraidEventHandler(1),window.mraid.addEventListener("viewableChange",(function(e){return t.mraidEventHandler(e?1:0)})))}},{key:"mraidEventHandler",value:function(t){this.removed||this.viewabilityChange(t)}},{key:"remove",value:function(){b(f(n.prototype),"remove",this).call(this),this.removed=!0}}]),n}(Un),Hn=function(t){c(n,t);var e=y(n);function n(t){var r;return a(this,n),l(m(r=e.call(this,t)),"_width",void 0),l(m(r),"_height",void 0),l(m(r),"isFullscreenMode",void 0),l(m(r),"customLists",void 0),l(m(r),"cc",void 0),l(m(r),"measurable",void 0),l(m(r),"methodOfDeterminingVisibility",void 0),l(m(r),"omidClient",void 0),l(m(r),"removed",void 0),r.omidClient=new window.VerificationClient,r.cc=new J,r.customLists=Mn,r.measurable=!0,r._width=-1,r._height=-1,r.methodOfDeterminingVisibility=6,r.removed=!1,r.isFullscreenMode=null,r}return u(n,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"isSupported",value:function(){return this.omidClient.isSupported()}},{key:"init",value:function(){this.omidClient.addEventListener("geometryChange",this.omidEventHandler.bind(this))}},{key:"omidEventHandler",value:function(t){var e,n,r,i,o,a;if(!this.removed){var s=(null!==(e=null==t||null===(n=t.data)||void 0===n||null===(n=n.adView)||void 0===n?void 0:n.percentageInView)&&void 0!==e?e:0)/100;x(s)&&this.viewabilityChange(s),this._width=null!==(r=null==t||null===(i=t.data)||void 0===i?void 0:i.adView.geometry.width)&&void 0!==r?r:this._width,this._height=null!==(o=null==t||null===(a=t.data)||void 0===a?void 0:a.adView.geometry.height)&&void 0!==o?o:this._height}}},{key:"remove",value:function(){b(f(n.prototype),"remove",this).call(this),this.removed=!0}}]),n}(Un),qn=function(){function t(n){if(a(this,t),l(this,"viewabilityDeterminant",void 0),l(this,"config",void 0),!V(n)||M(n))throw new Error("AdriverViewability: there is no confing.");if(this.config=e({},n),!L(this.config.nodeToTrack)){if("string"!=typeof this.config.nodeToTrack||_(this.config.nodeToTrack))throw new Error("AdriverViewability: the element or its id is missing.");var r=document.querySelector(function(t){if(!O(t))throw new Error("Element id must be a string");if(_(t))throw new Error("Element id cannot be an empty string");return/^#.+/.test(t)?t:"#".concat(t)}(this.config.nodeToTrack));if(!r)throw new Error("AdriverViewability: the element could not be found.");this.config.nodeToTrack=r}var i=B();t:{if(i&&window.mraid){var o=window.mraid.getVersion();if("2.0"===o||"3.0"===o){this.viewabilityDeterminant=new Wn(this.config);break t}}if(i&&window.VerificationClient){var s=new Hn(this.config);if(s.isSupported()){this.viewabilityDeterminant=s;break t}}this.viewabilityDeterminant=new zn(this.config)}this.viewabilityDeterminant.checkViewability()}return u(t,[{key:"getViewablePercent",value:function(){return this.viewabilityDeterminant.getViewablePercent()}},{key:"subscribe",value:function(t,e,n){this.viewabilityDeterminant.subscribe(t,e,n)}},{key:"unsubscribe",value:function(t){this.viewabilityDeterminant.unsubscribe(t)}},{key:"remove",value:function(){this.viewabilityDeterminant.remove()}}]),t}();!function(t){t.AdLoaded="AdLoaded",t.AdStarted="AdStarted",t.AdStopped="AdStopped",t.AdSkipped="AdSkipped",t.AdSkippableStateChange="AdSkippableStateChange",t.AdSizeChange="AdSizeChange",t.AdLinearChange="AdLinearChange",t.AdDurationChange="AdDurationChange",t.AdExpandedChange="AdExpandedChange",t.AdVolumeChange="AdVolumeChange",t.AdImpression="AdImpression",t.AdVideoStart="AdVideoStart",t.AdVideoFirstQuartile="AdVideoFirstQuartile",t.AdVideoMidpoint="AdVideoMidpoint",t.AdVideoThirdQuartile="AdVideoThirdQuartile",t.AdVideoComplete="AdVideoComplete",t.AdClickThru="AdClickThru",t.AdInteraction="AdInteraction",t.AdUserAcceptInvitation="AdUserAcceptInvitation",t.AdUserMinimize="AdUserMinimize",t.AdUserClose="AdUserClose",t.AdPaused="AdPaused",t.AdPlaying="AdPlaying",t.AdLog="AdLog",t.AdError="AdError",t.AdRemainingTimeChange="AdRemainingTimeChange"}(Tn||(Tn={}));var Nn,Qn=((wn={})[Tn.AdLoaded]=Lt.Loaded,wn[Tn.AdStarted]=Lt.Start,wn[Tn.AdStopped]=Lt.End,wn[Tn.AdSkipped]=Lt.Skip,wn[Tn.AdSkippableStateChange]=Lt.SkippableStateChange,wn[Tn.AdSizeChange]=Lt.SizeChange,wn[Tn.AdExpandedChange]=Lt.Expand,wn[Tn.AdVolumeChange]=Lt.VolumeChange,wn[Tn.AdImpression]=Lt.Impression,wn[Tn.AdVideoFirstQuartile]=Lt.FirstQuartile,wn[Tn.AdVideoMidpoint]=Lt.Midpoint,wn[Tn.AdVideoThirdQuartile]=Lt.ThirdQuartile,wn[Tn.AdVideoComplete]=Lt.Complete,wn[Tn.AdClickThru]=Lt.Click,wn[Tn.AdUserClose]=Lt.Close,wn[Tn.AdPaused]=Lt.Pause,wn[Tn.AdPlaying]=Lt.Resume,wn[Tn.AdError]=Lt.Error,wn[Tn.AdRemainingTimeChange]=Lt.Timeupdate,wn[Tn.AdUserMinimize]=Lt.Collapse,wn[Tn.AdInteraction]=Lt.OtherInteraction,wn[Tn.AdLinearChange]=null,wn[Tn.AdDurationChange]=null,wn[Tn.AdVideoStart]=null,wn[Tn.AdUserAcceptInvitation]=null,wn[Tn.AdLog]=null,wn);!function(t){t.AcceptInvitation="acceptInvitation",t.Close="close",t.Collapse="collapse",t.Complete="complete",t.CreativeView="creativeView",t.ExitFullscreen="exitFullscreen",t.Expand="expand",t.FirstQuartile="firstQuartile",t.Fullscreen="fullscreen",t.Midpoint="midpoint",t.Mute="mute",t.Pause="pause",t.Progress="progress",t.Resume="resume",t.Rewind="rewind",t.Skip="skip",t.Start="start",t.ThirdQuartile="thirdQuartile",t.Unmute="unmute"}(Nn||(Nn={}));var Gn,Zn,$n=((kn={})[Nn.AcceptInvitation]=Lt.OtherInteraction,kn[Nn.Close]=Lt.Close,kn[Nn.Collapse]=Lt.Collapse,kn[Nn.Complete]=Lt.Complete,kn[Nn.CreativeView]=Lt.Impression,kn[Nn.Expand]=Lt.Expand,kn[Nn.FirstQuartile]=Lt.FirstQuartile,kn[Nn.Start]=Lt.Start,kn[Nn.Midpoint]=Lt.Midpoint,kn[Nn.ThirdQuartile]=Lt.ThirdQuartile,kn[Nn.Mute]=Lt.Mute,kn[Nn.Unmute]=Lt.Unmute,kn[Nn.Pause]=Lt.Pause,kn[Nn.Rewind]=Lt.Rewind,kn[Nn.Resume]=Lt.Resume,kn[Nn.Progress]=Lt.Timeupdate,kn[Nn.Skip]=Lt.Skip,kn[Nn.ExitFullscreen]=null,kn[Nn.Fullscreen]=null,kn);!function(t){t.Normal="normal",t.Thumbnail="thumbnail",t.Fullscreen="fullscreen"}(Gn||(Gn={})),function(t){t.CreativeView="creativeView",t.Start="start",t.FirstQuartile="firstQuartile",t.Midpoint="midpoint",t.ThirdQuartile="thirdQuartile",t.Complete="complete",t.Close="close",t.Skip="skip",t.Mute="mute",t.Unmute="unmute",t.Fullscreen="fullscreen",t.ExitFullscreen="exitFullscreen",t.Pause="pause",t.Resume="resume",t.Error="error",t.Viewability="viewability",t.ClientViewability="clientViewability",t.ViewabilityUnderFS="viewabilityUnderFS",t.RejectWhitelist="rejectWhitelist",t.Progress="progress",t.Timeline="timeline",t.MouseEnter="mouseEnter",t.MouseLeave="mouseLeave"}(Zn||(Zn={}));var Xn=((Sn={})[Lt.Impression]=Zn.CreativeView,Sn[Lt.Start]=Zn.Start,Sn[Lt.FirstQuartile]=Zn.FirstQuartile,Sn[Lt.Midpoint]=Zn.Midpoint,Sn[Lt.ThirdQuartile]=Zn.ThirdQuartile,Sn[Lt.Complete]=Zn.Complete,Sn[Lt.Close]=Zn.Close,Sn[Lt.Skip]=Zn.Skip,Sn[Lt.Mute]=Zn.Mute,Sn[Lt.Unmute]=Zn.Unmute,Sn[Lt.Expand]=Zn.Fullscreen,Sn[Lt.Collapse]=Zn.ExitFullscreen,Sn[Lt.Pause]=Zn.Pause,Sn[Lt.Resume]=Zn.Resume,Sn[Lt.Error]=Zn.Error,Sn),Yn=((En={})[Zn.RejectWhitelist]={type:70,customs:[168,176,213,214,216,217,163]},En[Zn.Progress]={type:19,customs:[]},En[Zn.Timeline]={type:50,customs:[161,162,165,166,167,170,171,176,201,164,229]},En[Zn.CreativeView]={type:1,customs:[113,161,162,165,166,167,168,170,171,176,201,213,214,216,217,163,177,164]},En[Zn.Start]={type:2,customs:[161,162,165,166,167,170,171,176,201,216,217,164,229]},En[Zn.FirstQuartile]={type:4,customs:[161,162,165,166,167,170,171,176,201,216,217,164,229]},En[Zn.Midpoint]={type:3,customs:[161,162,165,166,167,170,171,176,201,216,217,164,229]},En[Zn.ThirdQuartile]={type:5,customs:[161,162,165,166,167,170,171,176,201,216,217,164,229]},En[Zn.Complete]={type:6,customs:[161,162,165,166,167,170,171,176,201,216,217,164,229]},En[Zn.Close]={type:15,customs:[161,162,165,166,167,170,176,201,164]},En[Zn.Skip]={type:18,customs:[161,162,165,166,167,170,176,201,164]},En[Zn.Mute]={type:7,customs:[161,162,165,166,167,170,176,201,164,169]},En[Zn.Unmute]={type:8,customs:[161,162,165,166,167,170,176,201,164,169]},En[Zn.Fullscreen]={type:16,customs:[161,162,165,166,167,170,176,201,164]},En[Zn.ExitFullscreen]={type:17,customs:[161,162,165,166,167,170,176,201,164]},En[Zn.Pause]={type:9,customs:[161,162,165,166,167,170,176,201,164]},En[Zn.Resume]={type:11,customs:[161,162,165,166,167,170,176,201,164]},En[Zn.Error]={type:25,customs:[]},En[Zn.MouseEnter]={type:51,customs:[161,162,165,166,167,170,176,201,164,164]},En[Zn.MouseLeave]={type:52,customs:[161,162,165,166,167,170,176,201,164]},En[Zn.Viewability]={type:53,customs:[161,162,165,166,167,170,176,201,216,217]},En[Zn.ClientViewability]={type:69,customs:[161,162,165,166,167,170,176,201,216,217,164]},En[Zn.ViewabilityUnderFS]={type:71,customs:[161,162,165,166,167,168,170,171,176,201,213,214,216,217,163,177,164]},En),Jn=[161,162,164,165,166,167,170,176,201],Kn=function(){function t(t){this.player=t}return t.prototype.bindWith=function(t){var e=this;Object.values(Tn).forEach((function(n){var r=Qn[n];r&&(r===Lt.Click?e.player.subscribe(Lt.Click,(function(){var e=[void 0,void 0,!1];t.triggerEvent(n,e)})):e.player.subscribe(r,(function(){t.triggerEvent(n)})))}))},t}(),tr=function(){function t(t,e){this.player=t,this.eventHandlers=[],this.elapsedTime=e,this.prevTime=0,this.handleTimeUpdate=this.handleTimeUpdate.bind(this),this.player.subscribe(Lt.Timeupdate,this.handleTimeUpdate)}return t.prototype.subscribe=function(t){this.eventHandlers.push(t)},t.prototype.handleTimeUpdate=function(){var t=this.player.getAdVendor().currentTime,e=t-this.prevTime;this.prevTime=t,(e>1||e<0)&&(this.elapsedTime+=e),t>=this.elapsedTime&&(this.invokeHandlers(),this.player.unsubscribe(Lt.Timeupdate,this.handleTimeUpdate))},t.prototype.invokeHandlers=function(){for(var t=0,e=this.eventHandlers;t<e.length;t++){(0,e[t])()}},t}(),er=function(){function t(t,e){this.player=t,this.progressOffset=e,this.callbacks=[],this.player.subscribe(Lt.Impression,this.initializePlaybackTimeTracker.bind(this))}return t.prototype.subscribe=function(t){this.callbacks.push(t)},t.prototype.initializePlaybackTimeTracker=function(){var t=this,e=this.getProgressTimeOffset();x(e)&&new tr(this.player,e).subscribe((function(){return t.callbacks.forEach((function(t){return t()}))}))},t.prototype.getProgressTimeOffset=function(){if(!this.progressOffset)return null;if(this.progressOffset.endsWith("%")){var t=this.player.getAdVendor().duration;return!x(t)||t<0?null:+this.progressOffset.slice(0,-1)/100*t}return N(this.progressOffset)},t}(),nr=function(){function t(t,e){this.trackingEvents=t,this.progressEventTracker=e}return t.prototype.bindWith=function(t){var e=this;Object.values(Nn).forEach((function(n){var r=$n[n];if(r){var i=e.trackingEvents[n];i.length&&(n===Nn.Progress?e.progressEventTracker.subscribe((function(){e.sendPixels(i)})):t.subscribe(r,(function(){return e.sendPixels(i)})))}}))},t.prototype.sendPixels=function(t){t.forEach((function(t){if(F(t)){var e=new ft(t).setRnd().toString();new mt(e).send()}}))},t}(),rr={113:function(t){return D(t.cv.area)&&D(t.cv.time)?1:0},161:function(t){var e;return null!==(e=t.player.getAdVendor().contentSize.width)&&void 0!==e?e:-1},162:function(t){var e;return null!==(e=t.player.getAdVendor().contentSize.height)&&void 0!==e?e:-1},165:function(t){return t.av.getViewablePercent()},163:function(){return(new G).topReferrer},164:function(t){return t.av.getViewablePercent()>=.5?"viewable":"unviewable"},166:function(){return"hidden"in document?document.hidden:-1},167:function(t){return Math.round(t.player.getAdVendor().currentTime)},168:function(){return!(new G).onPage},169:function(t){return t.muteUnmuteTime},170:function(t){return t.player.getAdVendor().muted?0:10*t.player.getAdVendor().volume},171:function(t){return Math.round(t.player.getAdVendor().duration)},176:function(t){return(new Date).getTime()-t.startTime},177:function(){return 1},201:function(t){return t.mouseCoords.x},202:function(t){return t.mouseCoords.y},213:function(){var t,e,n;return null!==(n=null===(e=null===(t=window.location)||void 0===t?void 0:t.ancestorOrigins)||void 0===e?void 0:e.length)&&void 0!==n?n:""},214:function(){return window.history.length},216:function(){return window.screen.width},217:function(){return window.screen.height},229:function(t){return t.hoverTime},230:function(){return window.navigator.userAgent?btoa(window.navigator.userAgent):-1}},ir=function(){function t(t,e,n,r){this.eventData=e,this.context=n,this.eventLink=t,this.clientCustoms=r}return t.prototype.send=function(){var t=this.getCustomData(),e=this.buildUrl(t);new mt(e).send()},t.prototype.getCustomData=function(){var t="customs"in this.eventData?this.eventData.customs:this.eventData,e=new J(rr).collectFrom(this.context).collect(t).toString();return this.clientCustoms&&!M(this.clientCustoms)&&(e+=";".concat(z(this.clientCustoms,";"))),e},t.prototype.buildUrl=function(t){var e="type"in this.eventData?{type:this.eventData.type,custom:t}:{custom:t};return new ft(this.eventLink).setRnd().setParams(e).toString()},t}(),or="ClientViewability",ar="Viewability",sr=function(){function t(t){this.systemEventParameters=t}return t.prototype.bind=function(){this.bindEClickEvent(),this.bindViewabilityEvents(),this.bindTimelineEvents(),this.bindProgressEvents(),this.bindPlaybackEvents()},t.prototype.bindViewabilityEvents=function(){var t=this;this.systemEventParameters.player.subscribe(Lt.Start,(function(){t.systemEventParameters.av.subscribe(or,(function(){new ir(t.systemEventParameters.eventLink,Yn[Zn.ClientViewability],t.systemEventParameters.customContext).send()})),t.systemEventParameters.av.subscribe(ar,(function(){var e=[Zn.Viewability];st()&&(t.systemEventParameters.player.getAdVendor().expanded||e.push(Zn.ViewabilityUnderFS)),e.forEach((function(e){new ir(t.systemEventParameters.eventLink,Yn[e],t.systemEventParameters.customContext).send()}))}))}))},t.prototype.bindEClickEvent=function(){var t=this;this.systemEventParameters.player.subscribe(Lt.Click,(function(){new ir(t.systemEventParameters.eClickLink,Jn,t.systemEventParameters.customContext,t.systemEventParameters.clientCustom).send()}))},t.prototype.bindTimelineEvents=function(){var t=this,e=0;this.systemEventParameters.player.subscribe(Lt.Timeupdate,(function(){var n=t.systemEventParameters.player.getAdVendor().currentTime;n>e&&(new ir(t.systemEventParameters.eventLink,Yn[Zn.Timeline],t.systemEventParameters.customContext).send(),e=Math.ceil(n))}))},t.prototype.bindProgressEvents=function(){var t=this;this.systemEventParameters.progressEventTracker.subscribe((function(){new ir(t.systemEventParameters.eventLink,Yn[Zn.Progress],t.systemEventParameters.customContext).send()}))},t.prototype.bindPlaybackEvents=function(){var t=this;[Lt.Impression,Lt.Start,Lt.FirstQuartile,Lt.Midpoint,Lt.ThirdQuartile,Lt.Complete,Lt.Close,Lt.Skip,Lt.Mute,Lt.Unmute,Lt.Expand,Lt.Collapse,Lt.Pause,Lt.Resume,Lt.Error].forEach((function(e){return t.systemEventParameters.player.subscribe(e,(function(){new ir(t.systemEventParameters.eventLink,Yn[Xn[e]],t.systemEventParameters.customContext).send()}))}))},t}(),ur=function(t){this.bt=t.bt||"0",this.xpid=t.xpid||"",this.pz=t.pz||"0",this.ad=t.ad||"0",this.bid=t.bid||"0",this.bn=t.bn||"0",this.sz=t.sz||"0",this.sid=t.site||"",this.tail256=t.tail256||(new G).topReferrer,t.sliceid&&(this.sliceid=t.sliceid)},lr=function(){function t(t,e,n,r){this.slot=e,this.player=t,this.cv=n,this.startTime=(new Date).getTime(),this.mouseCoords={x:0,y:0},this.isCursorOverSlot=!1,this.hoverStartTime=0,this.muteTime=0,this.av=r,this.bindMouseEvents()}return Object.defineProperty(t.prototype,"hoverTime",{get:function(){if(this.isCursorOverSlot){var t=(new Date).getTime()-this.hoverStartTime;return new Date(t).getSeconds()}return 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"muteUnmuteTime",{get:function(){var t=this.muteTime,e=this.player.getAdVendor().currentTime;return this.muteTime=e,+(e-t).toFixed(1)},enumerable:!1,configurable:!0}),t.prototype.bindMouseEvents=function(){var t=this;this.slot.addEventListener("mouseenter",(function(){t.hoverStartTime=(new Date).getTime(),t.isCursorOverSlot=!0})),this.slot.addEventListener("mouseleave",(function(){t.isCursorOverSlot=!1,t.mouseCoords.x=0,t.mouseCoords.y=0})),this.slot.addEventListener("mousemove",(function(e){t.mouseCoords.x=e.offsetX,t.mouseCoords.y=e.offsetY}))},t}(),cr=function(){function t(t,e){this.slot=t,this.scriptUrls=e}return t.prototype.load=function(){for(var t=function(t){new yt(t,e.slot).load().catch((function(e){console.log("Error loading script from URL: ".concat(t),e)}))},e=this,n=0,r=this.scriptUrls;n<r.length;n++){t(r[n])}},t}(),fr=function(){function t(){this.player=null,this.ec=new ht}return t.prototype.initAd=function(t,e,n,r,i,o){var a=this,s=function(t){try{return JSON.parse(t)}catch(t){return null}}(null==i?void 0:i.AdParameters);if(s&&s.pass){var u=o.videoSlot,l=o.slot;if(o.videoSlotCanAutoPlay,L(l)){var c,f=("progress_offset"in(c=s).TrackingEvents&&(Reflect.set(c,"progress_offset",c.TrackingEvents.progress_offset),Reflect.deleteProperty(c.TrackingEvents,"progress_offset")),c);(f.chwl?new wt(f.chwl).check():Promise.resolve(!0)).then((function(n){var r=new ur(s),i=new ft("https://ev.adriver.ru/cgi-bin/event.cgi?rnd=![rnd]").setParams(P(P({},f.extstr),r)).toString(),o=new ft("https://ev.adriver.ru/cgi-bin/eclick.cgi?rnd=![rnd]").setParams(P(P({},f.extstr),r)).toString(),c=document.createElement("div");tt(c,{width:t?W(t):l.clientWidth||"100%",height:e?W(e):l.clientHeight||"100%"}),l.append(c),tt(u,{display:"none"});var h=function(){c.remove(),tt(u,{display:"block"})},d=function(t,e){var n,r;return{sources:[{system:"",priority:1,source:t,total:1}],controls:(n={},n["play-pause"]={include:1,persistent:0},n["mute-unmute"]={include:1,persistent:0},n["expand-collapse"]={include:1,persistent:0},n.close={include:1,persistent:0},n.skip={include:1,persistent:0},n),decorators:(r={},r["progress-bar"]={include:0},r),autoPlay:1,total:1,closeOffset:0,unmute:0}}(f.pass);a.player=new Pn(c,d);var p=new qn({eventLink:i,nodeToTrack:c,sendZeroEvent:!1,permanent:!1,sendEvents:!1,secondaryParams:f.cv}),v=new lr(a.player,c,f.cv,p);if(!n)return a.ec.triggerEvent(Tn.AdError,"chwl error"),new ir(i,Yn[Zn.RejectWhitelist],v,f.custom).send(),void h();var m=new er(a.player,f.progress_offset);new cr(c,f.jstracker).load(),new Kn(a.player).bindWith(a.ec),new nr(f.TrackingEvents,m).bindWith(a.player),new sr({player:a.player,progressEventTracker:m,customContext:v,eventLink:i,eClickLink:o,clientCustom:f.custom,av:p}).bind(),a.player.finally((function(){return h()})),a.player.start()}))}else this.ec.triggerEvent(Tn.AdError,"Slot is not html element")}else this.ec.triggerEvent(Tn.AdError,"Invalid adParameters")},t.prototype.getAdWidth=function(){var t,e,n;return null!==(n=null===(e=null===(t=this.player)||void 0===t?void 0:t.getAdVendor())||void 0===e?void 0:e.contentSize.width)&&void 0!==n?n:0},t.prototype.getAdHeight=function(){var t,e,n;return null!==(n=null===(e=null===(t=this.player)||void 0===t?void 0:t.getAdVendor())||void 0===e?void 0:e.contentSize.height)&&void 0!==n?n:0},t.prototype.getAdExpanded=function(){var t,e;return Boolean(null===(e=null===(t=this.player)||void 0===t?void 0:t.getAdVendor())||void 0===e?void 0:e.expanded)},t.prototype.getAdSkippableState=function(){var t,e;return Boolean(null===(e=null===(t=this.player)||void 0===t?void 0:t.getAdVendor())||void 0===e?void 0:e.skippableState)},t.prototype.getAdDuration=function(){var t,e,n;return null!==(n=null===(e=null===(t=this.player)||void 0===t?void 0:t.getAdVendor())||void 0===e?void 0:e.duration)&&void 0!==n?n:-2},t.prototype.getAdLinear=function(){return!1},t.prototype.getAdIcons=function(){return!1},t.prototype.getAdRemainingTime=function(){var t,e=null===(t=this.player)||void 0===t?void 0:t.getAdVendor();return e?e.duration-e.currentTime:-2},t.prototype.getAdCompanions=function(){return""},t.prototype.getAdVolume=function(){var t,e,n;return null!==(n=null===(e=null===(t=this.player)||void 0===t?void 0:t.getAdVendor())||void 0===e?void 0:e.volume)&&void 0!==n?n:-1},t.prototype.setAdVolume=function(t){var e,n=null===(e=this.player)||void 0===e?void 0:e.getAdVendor();n&&(n.volume=t)},t.prototype.handshakeVersion=function(t){return"2.0"},t.prototype.resizeAd=function(t,e,n){var r,i;null===(i=null===(r=this.player)||void 0===r?void 0:r.getAdVendor())||void 0===i||i.resize({width:t,height:e})},t.prototype.startAd=function(){var t,e;null===(e=null===(t=this.player)||void 0===t?void 0:t.getAdVendor())||void 0===e||e.start()},t.prototype.stopAd=function(){var t;null===(t=this.player)||void 0===t||t.destroy()},t.prototype.pauseAd=function(){var t,e;null===(e=null===(t=this.player)||void 0===t?void 0:t.getAdVendor())||void 0===e||e.pause()},t.prototype.resumeAd=function(){var t,e;null===(e=null===(t=this.player)||void 0===t?void 0:t.getAdVendor())||void 0===e||e.resume()},t.prototype.expandAd=function(){var t,e;null===(e=null===(t=this.player)||void 0===t?void 0:t.getAdVendor())||void 0===e||e.expand()},t.prototype.collapseAd=function(){var t,e;null===(e=null===(t=this.player)||void 0===t?void 0:t.getAdVendor())||void 0===e||e.collapse()},t.prototype.skipAd=function(){var t,e;null===(e=null===(t=this.player)||void 0===t?void 0:t.getAdVendor())||void 0===e||e.skip()},t.prototype.subscribe=function(t,e,n){this.ec.subscribe(e,t)},t.prototype.unsubscribe=function(t,e){this.ec.unsubscribe(e,t)},t}();window.getVPAIDAd=function(){return new fr}}();
