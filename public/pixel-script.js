// @adr/adriver-viewability/pixel-script v0.0.11
!function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function f(e,t,n){return f=h()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&c(i,n.prototype),i},f.apply(null,arguments)}function d(e){var t="function"==typeof Map?new Map:void 0;return d=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return f(e,arguments,a(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)},d(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){var t=h();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}(this,n)}}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},m.apply(this,arguments)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,u=[],l=!0,a=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){a=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(a)throw i}}return u}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}var E=function(e,t){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},E(e,t)};function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var T=function(){return T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},T.apply(this,arguments)};function O(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function u(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,u)}l((r=r.apply(e,t||[])).next())}))}function _(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(l){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){s.label=u[1];break}if(6===u[0]&&s.label<i[1]){s.label=i[1],i=u;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(u);break}i[2]&&s.ops.pop(),s.trys.pop();continue}u=t.call(e,s)}catch(e){u=[6,e],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,l])}}}function P(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function S(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function C(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var I,V=function(e,t){if(e)for(var n=Object.prototype.toString.call(t.prototype),r=Object.getPrototypeOf(e);r;){if(Object.prototype.toString.call(r)===n)return!0;r=Object.getPrototypeOf(r)}return!1},L=function(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)},x=function(e){return"string"==typeof e||V(e,String)},M=function(e){return"object"===r(e)&&!Array.isArray(e)&&null!==e},A=function(e){return"[object Object]"===Object.prototype.toString.call(e)},R=function(e){return V(e,HTMLElement)||j(e)},j=function(e){return V(e,Document)},D=function(e){if(!M(e))throw new Error("".concat(e," is not an object"));for(var t in e)return!1;return!0},F=function(e){if(!x(e))throw new Error("".concat(e," is not a string"));return 0===W(e).length},q=function(){if(arguments.length<=0)throw new Error("Function has been called without arguments");return Boolean(arguments.length<=0?void 0:arguments[0])},H=function(e){return L(parseFloat(e))&&isFinite(e)},U=function(e){var t=(x(e)?e:window.navigator.userAgent).toLowerCase();return/android|webos|iphone|ipad|ipod|blackberry|bb|playbook|iemobile|windows phone|kindle|silk|opera mini/i.test(t)},W=function(e){if(!x(e))throw new Error("".concat(e," is not a string"));return e.replace(/\s/g,"")},z=function(e){if(!x(e))throw new Error("Element id must be a string");if(F(e))throw new Error("Element id cannot be an empty string");return/^#.+/.test(e)?e:"#".concat(e)};!function(e){e.OnPage="onpage",e.SameDomainFrame="samedomainiframe",e.CrossDomainFrame="crossdomainframe"}(I||(I={}));var N=[{system:"doubleclick",parameter:"url"},{system:"betweendigital",parameter:"ref"},{system:"vidroll.ru",parameter:"wpl"},{system:"video-play.ru",parameter:"wpl"}],B=function(){function e(){if(i(this,e),u(this,"_location",void 0),u(this,"_topWin",void 0),u(this,"_topRef",void 0),e._instance)return e._instance;e._instance=this,this.analyzeLocation()}return s(e,[{key:"analyzeLocation",value:function(){var e=window.location.href;if(window.top===window)this._location=I.OnPage,this._topWin=window;else{this._topWin=window.top;try{var t;null===(t=window.top)||void 0===t||t.location.href,e=this._topWin.location.href,this._location=I.SameDomainFrame}catch(t){this._location=I.CrossDomainFrame,e=window.document.referrer||window.location.href}}var n,r=g(N);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.system,s=i.parameter;if(e.includes(o)){var u=new URL(e).searchParams.get(s);if(u){e=u;break}}}}catch(e){r.e(e)}finally{r.f()}if(window.location.ancestorOrigins&&window.location.ancestorOrigins.length>0){var l=window.location.ancestorOrigins[window.location.ancestorOrigins.length-1];new URL(l).hostname!==new URL(e).hostname&&(e=l)}this._topRef=e}},{key:"topReferrer",get:function(){return this._topRef}},{key:"topWindow",get:function(){return this._topWin}},{key:"onPage",get:function(){return this._location===I.OnPage}},{key:"inCrossDomainFrame",get:function(){return this._location===I.CrossDomainFrame}},{key:"inSameDomainFrame",get:function(){return this._location===I.SameDomainFrame}}]),e}();u(B,"_instance",void 0);var Z,G=function(e,t){switch(null==e?void 0:e[t]){case!0:return 1;case!1:return 0;default:return-1}},J={113:function(e){var t=e&&"secondaryParams"in e?{secondaryParams:Boolean(e.secondaryParams)}:e;return G(t,"secondaryParams")},115:function(e){var t;return null!==(t=null==e?void 0:e.methodOfDeterminingVisibility)&&void 0!==t?t:-1},116:function(e){var t;return null!==(t=null==e?void 0:e.appID)&&void 0!==t?t:-1},117:function(e){var t;return null!==(t=null==e?void 0:e.ifa)&&void 0!==t?t:-1},118:function(e){var t;return null!==(t=null==e?void 0:e.sdkVersion)&&void 0!==t?t:-1},119:function(e){var t;return null!==(t=null==e?void 0:e.sdkName)&&void 0!==t?t:-1},161:function(e){var t;return null!==(t=null==e?void 0:e.width)&&void 0!==t?t:-1},162:function(e){var t;return null!==(t=null==e?void 0:e.height)&&void 0!==t?t:-1},163:function(){var e;return null!==(e=(new B).topReferrer)&&void 0!==e?e:-1},165:function(e){if(e&&"getViewablePercent"in e){var t,n=null===(t=e.getViewablePercent)||void 0===t?void 0:t.call(e);if(L(n)&&-1!=+n)return(+n).toFixed(1)}return-1},168:function(){var e=new B;return e.onPage?1:e.inCrossDomainFrame?2:e.inSameDomainFrame?3:-1},176:function(e){return L(null==e?void 0:e.startTime)?(new Date).getTime()-e.startTime:-1},177:function(e){return G(e,"measurable")},213:function(){var e,t;return null!==(e=null===(t=window)||void 0===t||null===(t=t.location)||void 0===t||null===(t=t.ancestorOrigins)||void 0===t?void 0:t.length)&&void 0!==e?e:-1},214:function(){var e,t;return null!==(e=null===(t=window)||void 0===t||null===(t=t.history)||void 0===t?void 0:t.length)&&void 0!==e?e:-1},215:function(){var e,t;return null!==(e=null===(t=window)||void 0===t||null===(t=t.navigator)||void 0===t?void 0:t.userAgent)&&void 0!==e?e:-1},216:function(){var e,t;return null!==(e=null===(t=window)||void 0===t||null===(t=t.screen)||void 0===t?void 0:t.width)&&void 0!==e?e:-1},217:function(){var e,t;return null!==(e=null===(t=window)||void 0===t||null===(t=t.screen)||void 0===t?void 0:t.height)&&void 0!==e?e:-1},218:function(e){return G(e,"isFullscreenMode")},226:function(){return U(e)?function(e,t){var n=t instanceof Window?t:window,r=(x(e)?e:n.navigator.userAgent).toLowerCase(),i=n.navigator.standalone,o=/safari/.test(r),s=/iphone|ipod|ipad/.test(r),u=r.includes("wv"),l=Boolean(r.match(/(WebView|Android.*(wv|.0.0.0)|Linux; U; Android)/gi));return s&&!i&&!o||u||l}()?3:2:1;var e},227:function(e){return G(e,"absoluteVisible")}},$=function(){function e(t){if(i(this,e),u(this,"context",void 0),u(this,"collectedCustoms",void 0),u(this,"customMap",void 0),A(t)){if(!Object.entries(t).some((function(e){var t=b(e,2),n=t[0],r=t[1];return L(+n)&&"function"==typeof r})))throw new TypeError("CustomCollector: invalid custom map.");this.customMap=t}else this.customMap=J;this.collectedCustoms={}}return s(e,[{key:"collectFrom",value:function(e){if(!A(e))throw new TypeError("CustomCollector: the context must be an object.");if(D(e))throw new TypeError("CustomCollector: empty context was passed.");return this.context=e,this}},{key:"collect",value:function(e){if(!Array.isArray(e))throw new TypeError("CustomCollector: there is no custom list.");if(!this.context)throw new Error("CustomCollector: missing context.");var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var r,i=t.value;L(i)&&(this.collectedCustoms[i]=null!==(r="function"==typeof this.customMap[i]?this.customMap[i](this.context):null)&&void 0!==r?r:-1)}}catch(e){n.e(e)}finally{n.f()}return this}},{key:"clear",value:function(){for(var e in this.collectedCustoms)delete this.collectedCustoms[e];return this}},{key:"toString",value:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&";return M(e)?Object.entries(e).map((function(e){return e.join("=")})).join(t):null}(this.collectedCustoms,";")}}]),e}(),K=function(e,t,n){if((R(e)||e instanceof SVGElement)&&A(t))for(var r in t){var i=L(t[r])?String(t[r]):t[r];x(i)&&!F(i)&&n(e,r,i)}},Q="webkitDisplayingFullscreen";!function(e){e.Webkit="webkit",e.Moz="moz",e.Ms="ms",e.Web="web",e.DisabledWebkit="webkit_ios",e.Unknown="unknown"}(Z||(Z={}));var X,Y=u(u(u(u({},Z.Webkit,{fullscreenEnabled:"webkitFullscreenEnabled",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenChangeEvent:"webkitfullscreenchange",fullscreenErrorEvent:"webkitfullscreenerror",pseudoClass:"-webkit-full-screen"}),Z.Moz,{fullscreenEnabled:"mozFullScreenEnabled",fullscreenElement:"mozFullScreenElement",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",fullscreenChangeEvent:"mozfullscreenchange",fullscreenErrorEvent:"mozfullscreenerror",pseudoClass:"-moz-full-screen"}),Z.Ms,{fullscreenEnabled:"msFullscreenEnabled",fullscreenElement:"msFullscreenElement",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",fullscreenChangeEvent:"MSFullscreenChange",fullscreenErrorEvent:"MSFullscreenError",pseudoClass:"-ms-fullscreen"}),Z.Web,{fullscreenEnabled:"fullscreenEnabled",fullscreenElement:"fullscreenElement",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",fullscreenChangeEvent:"fullscreenchange",fullscreenErrorEvent:"fullscreenerror",pseudoClass:"fullscreen"}),ee=function(){if(!X)if(Y[Z.Web].fullscreenEnabled in window.document)X=Z.Web;else if(Y[Z.Webkit].fullscreenEnabled in window.document)X=Z.Webkit;else if(Y[Z.Moz].fullscreenEnabled in window.document)X=Z.Moz;else if(Y[Z.Ms].fullscreenEnabled in window.document)X=Z.Ms;else{var e=document.createElement("video");X=Q in e?Z.DisabledWebkit:Z.Unknown}return X},te=function(e){l(n,e);var t=p(n);function n(e){var r;i(this,n);var o=n.hasProtocol(e)?e:"https:"+e;return u(v(r=t.call(this,o)),"macrosList",[]),Object.setPrototypeOf(v(r),n.prototype),r}return s(n,[{key:"setMacros",value:function(e,t){var n;if(t=null===(n=t)||void 0===n?void 0:n.toString(),x(e)&&!F(e)&&!F(t)){e=e.replace(/[^a-zA-Z0-9 ]/g,"");var r={value:t,template:new RegExp("\\!\\[".concat(e,"\\]"))};this.macrosList.push(r)}return this}},{key:"setRnd",value:function(){var e,t;return this.setMacros("rnd",(e=+"1E".concat(6||10),t=e/10,Math.floor(t+Math.random()*(e-t)))),this}},{key:"setParams",value:function(e){if(A(e))for(var t in e)this.searchParams.set(t,e[t].toString());return this}},{key:"toString",value:function(){var e,t=decodeURIComponent(m(a(n.prototype),"toString",this).call(this)),r=g(this.macrosList);try{for(r.s();!(e=r.n()).done;){var i=e.value,o=i.value,s=i.template;t=t.replace(s,o)}}catch(e){r.e(e)}finally{r.f()}return new URL(t).toString()}},{key:"httpslize",value:function(){return"https:"!==this.protocol&&(this.protocol="https:"),this}}],[{key:"hasProtocol",value:function(e){return/^(https|http):\/\/.+/.test(e)}}]),n}(d(URL)),ne=function(){function e(){i(this,e),u(this,"eventMap",void 0),this.eventMap=Object.create(null)}return s(e,[{key:"subscribe",value:function(e,t){x(e)&&!F(e)&&"function"==typeof t&&(this.eventMap[e]||(this.eventMap[e]=[]),this.eventMap[e].push(t))}},{key:"clear",value:function(){for(var e in this.eventMap)delete this.eventMap[e]}},{key:"triggerEvent",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];x(e)&&this.eventMap[e]&&this.eventMap[e].forEach((function(e){return e.apply(void 0,n)}))}},{key:"unsubscribe",value:function(e,t){if(x(e)&&Array.isArray(this.eventMap[e]))if("function"==typeof t)for(var n=this.eventMap[e].length,r=0;r<n;r++){t===this.eventMap[e][r]&&(this.eventMap[e][r]=this.eventMap[e][n-1],this.eventMap[e].length-=1)}else delete this.eventMap[e]}}]),e}(),re=function(){function e(t){var n=t.uri,r=t.options,o=t.timeout,s=t.requestCount;if(i(this,e),u(this,"uri",void 0),u(this,"options",void 0),u(this,"timeout",void 0),u(this,"requestCount",void 0),u(this,"requestController",void 0),u(this,"timeoutHandler",void 0),u(this,"numberOfCalls",0),"string"!=typeof n)throw new Error("Fetcher: the uri for request must be a string.");if(!function(e){if(!x(e))throw new Error("".concat(e," is not a string"));return/^(((http|https|ftp):)?\/\/){1}(([A-Z0-9][A-Z0-9_-]*)(\.[A-Z0-9][A-Z0-9_-]*)+)/i.test(e)}(n))throw new Error("Fetcher: the uri for request must match the regular expression ".concat("/^(((http|https|ftp):)?//){1}(([ A-Z0-9][A-Z0-9_-]*)(.[ A-Z0-9][A-Z0-9_-]*)+)/i"));this.uri=n,A(r)?this.options=r:this.options={},L(o)?this.timeout=o<200?200:o:this.timeout=1e4,!L(s)||s<1?this.requestCount=2:this.requestCount=s}return s(e,[{key:"request",value:function(){var e=this;try{return this.requestController=new AbortController,this.timeoutHandler=setTimeout((function(){return e.requestController.abort()}),this.timeout),fetch(this.uri,t(t({},this.options),{},{signal:this.requestController.signal})).then((function(t){return clearTimeout(e.timeoutHandler),e.requestController=void 0,e.timeoutHandler=void 0,e.numberOfCalls=0,t})).catch((function(t){if(clearTimeout(e.timeoutHandler),e.requestController=void 0,e.timeoutHandler=void 0,e.numberOfCalls++,e.numberOfCalls>=e.requestCount)throw e.numberOfCalls=0,"AbortError"===t.name&&(t=new Error("Timeout error.")),new Error("Fetcher: Error during request.");return e.request()}))}catch(e){return Promise.reject(new Error("Fetcher: Error when trying to request."))}}}]),e}();!function(){if("object"===("undefined"==typeof window?"undefined":r(window)))if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var e=function(e){for(var t=window.document,n=o(t);n;)n=o(t=n.ownerDocument);return t}(),t=[],n=null,i=null;u.prototype.THROTTLE_TIMEOUT=100,u.prototype.POLL_INTERVAL=null,u.prototype.USE_MUTATION_OBSERVER=!0,u._setupCrossOriginUpdater=function(){return n||(n=function(e,n){i=e&&n?f(e,n):{top:0,bottom:0,left:0,right:0,width:0,height:0},t.forEach((function(e){e._checkForIntersections()}))}),n},u._resetCrossOriginUpdater=function(){n=null,i=null},u.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(e.ownerDocument),this._checkForIntersections()}},u.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._unmonitorIntersections(e.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},u.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},u.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},u.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]}))},u.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},u.prototype._monitorIntersections=function(t){var n=t.defaultView;if(n&&-1==this._monitoringDocuments.indexOf(t)){var r=this._checkForIntersections,i=null,s=null;this.POLL_INTERVAL?i=n.setInterval(r,this.POLL_INTERVAL):(l(n,"resize",r,!0),l(t,"scroll",r,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in n&&(s=new n.MutationObserver(r)).observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push((function(){var e=t.defaultView;e&&(i&&e.clearInterval(i),a(e,"resize",r,!0)),a(t,"scroll",r,!0),s&&s.disconnect()}));var u=this.root&&(this.root.ownerDocument||this.root)||e;if(t!=u){var c=o(t);c&&this._monitorIntersections(c.ownerDocument)}}},u.prototype._unmonitorIntersections=function(t){var n=this._monitoringDocuments.indexOf(t);if(-1!=n){var r=this.root&&(this.root.ownerDocument||this.root)||e,i=this._observationTargets.some((function(e){var n=e.element.ownerDocument;if(n==t)return!0;for(;n&&n!=r;){var i=o(n);if((n=i&&i.ownerDocument)==t)return!0}return!1}));if(!i){var s=this._monitoringUnsubscribes[n];if(this._monitoringDocuments.splice(n,1),this._monitoringUnsubscribes.splice(n,1),s(),t!=r){var u=o(t);u&&this._unmonitorIntersections(u.ownerDocument)}}}},u.prototype._unmonitorAllIntersections=function(){var e=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var t=0;t<e.length;t++)e[t]()},u.prototype._checkForIntersections=function(){if(this.root||!n||i){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(r){var i=r.element,o=c(i),u=this._rootContainsTarget(i),l=r.entry,a=e&&u&&this._computeTargetAndRootIntersection(i,o,t),h=null;this._rootContainsTarget(i)?n&&!this.root||(h=t):h={top:0,bottom:0,left:0,right:0,width:0,height:0};var f=r.entry=new s({time:window.performance&&performance.now&&performance.now(),target:i,boundingClientRect:o,rootBounds:h,intersectionRect:a});l?e&&u?this._hasCrossedThreshold(l,f)&&this._queuedEntries.push(f):l&&l.isIntersecting&&this._queuedEntries.push(f):this._queuedEntries.push(f)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},u.prototype._computeTargetAndRootIntersection=function(t,r,o){if("none"!=window.getComputedStyle(t).display){for(var s,u,l,a,h,d,p,m,b=r,y=v(t),w=!1;!w&&y;){var g=null,E=1==y.nodeType?window.getComputedStyle(y):{};if("none"==E.display)return null;if(y==this.root||9==y.nodeType)if(w=!0,y==this.root||y==e)n&&!this.root?!i||0==i.width&&0==i.height?(y=null,g=null,b=null):g=i:g=o;else{var k=v(y),T=k&&c(k),O=k&&this._computeTargetAndRootIntersection(k,T,o);T&&O?(y=k,g=f(T,O)):(y=null,b=null)}else{var _=y.ownerDocument;y!=_.body&&y!=_.documentElement&&"visible"!=E.overflow&&(g=c(y))}if(g&&(s=g,u=b,l=void 0,a=void 0,h=void 0,d=void 0,p=void 0,m=void 0,l=Math.max(s.top,u.top),a=Math.min(s.bottom,u.bottom),h=Math.max(s.left,u.left),d=Math.min(s.right,u.right),m=a-l,b=(p=d-h)>=0&&m>=0&&{top:l,bottom:a,left:h,right:d,width:p,height:m}||null),!b)break;y=y&&v(y)}return b}},u.prototype._getRootRect=function(){var t;if(this.root&&!p(this.root))t=c(this.root);else{var n=p(this.root)?this.root:e,r=n.documentElement,i=n.body;t={top:0,left:0,right:r.clientWidth||i.clientWidth,width:r.clientWidth||i.clientWidth,bottom:r.clientHeight||i.clientHeight,height:r.clientHeight||i.clientHeight}}return this._expandRectByRootMargin(t)},u.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100})),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},u.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==r)for(var i=0;i<this.thresholds.length;i++){var o=this.thresholds[i];if(o==n||o==r||o<n!=o<r)return!0}},u.prototype._rootIsInDom=function(){return!this.root||d(e,this.root)},u.prototype._rootContainsTarget=function(t){var n=this.root&&(this.root.ownerDocument||this.root)||e;return d(n,t)&&(!this.root||n==t.ownerDocument)},u.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},u.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=u,window.IntersectionObserverEntry=s}function o(e){try{return e.defaultView&&e.defaultView.frameElement||null}catch(e){return null}}function s(e){this.time=e.time,this.target=e.target,this.rootBounds=h(e.rootBounds),this.boundingClientRect=h(e.boundingClientRect),this.intersectionRect=h(e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,r=this.intersectionRect,i=r.width*r.height;this.intersectionRatio=n?Number((i/n).toFixed(4)):this.isIntersecting?1:0}function u(e,t){var n,r,i,o=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(o.root&&1!=o.root.nodeType&&9!=o.root.nodeType)throw new Error("root must be a Document or Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,i=null,function(){i||(i=setTimeout((function(){n(),i=null}),r))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(o.rootMargin),this.thresholds=this._initThresholds(o.threshold),this.root=o.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function l(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function a(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||!1):"function"==typeof e.detachEvent&&e.detachEvent("on"+t,n)}function c(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function h(e){return!e||"x"in e?e:{top:e.top,y:e.top,bottom:e.bottom,left:e.left,x:e.left,right:e.right,width:e.width,height:e.height}}function f(e,t){var n=t.top-e.top,r=t.left-e.left;return{top:n,left:r,height:t.height,width:t.width,bottom:n+t.height,right:r+t.width}}function d(e,t){for(var n=t;n;){if(n==e)return!0;n=v(n)}return!1}function v(t){var n=t.parentNode;return 9==t.nodeType&&t!=e?o(t):(n&&n.assignedSlot&&(n=n.assignedSlot.parentNode),n&&11==n.nodeType&&n.host?n.host:n)}function p(e){return e&&9===e.nodeType}}();var ie=function(e){l(n,window.IntersectionObserver);var t=p(n);function n(e,r){var o;return i(this,n),u(v(o=t.call(this,e,r)),"elementsToObserve",[]),Object.setPrototypeOf(v(o),n.prototype),o}return s(n,[{key:"isObserved",value:function(e){if(!R(e))return!1;var t,n=g(this.elementsToObserve);try{for(n.s();!(t=n.n()).done;){if(t.value===e)return!0}}catch(e){n.e(e)}finally{n.f()}return!1}},{key:"disconnect",value:function(){this.elementsToObserve.length=0,m(a(n.prototype),"disconnect",this).call(this)}},{key:"observe",value:function(e){m(a(n.prototype),"observe",this).call(this,e),this.isObserved(e)||this.elementsToObserve.push(e)}},{key:"unobserve",value:function(e){if(!R(e))throw new Error("Target must be an html element");m(a(n.prototype),"unobserve",this).call(this,e);var t=this.elementsToObserve.findIndex((function(t){return t===e}));-1!==t&&(this.elementsToObserve[t]=this.elementsToObserve[this.elementsToObserve.length-1],this.elementsToObserve.pop())}}]),n}(),oe={position:"absolute",display:"none",width:"0px",height:"0px"},se=function(){function e(t,n){if(i(this,e),u(this,"url",void 0),u(this,"element",void 0),x(t)&&F(t))throw new Error("Pixel: url should not be an empty.");if(!x(t))throw new Error("Pixel: url must be a string.");this.url=t,n instanceof Document?this.element=n.body:n instanceof HTMLElement?this.element=n:this.element=document.body}return s(e,[{key:"send",value:function(){var e=this;return new Promise((function(t,n){var r=document.createElement("img");K(r,oe,(function(e,t,n){return e.style.setProperty(t,n)})),r.setAttribute("referrerpolicy","no-referrer-when-downgrade"),r.setAttribute("src",e.url);var i=setTimeout((function(){r.removeEventListener("load",o),r.removeEventListener("error",o),n(new Error("Pixel: TimeOut error."))}),1e4),o=function(e){clearTimeout(i),"error"===e.type?n(new Error("Pixel: Img error loading.")):t(e)};r.addEventListener("load",o),r.addEventListener("error",o),e.element.append(r)}))}}]),e}(),ue=function(){function e(t,n,r){if(i(this,e),u(this,"uri",void 0),u(this,"parent",void 0),u(this,"timeOut",void 0),u(this,"scriptElement",void 0),!x(t))throw new Error("ScriptLoader: The url must be a string.");if(F(t))throw new Error("ScriptLoader: The url parameter cannot be an empty string.");this.timeOut=L(r)&&function(e){if(!L(e))throw new Error("".concat(e," is not a number"));return e>=0}(r)?r:5e3,this.scriptElement=document.createElement("script"),this.uri=t,j(n)&&R(n.body)?this.parent=n.body:R(n)&&1===(null==n?void 0:n.nodeType)?this.parent=n:this.parent=document.body}return s(e,[{key:"removeScriptElement",value:function(){this.scriptElement.remove()}},{key:"load",value:function(){var e=this;return new Promise((function(t,n){e.scriptElement.setAttribute("src",e.uri);var r=setTimeout((function(){e.scriptElement.removeEventListener("load",i),e.scriptElement.removeEventListener("error",i),e.scriptElement.remove(),n(new Error("TimeOut error."))}),e.timeOut),i=function(i){clearTimeout(r),"error"===i.type?(e.scriptElement.remove(),n(new Error("Script error loading."))):t(!0)};e.scriptElement.addEventListener("load",i,{once:!0}),e.scriptElement.addEventListener("error",i,{once:!0}),e.parent.append(e.scriptElement)}))}},{key:"setAttributes",value:function(e){return function(e,t){K(e,t,(function(e,t,n){return e.setAttribute(t,n)}))}(this.scriptElement,e),this}}]),e}(),le=function(){function e(){i(this,e),u(this,"audio",void 0),u(this,"timeoutId",void 0),u(this,"checkProcess",void 0),this.audio=new Audio,this.audio.volume=1,this.timeoutId=null,this.checkProcess=null}return s(e,[{key:"check",value:function(){var t=this;return!0===e.resoultCheck?Promise.resolve(e.resoultCheck):(this.checkProcess||(this.checkProcess=new Promise((function(n){var r=function(){t.timeoutId&&clearTimeout(t.timeoutId),e.resoultCheck=!0,t.checkProcess=null,n(!0)};t.audio.addEventListener("play",r);var i=t.audio.play();void 0!==i?i.catch((function(){t.audio.removeEventListener("play",r),t.checkProcess=null,n(!1)})):t.timeoutId=setTimeout((function(){t.audio.removeEventListener("play",r),t.checkProcess=null,n(!1)}),500)}))),this.checkProcess)}}]),e}();u(le,"resoultCheck",!1);var ae=function(e){return O(void 0,void 0,void 0,(function(){var t;return _(this,(function(n){if(x(e)&&!F(e)){if(t=document.querySelector(z(e)))return[2,t];if("loading"===document.readyState)return[2,new Promise((function(t){document.addEventListener("DOMContentLoaded",(function(){return t(ae(e))}),{once:!0})}))]}return[2,null]}))}))},ce=function(e){return O(void 0,void 0,void 0,(function(){var t,n,r;return _(this,(function(i){return t=new B,(n=e.parentElement)||"loading"!==document.readyState?n&&(r=n instanceof HTMLBodyElement||n instanceof HTMLHeadElement||n instanceof HTMLHtmlElement,t.inSameDomainFrame||t.inCrossDomainFrame||!r)?[2,n]:[2,null]:[2,new Promise((function(t){document.addEventListener("DOMContentLoaded",(function(){return t(ce(e))}),{once:!0})}))]}))}))},he=function(e,t){return O(void 0,void 0,void 0,(function(){var n,r;return _(this,(function(i){switch(i.label){case 0:return[4,ae(e)];case 1:return(n=i.sent())?[2,n]:[4,ce(t)];case 2:if(r=i.sent())return[2,r];throw new Error("AdriverViewabilityPixel: placement cannot be found")}}))}))},fe=function(e){return O(void 0,void 0,void 0,(function(){var t;return _(this,(function(n){if(R(e))return[2,e];if(!x(e)||F(e))throw new Error("AdriverViewabilityPixel: placement should be an HTMLElement or non-empty string");if(t=document.querySelector(z(e)))return[2,t];if("loading"===document.readyState)return[2,new Promise((function(t){document.addEventListener("DOMContentLoaded",(function(){return t(fe(e))}),{once:!0})}))];throw new Error("AdriverViewabilityPixel: placement cannot be found")}))}))},de={rootMargin:"0px",threshold:[0,.12,.25,.37,.5,.75,1],trackVisibility:!0,delay:100},ve=[161,162,215],pe=[113,161,162,168,176,177,213,214,216,217,218,163,165,226],me=[161,162,176,216,217,165,226],be=[161,162,176,165],ye=[115,161,162,176,216,217,165,226],we=[113,115,161,162,163,165,168,176,177,213,214,216,217,218,226],ge={zero:C(C([],S(pe),!1),[227],!1),clientViewability:C(C([],S(me),!1),[227],!1),firstScreenViewability:C(C([],S(be),!1),[227],!1),viewability:C(C([],S(ye),!1),[227],!1),error:C([],S(we),!1)},Ee={zero:C(C([],S(pe),!1),[116,117,118,119,177],!1),clientViewability:C(C([],S(me),!1),[116,117,118,119,177],!1),firstScreenViewability:C(C([],S(be),!1),[116,117,118,119,177],!1),viewability:C(C([],S(ye),!1),[116,117,118,119,177],!1),error:C(C([],S(we),!1),[116,117,118,119,177],!1)},ke={zero:C([],S(pe),!1),clientViewability:C([],S(me),!1),firstScreenViewability:C([],S(be),!1),viewability:C([],S(ye),!1),error:C([],S(we),!1)},Te={name:"ZeroEvent",type:110},Oe={name:"ClientViewability",type:179},_e={name:"FirstScreenViewability",type:137},Pe={name:"Viewability",type:163},Se={name:"Error",type:136},Ce="data-checked",Ie="0",Ve="0",Le="0",xe="1",Me="21",Ae="0",Re="-1",je="0",De={type:"text/javascript",charset:"windows-1251"},Fe=function(){function e(e){var t=e.eventLink,n=e.sendZeroEvent,r=e.permanent,i=e.sendEvents,o=e.nodeToTrack,s=e.delay,u=e.startTime,l=e.secondaryParams;if("string"!=typeof t||F(t))throw new Error("AV: missing event link");this.informant=new ne,this.eventLink=t,this.nodeToTrack=o,this.sendZeroEvent="boolean"!=typeof n||n,this.permanent="boolean"!=typeof r||r,this.sendEvents="boolean"!=typeof i||i,this.delay=L(s)?s:1e3,this.startTime=L(u)?u:(new Date).getTime(),this.secondaryParams=l&&L(l.time)&&L(l.area)?l:null,this.viewablePercent=-1,this.firstStart=!0,this.visibilityInformant=new ne,this.checkList={client:q(this.secondaryParams),native:!0,firstScreen:!0}}return e.prototype.sendEvent=function(e,t,n){var r=e.name,i=e.type;if(this.informant.triggerEvent(r),t){var o=this.cc.clear().collect(n||[]).toString(),s=new te(this.eventLink).setRnd().setParams({type:i,custom:o}).toString();new se(s).send()}},e.prototype.checkViewability=function(){var e,t=this;this.cc.collectFrom(this),new Promise((function(t){return setTimeout(t,L(e)&&e>0?e:0)})).then((function(){return t.sendEvent(Te,t.sendZeroEvent,t.customLists.zero)})),this.visibilityInformant.subscribe(_e.name,(function(){return t.sendEvent(_e,t.sendEvents,t.customLists.firstScreenViewability)})),this.visibilityInformant.subscribe(Pe.name,(function(){t.sendEvent(Pe,t.sendEvents,t.customLists.viewability),t.visibilityInformant.unsubscribe(Pe.name),t.permanent&&t.visibilityInformant.subscribe(Pe.name,(function(){return t.sendEvent(Pe,!1)}))})),this.visibilityInformant.subscribe(Oe.name,(function(){t.sendEvent(Oe,t.sendEvents,t.customLists.clientViewability),t.visibilityInformant.unsubscribe(Oe.name),t.permanent&&t.visibilityInformant.subscribe(Oe.name,(function(){return t.sendEvent(Oe,!1)}))})),this.visibilityInformant.subscribe(Se.name,(function(){t.sendEvent(Se,t.sendZeroEvent||t.sendEvents,t.customLists.error),t.remove()})),this.init()},e.prototype.viewabilityChange=function(e){this.viewablePercent=e,this.checkList.client&&this.checkClientViewability(),this.checkList.native&&this.checkNativeViewability(),this.checkList.firstScreen&&this.checkFirstScreenViewability(),this.permanent||this.checkList.client||this.checkList.native||this.checkList.firstScreen||this.visibilityInformant.clear()},e.prototype.checkClientViewability=function(){var e=this;this.viewablePercent>=+this.secondaryParams.area/100?this.clientViewabilityTimeoutId||(this.clientViewabilityTimeoutId=setTimeout((function(){e.visibilityInformant.triggerEvent(Oe.name),e.permanent||(e.checkList.client=!1)}),+this.secondaryParams.time)):this.clientViewabilityTimeoutId&&(clearTimeout(this.clientViewabilityTimeoutId),this.clientViewabilityTimeoutId=null)},e.prototype.checkNativeViewability=function(){var e=this;this.viewablePercent>=.5?this.viewabilityTimeoutId||(this.viewabilityTimeoutId=setTimeout((function(){e.visibilityInformant.triggerEvent(Pe.name),e.permanent||(e.checkList.native=!1)}),this.delay)):this.viewabilityTimeoutId&&(clearTimeout(this.viewabilityTimeoutId),this.viewabilityTimeoutId=null)},e.prototype.checkFirstScreenViewability=function(){if((new Date).getTime()-this.startTime<=1e3){if(!(this.viewablePercent>=.5))return;this.visibilityInformant.triggerEvent(_e.name)}this.checkList.firstScreen=!1},e.prototype.getViewablePercent=function(){return this.viewablePercent},e.prototype.subscribe=function(e,t,n){var r;this.informant.subscribe(e,null===(r=null==t?void 0:t.bind)||void 0===r?void 0:r.call(t,n))},e.prototype.unsubscribe=function(e){this.informant.unsubscribe(e)},e.prototype.remove=function(){this.informant.clear(),this.visibilityInformant.clear(),this.viewablePercent=-1},e}(),qe=function(e){function t(t){var n=e.call(this,t)||this;return n.observer=new ie(n.observerHandler.bind(n),de),n.methodOfDeterminingVisibility=1,n.width=n.nodeToTrack.clientWidth,n.height=n.nodeToTrack.clientHeight,n.cc=new $,n.customLists=ge,n.measurable=!0,n.absoluteVisible=null,n}return k(t,e),Object.defineProperty(t.prototype,"isFullscreenMode",{get:function(){return function(e,t){var n=ee(),r=j(t)?t:window.document;if(n===Z.Unknown)return null;if(null!=e&&!R(e))return null;if(V(e,HTMLVideoElement)){var i,o;if(n===Z.Webkit&&Q in e)return null!==(i=e[Q])&&void 0!==i?i:null;if(n===Z.DisabledWebkit&&Q in e)return null!==(o=e[Q])&&void 0!==o?o:null}return n===Z.DisabledWebkit?!e&&(Y.web.fullscreenElement in r?Boolean(r[Y[Z.Web].fullscreenElement]):null):e?Y[n].fullscreenElement in r?r[Y[n].fullscreenElement]===e:null:Y[n].fullscreenElement in r?Boolean(r[Y[n].fullscreenElement]):null}(this.nodeToTrack,this.nodeToTrack.ownerDocument)},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.observer.observe(this.nodeToTrack)},t.prototype.observerHandler=function(e){var t=S(e,1)[0],n=t.intersectionRatio,r=t.isVisible;this.viewabilityChange(n),this.absoluteVisible=null!=r?r:null},t.prototype.remove=function(){e.prototype.remove.call(this),this.observer.disconnect()},t}(Fe),He=function(e){function t(t){var n,r,i,o,s,u,l,a,c=e.call(this,t)||this;return c.cc=new $,c.version=window.mraid.getVersion(),c.methodOfDeterminingVisibility="2.0"===c.version?4:5,c.customLists=Ee,c.measurable=!0,c.sdk=null!==(r=null===(n=null===window||void 0===window?void 0:window.MRAID_ENV)||void 0===n?void 0:n.sdk)&&void 0!==r?r:"0",c.sdkVersion=null!==(o=null===(i=null===window||void 0===window?void 0:window.MRAID_ENV)||void 0===i?void 0:i.sdkVersion)&&void 0!==o?o:"0",c.appId=null!==(u=null===(s=null===window||void 0===window?void 0:window.MRAID_ENV)||void 0===s?void 0:s.appId)&&void 0!==u?u:"0",c.ifa=null!==(a=null===(l=null===window||void 0===window?void 0:window.MRAID_ENV)||void 0===l?void 0:l.ifa)&&void 0!==a?a:"0",c.removed=!1,c.isFullscreenMode=null,c}return k(t,e),Object.defineProperty(t.prototype,"width",{get:function(){return Math.round(window.mraid.getSize().width)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.round(window.mraid.getSize().height)},enumerable:!1,configurable:!0}),t.prototype.handleStateChange=function(e){this.isFullscreenMode=this.removed?null:"expanded"===e},t.prototype.init=function(){var e=this;if("loading"===window.mraid.getState())return window.mraid.addEventListener("ready",this.init.bind(this));window.mraid.addEventListener("stateChange",this.handleStateChange.bind(this)),"3.0"===this.version?window.mraid.addEventListener("exposureChange",(function(t){return e.mraidEventHandler(t/100)})):(window.mraid.isViewable()&&this.mraidEventHandler(1),window.mraid.addEventListener("viewableChange",(function(t){return e.mraidEventHandler(t?1:0)})))},t.prototype.mraidEventHandler=function(e){this.removed||this.viewabilityChange(e)},t.prototype.remove=function(){e.prototype.remove.call(this),this.removed=!0},t}(Fe),Ue=function(e){function t(t){var n=e.call(this,t)||this;return n.omidClient=new window.VerificationClient,n.cc=new $,n.customLists=ke,n.measurable=!0,n._width=-1,n._height=-1,n.methodOfDeterminingVisibility=6,n.removed=!1,n.isFullscreenMode=null,n}return k(t,e),t.prototype.playerStateChangeHandler=function(e){this.isFullscreenMode=!this.removed&&(null==e?void 0:e.data)?"fullscreen"===e.data.state:null},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.isSupported=function(){return this.omidClient.isSupported()},t.prototype.init=function(){this.omidClient.addEventListener("geometryChange",this.omidEventHandler.bind(this)),this.omidClient.addEventListener("playerStateChange",this.playerStateChangeHandler.bind(this))},t.prototype.omidEventHandler=function(e){var t,n,r,i,o,s,u;if(!this.removed){var l=(null!==(r=null===(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.adView)||void 0===n?void 0:n.percentageInView)&&void 0!==r?r:0)/100;L(l)&&this.viewabilityChange(l),this._width=null!==(o=null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.adView.geometry.width)&&void 0!==o?o:this._width,this._height=null!==(u=null===(s=null==e?void 0:e.data)||void 0===s?void 0:s.adView.geometry.height)&&void 0!==u?u:this._height}},t.prototype.remove=function(){e.prototype.remove.call(this),this.removed=!0},t}(Fe),We=function(){function e(e){if(!A(e)||D(e))throw new Error("AdriverViewability: there is no confing.");if(this.config=T({},e),!R(this.config.nodeToTrack)){if("string"!=typeof this.config.nodeToTrack||F(this.config.nodeToTrack))throw new Error("AdriverViewability: the element or its id is missing.");var t=document.querySelector(z(this.config.nodeToTrack));if(!t)throw new Error("AdriverViewability: the element could not be found.");this.config.nodeToTrack=t}var n=U();e:{if(n&&window.mraid){var r=window.mraid.getVersion();if("2.0"===r||"3.0"===r){this.viewabilityDeterminant=new He(this.config);break e}}if(n&&window.VerificationClient){var i=new Ue(this.config);if(i.isSupported()){this.viewabilityDeterminant=i;break e}}this.viewabilityDeterminant=new qe(this.config)}this.viewabilityDeterminant.checkViewability()}return e.prototype.getViewablePercent=function(){return this.viewabilityDeterminant.getViewablePercent()},e.prototype.subscribe=function(e,t,n){this.viewabilityDeterminant.subscribe(e,t,n)},e.prototype.unsubscribe=function(e){this.viewabilityDeterminant.unsubscribe(e)},e.prototype.remove=function(){this.viewabilityDeterminant.remove()},e}(),ze=function(){function e(e){this.trackers=e.trackers,this.nodeToTrack=e.nodeToTrack;var t=(new B).topReferrer,n=e.secondaryParams,r=n.time,i=n.area,o=H(r)&&H(i)?{time:+r,area:+i}:void 0;this.adriverViewability=new We({eventLink:new te("//ev.adriver.ru/cgi-bin/event.cgi").setParams(T(T({},e.eventLinkParams),{loc:t})).toString(),nodeToTrack:e.nodeToTrack,secondaryParams:o,sendZeroEvent:!0,permanent:!1,sendEvents:!0}),this.addListeners()}return e.prototype.loadJSTrackers=function(e){var t,n;try{for(var r=P(e),i=r.next();!i.done;i=r.next()){var o=i.value,s=new te(o).httpslize().setRnd().toString(),u=(new B).onPage?this.nodeToTrack:document.documentElement;new ue(s,u).setAttributes(De).load().catch((function(e){console.error(e)}))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.sendPixels=function(e){var t,n;try{for(var r=P(e),i=r.next();!i.done;i=r.next()){var o=i.value,s=new te(o).setRnd();new se(s.toString()).send()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.addListeners=function(){var e=this;this.adriverViewability.subscribe(Pe.name,(function(){return e.sendPixels(e.trackers.viewtrackers)})),this.adriverViewability.subscribe(Te.name,(function(){return e.loadJSTrackers(e.trackers.jstrackers)})),this.adriverViewability.subscribe(Te.name,(function(){return e.sendPixels(e.trackers.imgtrackers)}))},e.prototype.getViewablePercent=function(){return this.adriverViewability.getViewablePercent()},e.prototype.subscribe=function(e,t,n){this.adriverViewability.subscribe(e,t,n)},e.prototype.unsubscribe=function(e){this.adriverViewability.unsubscribe(e)},e.prototype.remove=function(){this.adriverViewability.remove()},e}(),Ne=function(e){return O(void 0,void 0,void 0,(function(){var t,n,r;return _(this,(function(i){switch(i.label){case 0:if(!A(e))throw new Error("AdriverViewabilityPixel: config should be an object");if(t=e.jsonUrl,!x(t)||F(t))throw new Error("AdriverViewabilityPixel: jsonUrl should be a non-empty string");return[4,fe(e.nodeToTrack)];case 1:return n=i.sent(),r=function(e,t){var n=e.includes("/rle.cgi")?e.replace("rle","json"):e,r=new te(n),i=t.clientWidth,o=t.clientHeight,s=(new $).collectFrom({width:i,height:o}).collect(ve),u={tuid:r.searchParams.get("tuid")||"1",tail256:(new B).topReferrer,custom:s.toString()};return i>0&&o>0&&(u.w=i.toString(),u.h=o.toString()),r.httpslize().setParams(u).setRnd().toString()}(t,n),[2,new re({uri:r}).request().then((function(e){return e.json()})).then((function(e){if(0===e.vr)throw new Error("AdriverViewabilityPixel: unverified spec");var t=function(e,t){var n,r,i,o,s,u,l,a,c,h,f,d=new URL(e).searchParams;return{ad:null!==(r=null!==(n=t.adid)&&void 0!==n?n:d.get("ad"))&&void 0!==r?r:Ie,bid:null!==(o=null!==(i=t.bid)&&void 0!==i?i:d.get("bid"))&&void 0!==o?o:Ve,pid:null!==(u=null!==(s=t.pid)&&void 0!==s?s:d.get("pid"))&&void 0!==u?u:Le,xpid:null!==(a=null!==(l=t.xpid)&&void 0!==l?l:d.get("xpid"))&&void 0!==a?a:Ae,sid:null!==(c=d.get("sid"))&&void 0!==c?c:xe,bt:null!==(h=d.get("bt"))&&void 0!==h?h:Me,tuid:Re,rnd:null!==(f=d.get("rnd"))&&void 0!==f?f:je}}(r,e);return new ze({nodeToTrack:n,eventLinkParams:t,secondaryParams:e.cv,trackers:{jstrackers:e.jstracker,imgtrackers:e.imgtracker,viewtrackers:e.viewtracker}})}))]}}))}))},Be=function(e,t){var n,r,i=null===(n=e.getAttribute(function(e){if(!x(e))throw new Error("Data attribute must be a string");if(F(e))throw new Error("Data attribute cannot be an empty string");return/^data-.+/.test(e)?e:"data-".concat(e)}(t)))||void 0===n?void 0:n.split(", ");if(Array.isArray(i)&&i.length>0)return i;var o=null===(r=new URL(e.src).searchParams.get(t))||void 0===r?void 0:r.split(", ");return Array.isArray(o)&&o.length>0?o:null};!function(){var e,t,n=document.querySelectorAll("script");try{for(var r=P(n),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.src.includes("pixel-script.js")&&!o.hasAttribute(Ce)){o.setAttribute(Ce,"");var s=Be(o,"placement"),u=Be(o,"pixel");if(u)for(var l=function(e){var t=u[e],n=s&&s[e]||null;if(F(t))return console.error("AdriverViewabilityPixel: pixel is not set"),"continue";he(n,o).then((function(e){return n={nodeToTrack:e,jsonUrl:t},Array.isArray(n)?Promise.allSettled(n.map(Ne)):Ne(n);var n})).catch((function(e){return console.error(e.message)}))},a=0;a<u.length;a++)l(a);else console.error("AdriverViewabilityPixel: pixel is not set")}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}}()}();
