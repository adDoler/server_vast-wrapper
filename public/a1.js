// @adr/anti-adblock v0.0.0
!function(){"use strict";function t(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(e,n){for(var o=0;o<n.length;o++){var r=n[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,t(r.key),r)}}function r(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(e,n,o){return(n=t(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function u(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw i}}}}var c,l=function(t,e){if(t)for(var n=Object.prototype.toString.call(e.prototype),o=Object.getPrototypeOf(t);o;){if(Object.prototype.toString.call(o)===n)return!0;o=Object.getPrototypeOf(o)}return!1},a=function(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)},h=function(t){return"string"==typeof t||l(t,String)},f=function(t){return l(t,HTMLElement)||d(t)},d=function(t){return l(t,Document)},m=function(t){if(!h(t))throw new Error("".concat(t," is not a string"));return 0===p(t).length},p=function(t){if(!h(t))throw new Error("".concat(t," is not a string"));return t.replace(/\s/g,"")};!function(t){t.OnPage="onpage",t.SameDomainFrame="samedomainiframe",t.CrossDomainFrame="crossdomainframe"}(c||(c={}));var v=[{system:"doubleclick",parameter:"url"},{system:"betweendigital",parameter:"ref"},{system:"vidroll.ru",parameter:"wpl"},{system:"video-play.ru",parameter:"wpl"}],g=function(){function t(){if(n(this,t),i(this,"_location",void 0),i(this,"_topWin",void 0),i(this,"_topRef",void 0),t._instance)return t._instance;t._instance=this,this.analyzeLocation()}return r(t,[{key:"analyzeLocation",value:function(){var t=window.location.href;if(window.top===window)this._location=c.OnPage,this._topWin=window;else{this._topWin=window.top;try{var e;null===(e=window.top)||void 0===e||e.location.href,t=this._topWin.location.href,this._location=c.SameDomainFrame}catch(e){this._location=c.CrossDomainFrame,t=window.document.referrer||window.location.href}}var n,o=u(v);try{for(o.s();!(n=o.n()).done;){var r=n.value,i=r.system,s=r.parameter;if(t.includes(i)){var l=new URL(t).searchParams.get(s);if(l){t=l;break}}}}catch(t){o.e(t)}finally{o.f()}if(window.location.ancestorOrigins&&window.location.ancestorOrigins.length>0){var a=window.location.ancestorOrigins[window.location.ancestorOrigins.length-1];a.replace(/^(https|http):\/\//,"")!==t.replace(/^(https|http):\/\//,"")&&(t=a)}this._topRef=t}},{key:"topReferrer",get:function(){return this._topRef}},{key:"topWindow",get:function(){return this._topWin}},{key:"onPage",get:function(){return this._location===c.OnPage}},{key:"inCrossDomainFrame",get:function(){return this._location===c.CrossDomainFrame}},{key:"inSameDomainFrame",get:function(){return this._location===c.SameDomainFrame}}]),t}();i(g,"_instance",void 0);var b,y=function(t,e,n){var o;if((f(t)||t instanceof SVGElement)&&(o=e,"[object Object]"===Object.prototype.toString.call(o)))for(var r in e){var i=a(e[r])?String(e[r]):e[r];h(i)&&!m(i)&&n(t,r,i)}};!function(t){t.Webkit="webkit",t.Moz="moz",t.Ms="ms",t.Web="web",t.DisabledWebkit="webkit_ios",t.Unknown="unknown"}(b||(b={})),i(i(i(i({},b.Webkit,{fullscreenEnabled:"webkitFullscreenEnabled",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenChangeEvent:"webkitfullscreenchange",fullscreenErrorEvent:"webkitfullscreenerror",pseudoClass:"-webkit-full-screen"}),b.Moz,{fullscreenEnabled:"mozFullScreenEnabled",fullscreenElement:"mozFullScreenElement",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",fullscreenChangeEvent:"mozfullscreenchange",fullscreenErrorEvent:"mozfullscreenerror",pseudoClass:"-moz-full-screen"}),b.Ms,{fullscreenEnabled:"msFullscreenEnabled",fullscreenElement:"msFullscreenElement",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",fullscreenChangeEvent:"MSFullscreenChange",fullscreenErrorEvent:"MSFullscreenError",pseudoClass:"-ms-fullscreen"}),b.Web,{fullscreenEnabled:"fullscreenEnabled",fullscreenElement:"fullscreenElement",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",fullscreenChangeEvent:"fullscreenchange",fullscreenErrorEvent:"fullscreenerror",pseudoClass:"fullscreen"});var w=function(){function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,t),i(this,"timeoutId",void 0),i(this,"timeout",void 0),i(this,"cb",void 0),i(this,"shouldContinue",void 0),this.cb=e,this.timeoutId=null,this.timeout=a(o)&&o>=0?o:0,this.shouldContinue=!1}return r(t,[{key:"loopIteration",value:function(){this.shouldContinue&&(this.cb(),this.timeoutId=setTimeout(this.loopIteration.bind(this),this.timeout))}},{key:"start",value:function(){null===this.timeoutId&&(this.shouldContinue=!0,this.loopIteration())}},{key:"stop",value:function(){null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.shouldContinue=!1,this.timeoutId=null)}}]),t}();!function(){if("object"===("undefined"==typeof window?"undefined":e(window)))if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var t=function(t){for(var e=window.document,n=i(e);n;)n=i(e=n.ownerDocument);return e}(),n=[],o=null,r=null;u.prototype.THROTTLE_TIMEOUT=100,u.prototype.POLL_INTERVAL=null,u.prototype.USE_MUTATION_OBSERVER=!0,u._setupCrossOriginUpdater=function(){return o||(o=function(t,e){r=t&&e?f(t,e):{top:0,bottom:0,left:0,right:0,width:0,height:0},n.forEach((function(t){t._checkForIntersections()}))}),o},u._resetCrossOriginUpdater=function(){o=null,r=null},u.prototype.observe=function(t){if(!this._observationTargets.some((function(e){return e.element==t}))){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(t.ownerDocument),this._checkForIntersections()}},u.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter((function(e){return e.element!=t})),this._unmonitorIntersections(t.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},u.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},u.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},u.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter((function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]}))},u.prototype._parseRootMargin=function(t){var e=(t||"0px").split(/\s+/).map((function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}}));return e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],e},u.prototype._monitorIntersections=function(e){var n=e.defaultView;if(n&&-1==this._monitoringDocuments.indexOf(e)){var o=this._checkForIntersections,r=null,s=null;this.POLL_INTERVAL?r=n.setInterval(o,this.POLL_INTERVAL):(c(n,"resize",o,!0),c(e,"scroll",o,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in n&&(s=new n.MutationObserver(o)).observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(e),this._monitoringUnsubscribes.push((function(){var t=e.defaultView;t&&(r&&t.clearInterval(r),l(t,"resize",o,!0)),l(e,"scroll",o,!0),s&&s.disconnect()}));var u=this.root&&(this.root.ownerDocument||this.root)||t;if(e!=u){var a=i(e);a&&this._monitorIntersections(a.ownerDocument)}}},u.prototype._unmonitorIntersections=function(e){var n=this._monitoringDocuments.indexOf(e);if(-1!=n){var o=this.root&&(this.root.ownerDocument||this.root)||t,r=this._observationTargets.some((function(t){var n=t.element.ownerDocument;if(n==e)return!0;for(;n&&n!=o;){var r=i(n);if((n=r&&r.ownerDocument)==e)return!0}return!1}));if(!r){var s=this._monitoringUnsubscribes[n];if(this._monitoringDocuments.splice(n,1),this._monitoringUnsubscribes.splice(n,1),s(),e!=o){var u=i(e);u&&this._unmonitorIntersections(u.ownerDocument)}}}},u.prototype._unmonitorAllIntersections=function(){var t=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var e=0;e<t.length;e++)t[e]()},u.prototype._checkForIntersections=function(){if(this.root||!o||r){var t=this._rootIsInDom(),e=t?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(n){var r=n.element,i=a(r),u=this._rootContainsTarget(r),c=n.entry,l=t&&u&&this._computeTargetAndRootIntersection(r,i,e),h=null;this._rootContainsTarget(r)?o&&!this.root||(h=e):h={top:0,bottom:0,left:0,right:0,width:0,height:0};var f=n.entry=new s({time:window.performance&&performance.now&&performance.now(),target:r,boundingClientRect:i,rootBounds:h,intersectionRect:l});c?t&&u?this._hasCrossedThreshold(c,f)&&this._queuedEntries.push(f):c&&c.isIntersecting&&this._queuedEntries.push(f):this._queuedEntries.push(f)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},u.prototype._computeTargetAndRootIntersection=function(e,n,i){if("none"!=window.getComputedStyle(e).display){for(var s,u,c,l,h,d,p,v,g=n,b=m(e),y=!1;!y&&b;){var w=null,E=1==b.nodeType?window.getComputedStyle(b):{};if("none"==E.display)return null;if(b==this.root||9==b.nodeType)if(y=!0,b==this.root||b==t)o&&!this.root?!r||0==r.width&&0==r.height?(b=null,w=null,g=null):w=r:w=i;else{var _=m(b),k=_&&a(_),I=_&&this._computeTargetAndRootIntersection(_,k,i);k&&I?(b=_,w=f(k,I)):(b=null,g=null)}else{var T=b.ownerDocument;b!=T.body&&b!=T.documentElement&&"visible"!=E.overflow&&(w=a(b))}if(w&&(s=w,u=g,c=void 0,l=void 0,h=void 0,d=void 0,p=void 0,v=void 0,c=Math.max(s.top,u.top),l=Math.min(s.bottom,u.bottom),h=Math.max(s.left,u.left),d=Math.min(s.right,u.right),v=l-c,g=(p=d-h)>=0&&v>=0&&{top:c,bottom:l,left:h,right:d,width:p,height:v}||null),!g)break;b=b&&m(b)}return g}},u.prototype._getRootRect=function(){var e;if(this.root&&!p(this.root))e=a(this.root);else{var n=p(this.root)?this.root:t,o=n.documentElement,r=n.body;e={top:0,left:0,right:o.clientWidth||r.clientWidth,width:o.clientWidth||r.clientWidth,bottom:o.clientHeight||r.clientHeight,height:o.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(e)},u.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map((function(e,n){return"px"==e.unit?e.value:e.value*(n%2?t.width:t.height)/100})),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},u.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,o=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==o)for(var r=0;r<this.thresholds.length;r++){var i=this.thresholds[r];if(i==n||i==o||i<n!=i<o)return!0}},u.prototype._rootIsInDom=function(){return!this.root||d(t,this.root)},u.prototype._rootContainsTarget=function(e){var n=this.root&&(this.root.ownerDocument||this.root)||t;return d(n,e)&&(!this.root||n==e.ownerDocument)},u.prototype._registerInstance=function(){n.indexOf(this)<0&&n.push(this)},u.prototype._unregisterInstance=function(){var t=n.indexOf(this);-1!=t&&n.splice(t,1)},window.IntersectionObserver=u,window.IntersectionObserverEntry=s}function i(t){try{return t.defaultView&&t.defaultView.frameElement||null}catch(t){return null}}function s(t){this.time=t.time,this.target=t.target,this.rootBounds=h(t.rootBounds),this.boundingClientRect=h(t.boundingClientRect),this.intersectionRect=h(t.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,o=this.intersectionRect,r=o.width*o.height;this.intersectionRatio=n?Number((r/n).toFixed(4)):this.isIntersecting?1:0}function u(t,e){var n,o,r,i=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(i.root&&1!=i.root.nodeType&&9!=i.root.nodeType)throw new Error("root must be a Document or Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),o=this.THROTTLE_TIMEOUT,r=null,function(){r||(r=setTimeout((function(){n(),r=null}),o))}),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(i.rootMargin),this.thresholds=this._initThresholds(i.threshold),this.root=i.root||null,this.rootMargin=this._rootMarginValues.map((function(t){return t.value+t.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function c(t,e,n,o){"function"==typeof t.addEventListener?t.addEventListener(e,n,o||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function l(t,e,n,o){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,o||!1):"function"==typeof t.detachEvent&&t.detachEvent("on"+e,n)}function a(t){var e;try{e=t.getBoundingClientRect()}catch(t){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function h(t){return!t||"x"in t?t:{top:t.top,y:t.top,bottom:t.bottom,left:t.left,x:t.left,right:t.right,width:t.width,height:t.height}}function f(t,e){var n=e.top-t.top,o=e.left-t.left;return{top:n,left:o,height:e.height,width:e.width,bottom:n+e.height,right:o+e.width}}function d(t,e){for(var n=e;n;){if(n==t)return!0;n=m(n)}return!1}function m(e){var n=e.parentNode;return 9==e.nodeType&&e!=t?i(e):(n&&n.assignedSlot&&(n=n.assignedSlot.parentNode),n&&11==n.nodeType&&n.host?n.host:n)}function p(t){return t&&9===t.nodeType}}();var E=function(){function t(e,o,r){if(n(this,t),i(this,"uri",void 0),i(this,"parent",void 0),i(this,"timeOut",void 0),i(this,"scriptElement",void 0),!h(e))throw new Error("ScriptLoader: The url must be a string.");if(m(e))throw new Error("ScriptLoader: The url parameter cannot be an empty string.");this.timeOut=a(r)&&function(t){if(!a(t))throw new Error("".concat(t," is not a number"));return t>=0}(r)?r:5e3,this.scriptElement=document.createElement("script"),this.uri=e,d(o)&&f(o.body)?this.parent=o.body:f(o)&&1===(null==o?void 0:o.nodeType)?this.parent=o:this.parent=document.body}return r(t,[{key:"removeScriptElement",value:function(){this.scriptElement.remove()}},{key:"load",value:function(){var t=this;return new Promise((function(e,n){t.scriptElement.setAttribute("src",t.uri);var o=setTimeout((function(){t.scriptElement.removeEventListener("load",r),t.scriptElement.removeEventListener("error",r),t.scriptElement.remove(),n(new Error("TimeOut error."))}),t.timeOut),r=function(r){clearTimeout(o),"error"===r.type?(t.scriptElement.remove(),n(new Error("Script error loading."))):e(!0)};t.scriptElement.addEventListener("load",r,{once:!0}),t.scriptElement.addEventListener("error",r,{once:!0}),t.parent.append(t.scriptElement)}))}},{key:"setAttributes",value:function(t){return function(t,e){y(t,e,(function(t,e,n){return t.setAttribute(e,n)}))}(this.scriptElement,t),this}}]),t}(),_=function(){function t(){n(this,t),i(this,"audio",void 0),i(this,"timeoutId",void 0),i(this,"checkProcess",void 0),this.audio=new Audio,this.audio.volume=1,this.timeoutId=null,this.checkProcess=null}return r(t,[{key:"check",value:function(){var e=this;return!0===t.resoultCheck?Promise.resolve(t.resoultCheck):(this.checkProcess||(this.checkProcess=new Promise((function(n){var o=function(){e.timeoutId&&clearTimeout(e.timeoutId),t.resoultCheck=!0,e.checkProcess=null,n(!0)};e.audio.addEventListener("play",o);var r=e.audio.play();void 0!==r?r.catch((function(){e.audio.removeEventListener("play",o),e.checkProcess=null,n(!1)})):e.timeoutId=setTimeout((function(){e.audio.removeEventListener("play",o),e.checkProcess=null,n(!1)}),500)}))),this.checkProcess)}}]),t}();i(_,"resoultCheck",!1);var k="1px";(function(){function t(){n(this,t)}return r(t,null,[{key:"check",value:function(){var t=this,e=this.createAdElement();return new Promise((function(n){var o=null,r=function(){o?clearTimeout(o):document.removeEventListener("DOMContentLoaded",i),s.stop(),e.remove()},i=function(){setTimeout((function(){n(t.checkStyles(e)),r()}),100)},s=new w((function(){t.checkStyles(e)&&(r(),n(!0))}),50);e.className="content-list__ad-label ad banner adriver tracker analitics ads reklama ad-sidebar adsbox adblock-blocker","loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):o=setTimeout((function(){n(t.checkStyles(e)),r()}),500),s.start()}))}},{key:"createAdElement",value:function(){var t=document.createElement("div");return y(t,{width:k,height:k,opacity:"1",display:"block",visibility:"visible"},(function(t,e,n){return t.style.setProperty(e,n)})),document.body.append(t),t}},{key:"checkStyles",value:function(t){var e=window.getComputedStyle(t);return"none"===e.display||"hidden"===e.visibility||e.height!==k||e.width!==k||"1"!==e.opacity}}]),t})().check().then((function(t){t&&(window.AAB_PROXY_URL="https://example.com");var e,n=(e="https://content.adriver.ru/adriver-core.js",Object.prototype.hasOwnProperty.call(window,"AAB_PROXY_URL")?"".concat(window.AAB_PROXY_URL,"?source=").concat(btoa(e)):e);new E(n).load()}))}();
